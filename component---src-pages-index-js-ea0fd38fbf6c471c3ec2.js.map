{"version":3,"file":"component---src-pages-index-js-ea0fd38fbf6c471c3ec2.js","mappings":";2GAEA,MAAMA,EAAY,YACZC,EAAY,YACZC,EAAkB,0BAClBC,EAAa,yBACbC,EAAa,WAEbC,EAAqB,IAAIC,OAAO,IAAMF,EAAWG,QACjDC,EAA4B,IAAIF,OAAOF,EAAWG,OAASJ,EAAWI,OAAQ,MAC9EE,EAAyB,IAAIH,OAAO,OAASH,EAAWI,OAAQ,MA6ChEG,EAAY,CAACC,EAAOC,KACzB,GAAuB,iBAAVD,IAAsBE,MAAMC,QAAQH,GAChD,MAAM,IAAII,UAAU,gDAiBrB,GAdAH,EAAU,CACTI,YAAY,EACZC,8BAA8B,KAC3BL,GAWiB,KAPpBD,EADGE,MAAMC,QAAQH,GACTA,EAAMO,KAAIC,GAAKA,EAAEC,SACvBC,QAAOF,GAAKA,EAAEG,SACdC,KAAK,KAECZ,EAAMS,QAGLE,OACT,MAAO,GAGR,MAAME,GAAiC,IAAnBZ,EAAQa,OAC3BC,GAAUA,EAAOF,cACjBE,GAAUA,EAAOC,kBAAkBf,EAAQa,QACtCG,GAAiC,IAAnBhB,EAAQa,OAC3BC,GAAUA,EAAOE,cACjBF,GAAUA,EAAOG,kBAAkBjB,EAAQa,QAE5C,GAAqB,IAAjBd,EAAMW,OACT,OAAOV,EAAQI,WAAaY,EAAYjB,GAASa,EAAYb,GAqB9D,OAlBqBA,IAAUa,EAAYb,KAG1CA,EAhFwB,EAACe,EAAQF,EAAaI,KAC/C,IAAIE,GAAkB,EAClBC,GAAkB,EAClBC,GAAsB,EAE1B,IAAK,IAAIC,EAAI,EAAGA,EAAIP,EAAOJ,OAAQW,IAAK,CACvC,MAAMC,EAAYR,EAAOO,GAErBH,GAAmB9B,EAAUmC,KAAKD,IACrCR,EAASA,EAAOU,MAAM,EAAGH,GAAK,IAAMP,EAAOU,MAAMH,GACjDH,GAAkB,EAClBE,EAAsBD,EACtBA,GAAkB,EAClBE,KACUF,GAAmBC,GAAuB/B,EAAUkC,KAAKD,IACnER,EAASA,EAAOU,MAAM,EAAGH,EAAI,GAAK,IAAMP,EAAOU,MAAMH,EAAI,GACzDD,EAAsBD,EACtBA,GAAkB,EAClBD,GAAkB,IAElBA,EAAkBN,EAAYU,KAAeA,GAAaN,EAAYM,KAAeA,EACrFF,EAAsBD,EACtBA,EAAkBH,EAAYM,KAAeA,GAAaV,EAAYU,KAAeA,EAEvF,CAEA,OAAOR,CAAM,EAsDJW,CAAkB1B,EAAOa,EAAaI,IAG/CjB,EAAQA,EAAM2B,QAAQjC,EAAoB,IAGzCM,EADGC,EAAQK,6BAxDwB,EAACN,EAAOa,KAC5CtB,EAAgBqC,UAAY,EAErB5B,EAAM2B,QAAQpC,GAAiBsC,GAAMhB,EAAYgB,MAsD/CvB,CAA6BN,EAAOa,GAEpCA,EAAYb,GAGjBC,EAAQI,aACXL,EAAQiB,EAAYjB,EAAM8B,OAAO,IAAM9B,EAAMyB,MAAM,IAzDjC,EAACzB,EAAOiB,KAC3BpB,EAA0B+B,UAAY,EACtC9B,EAAuB8B,UAAY,EAE5B5B,EAAM2B,QAAQ9B,GAA2B,CAACkC,EAAGC,IAAef,EAAYe,KAC7EL,QAAQ7B,GAAwBmC,GAAKhB,EAAYgB,MAuD5CC,CAAYlC,EAAOiB,EAAY,EAGvCkB,EAAOC,QAAUrC,EAEjBoC,EAAOC,QAAP,QAAyBrC,oBC1GzBoC,EAAOC,QAAU,SAASC,EAAMC,EAAGC,GACjC,GAAID,IAAMC,EAAG,OAAO,EAEpB,GAAID,GAAKC,GAAiB,iBAALD,GAA6B,iBAALC,EAAe,CAC1D,GAAID,EAAEE,cAAgBD,EAAEC,YAAa,OAAO,EAE5C,IAAI7B,EAAQW,EAAGmB,EACf,GAAIvC,MAAMC,QAAQmC,GAAI,CAEpB,IADA3B,EAAS2B,EAAE3B,SACG4B,EAAE5B,OAAQ,OAAO,EAC/B,IAAKW,EAAIX,EAAgB,GAARW,KACf,IAAKe,EAAMC,EAAEhB,GAAIiB,EAAEjB,IAAK,OAAO,EACjC,OAAO,CACT,CAIA,GAAIgB,EAAEE,cAAgB7C,OAAQ,OAAO2C,EAAE1C,SAAW2C,EAAE3C,QAAU0C,EAAEI,QAAUH,EAAEG,MAC5E,GAAIJ,EAAEK,UAAYC,OAAOC,UAAUF,QAAS,OAAOL,EAAEK,YAAcJ,EAAEI,UACrE,GAAIL,EAAEQ,WAAaF,OAAOC,UAAUC,SAAU,OAAOR,EAAEQ,aAAeP,EAAEO,WAIxE,IADAnC,GADA8B,EAAOG,OAAOH,KAAKH,IACL3B,UACCiC,OAAOH,KAAKF,GAAG5B,OAAQ,OAAO,EAE7C,IAAKW,EAAIX,EAAgB,GAARW,KACf,IAAKsB,OAAOC,UAAUE,eAAeC,KAAKT,EAAGE,EAAKnB,IAAK,OAAO,EAEhE,IAAKA,EAAIX,EAAgB,GAARW,KAAY,CAC3B,IAAI2B,EAAMR,EAAKnB,GAEf,IAAKe,EAAMC,EAAEW,GAAMV,EAAEU,IAAO,OAAO,CACrC,CAEA,OAAO,CACT,CAGA,OAAOX,GAAIA,GAAKC,GAAIA,CACtB,moBCmkBA,MCjmBaW,EAA2B,IACC,oBAAhCC,kBACP,YAA6BA,iBAACN,UA6DIO,SAAAA,EAGlCC,EACAC,EACAC,GAIA,MAAMC,EAA8B,CAAC,EAErC,IAAc,EAAE,uBAmBhB,MAXe,UAAXD,GACFC,EAAaH,MAAQA,EACrBG,EAAaF,OAASA,GACF,gBAAXC,IAKTE,EAAAA,yDAGK,CACLA,UAAAA,EACA,4BAA+B,GAC/BC,MAAOF,EAEX,CA0GgB,SAAYG,EAC1BC,EACAC,EACAC,EACAC,EACAL,GA4BA,YA5BAA,IAAAA,IAAAA,EAAuB,CAAC,GAkBnBI,EAAAA,CAAAA,EAAAA,EACHC,CAAAA,QAAAA,EACAC,WAAYJ,EACZ,kBAAqB,GACrBF,MAAKO,EAAAA,CAAAA,EACAP,EAAK,CACRQ,QAASL,EAAW,EAAI,KAK9B,UAOmCM,EACjCC,EACAP,EACAN,EACAF,EACAC,EACAe,EACAC,EACAC,GAEA,MAAkBf,EAAkB,CAAC,EAEjCa,IACFb,EAAaa,gBAAkBA,EAEhB,UAAXd,GACFC,EAAaH,MAAQA,EACrBG,EAAaF,OAASA,EACtBE,EAAaa,gBAAkBA,EAC/Bb,EAAagB,SAAW,aACJ,gBAAXjB,GAMW,cAAXA,KALTC,EAAagB,SAAW,WACxBhB,EAAaiB,IAAM,EACnBjB,EAAakB,KAAO,EACpBlB,EAAamB,OAAS,EACtBnB,EAAaoB,MAAQ,IAUrBN,IACFd,EAAac,UAAYA,GAGvBC,IACFf,EAAae,eAAiBA,GAEhC,MAAYM,EAAAA,EAAAA,CAAAA,EACPT,EAAW,CACd,eAAc,EACd,yBAA4B,GAC5BV,MACEQ,EAAAA,CAAAA,QAASL,EAAW,EAAI,EACxBiB,WAAkC,wBAC/BtB,KAeP,OACFqB,CAAAA,CCrUA,qBAkEWE,EAA2C,YAGpDzB,IAHmEC,OACnEA,EAAMF,MACNA,EAAKC,OACLA,GAAAA,EAEA,MAAe,cAAXC,EAEAyB,EAAAA,cAAiBC,MAAAA,CAAAA,eAAAA,EAAAA,MAAO,CAAEC,WAAgB5B,EAASD,EAAS,IAAnB,OAI9B,gBAAXE,EAEAyB,EAAAA,cAAAA,MAAAA,CAAKtB,MAAO,CAAEyB,SAAU9B,EAAO+B,QAAS,UACtCJ,EAAAA,cAAAA,MAAAA,CACEK,IAAI,GACJC,KAAK,eACO,qBACZC,IAAAA,qDAA0DjC,eAAoBD,uEAC9EK,MAAO,CACLyB,SAAgB,OAChBC,QAAgB,QAChBZ,SAAkB,aAOrB,IACT,EAE0BgB,EAEtB,SAA6CC,GAAAA,IAAtBC,SAAEA,GAAoBD,EAAPE,EAAKC,EAAAA,EAAAA,GAC7C,OACEZ,EAAAA,cAACa,EAAAA,SAAQ,KACPb,EAAAA,cAACC,EAAUU,EAAAA,CAAAA,EAAAA,IACVD,EAEmC,KAG1C,wFC1EWI,EAAkC,SAAcL,GAAAA,IAACF,IAC1DA,EAAGnC,OACHA,EAAMW,QACNA,EAAOsB,IACPA,EAAQ,cACRrB,GACG2B,EAAAA,EAEHC,EAAAA,EAAAA,GAAAA,OACEZ,EAAAA,cAAAA,MAAAA,EAAAA,CAAAA,EACMW,EAAK,CACTI,SAAS,QACThC,QAASA,EACTwB,IAAKvB,EAAauB,OAAAA,EAAe,WACtBvB,OAAAA,EAAauB,EACxBnC,OAAQY,EAAaZ,OAAAA,EACR,cAACY,OAAAA,EAAaZ,EAC3BiC,IAAKA,IAGX,EAEoBW,EAA2B,SAAgBC,GAAC,aAC9DC,EAAQC,QACRA,EAAU,GAAEnC,WACZA,GAAAA,GAEDiC,EADIN,EAEHC,EAAAA,EAAAA,GAAAA,MAAAA,EAAcD,EAAMS,QAASF,MAAAA,OAAAA,EAAAA,EAAUE,OAAAA,EAErCpB,EAAAA,cAACc,EAAUH,EAAAA,CAAAA,EAAAA,EAAWO,EAAUE,CAAAA,MAAOA,EAAOpC,WAAYA,KAG5D,OAAKmC,EAAQxF,OAAAA,EAAAA,cAKXsE,UAAAA,KACGkB,EAAQ5F,KAAI,QAAG8F,MAAAA,EAAOjD,OAAAA,EAAQkD,KAAAA,GAAAA,EAAAA,OAC7BtB,EAAAA,cAAAA,SAAAA,CACE/B,IAAQ,QAASqD,KAAQlD,IACzBkD,KAAMA,EACND,MAAOA,EACPjD,OAAQY,EAAaZ,OAAAA,EACR,cAACY,OAAAA,EAAaZ,EAC3BgD,MAAOA,GAAAA,IAGVG,GAAAA,CAGP,ECvFA,MDyFAT,EAAMU,UAAY,CAChBjB,IAAKkB,EAAAA,OAAiBC,WACtBrB,IAAKoB,EAAAA,OAAiBC,WACtBN,MAAOK,EAAAA,OACPrD,OAAQqD,EAAAA,OACRzC,WAAYyC,EAAAA,MAGdT,EAAQW,YAAc,UACtBX,EAAQQ,UAAY,CAClBnB,IAAKoB,EAAAA,OAAiBC,WACtB1C,WAAYyC,EAAAA,KACZP,SAAUO,EAAAA,MAAgB,CACxBlB,IAAKkB,EAAAA,OAAiBC,WACtBtD,OAAQqD,EAAAA,OACRL,MAAOK,EAAAA,SAETN,QAASM,EAAAA,QACPA,EAAAA,UAAoB,CAClBA,EAAAA,MAAgB,CACdJ,MAAOI,EAAAA,OAAiBC,WACxBJ,KAAMG,EAAAA,OACNL,MAAOK,EAAAA,OACPrD,OAAQqD,EAAAA,OAAiBC,aAE3BD,EAAAA,MAAgB,CACdJ,MAAOI,EAAAA,OACPH,KAAMG,EAAAA,OAAiBC,WACvBN,MAAOK,EAAAA,OACPrD,OAAQqD,EAAAA,OAAiBC,iBCtHjC,qBASaE,EACX,SAAoBnB,GAAC,aAAES,GAAaP,EAAAA,EAAAA,EAAAA,EAAAA,GAClC,OAAIO,EAEAlB,EAAAA,cAACC,EACKU,EAAAA,CAAAA,EAAAA,EACJO,CAAAA,SAAU,CACRX,IAAKW,GACN,iBAEDb,IAAI,sBAIDJ,MAASU,EAAAA,CAAAA,EAAAA,GAEpB,EAEFiB,EAAYD,YAAc,cAC1BC,EAAYJ,UAAY,CACtBN,SAAUO,EAAAA,OACVN,QAA0B,OAAnBU,EAAEb,EAAQQ,gBAAAA,EAARK,EAAmBV,QAC5Bd,IAAK,SAAUM,EAAOmB,EAAUC,GAC9B,OAAKpB,EAAMmB,GAIJ,IAASE,MACd,kBAAkBF,qBAA4BC,2BAH/C,IAKH,GClCWE,MAAAA,EAAoC,SAAmBtB,GAClE,OACEX,EAAAA,cAAAA,EAAAA,SAAAA,KACEA,EAAAA,cAACC,EAAYU,EAAAA,CAAAA,EAAAA,IACbX,EAAAA,cAAAA,WAAAA,KACEA,EAAAA,cAACC,EAAYU,EAAAA,CAAAA,EAAAA,EAAAA,CAAO3B,YAAAA,MAI5B,EAEAiD,EAAUN,YAAc,YACxBM,EAAUT,UAAYR,EAAQQ,UAAAA,MAAAA,EAAAA,CAAAA,KAAAA,YAAAA,QAAAA,QAAAA,QAAAA,UAAAA,eAAAA,WAAAA,kBAAAA,YAAAA,kBAAAA,EAAAA,CAAAA,QAAAA,aCRxBU,EAAkBC,GAAwBA,EAAIxF,QAAQ,MAAO,IAmHtDyF,EAA4C,SACvDzB,EACAmB,EACAC,GAAAA,IAAAA,IAAAA,EAAAA,UAAAA,OACGM,EAAAA,IAAAA,MAAAA,EAAAA,EAAAA,EAAAA,EAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAAA,UAAAA,GAAAA,OAEE1B,EAAMN,KAAqB,KAAdM,EAAMN,IAMRoB,IAAAA,OAAO1F,MAAP0F,IAAAA,CAAQd,EAAOmB,EAAUC,GAAAA,OAAkBM,IALlD,IAAIL,MAAM,iCACkBD,2JAAAA,EAOjBP,EAAG,CACvBc,MAAOb,IAAAA,OAAiBC,WACxBrB,IAAK+B,GC7IPG,EAAAA,CAAAA,KAAAA,QAAAA,QAAAA,kBAAAA,YAAAA,QAAAA,cAAAA,SAAAA,WAAAA,EAAAA,CAAAA,QAAAA,aAAAA,EA4BmB,IAAIC,IACvB,IAA8BC,EACyBC,EAgCvD,MAAMC,EAA4C,SAWjDlC,GAAAA,IAX8EmC,GAC7EA,EAAU,YACVN,EAAK5D,MACLA,EAAKW,gBACLA,EAAeZ,UACfA,EACAoE,MAAOC,EAAWC,YAClBA,EAAWC,OACXA,EAAMC,QACNA,GAEDxC,EADIE,EAEHC,EAAAA,EAAAA,GAAAA,MAAMvC,MAAEA,EAAKC,OAAEA,EAAMC,OAAEA,GAAW+D,EAAAA,EAK9BY,EAAgB7E,EAAOC,EAAQC,IAHjCG,MAAOyE,EACP1E,UAAW2E,GACRC,EAAAA,EAAAA,EAAAA,EAAAA,GAECC,GAAOC,EAAAA,EAAAA,UAAAA,GACIC,EAAAA,EAAAA,UAAQ,IAAMC,KAAKC,UAAUpB,EAAMxD,SAAS,CAACwD,EAAMxD,SAGhEgE,IACFrE,EAAYqE,GAGd,MAAY,EAADa,SLxCXpF,EACAF,EACAC,GAEA,IAAU,EAAE,GAWZ,MAVe,cAAXC,IACFoF,EACE,+CAACrF,EAASD,EAAS,iBAIR,gBAAXE,IACFoF,EAAAA,0BAAkCtF,mIAAuIC,eAAoBD,2IAGxLsF,CACT,CKwBaA,CAAYpF,EAAQF,EAAOC,GA+HtC,OA7HAsF,EAAAA,EAAAA,YAAU,KACHnB,IACHA,EAA6BoB,EAAAA,EAAAA,KAAAA,KAAAA,EAAAA,KAAAA,EAAAA,OAAyBC,MACpD,QAAGC,oBAAAA,EAAqBC,qBAAAA,GAAAA,EAAAA,OACtBtB,EAAcqB,EAEP,CACLA,oBAAAA,EACAC,qBAAAA,EAAAA,KAQR,MAAMC,EAAWX,EAAKY,QAAQC,cACH,2BAE3B,GAAIF,GAAY/F,IAkCd,OAjCI+F,EAASG,UAAAA,MAEXrB,GAAAA,EAAc,CACZsB,WAAU,IAAC,MAEbrB,GAAAA,EAAS,CACPqB,WAAU,IAIZC,YAAW,KACTL,EAASM,gBAAgB,2BACxB,KAEQ,MAAXxB,GAAAA,EAAc,CACZsB,WAAU,IAGZJ,EAASO,iBAAuB,QAAE,SAAS,IACzCP,EAASQ,oBAAoB,OAAQC,GAE/B,MAAN1B,GAAAA,EAAS,CACPqB,WAAU,IAGZC,YAAW,KACTL,EAASM,gBAAgB,wBAAuB,GAC/C,EACL,UAGFI,EAAWC,IAAIC,GAKjB,GAAInC,GAAeiC,EAAWG,IAAID,GAChC,OAGF,IAAIE,EACAC,EAiCJ,OAhCAvC,EAA2BqB,MACzB,IAAwBE,IAArBD,oBAAAA,EAAqBC,qBAAAA,GAAAA,EACjBV,EAAKY,UAIVZ,EAAKY,QAAQe,UAAYlB,EAAAA,EAAAA,CACvBnF,WAAU,EACVC,SAAU8F,EAAWG,IAAID,GACzBvC,MAAAA,GACG3B,IAGAgE,EAAWG,IAAID,KAClBE,EAAiBG,uBAAsB,KACjC5B,EAAKY,UACPc,EAAkBhB,EAChBV,EAAKY,QACLW,EACAF,EACAjG,EACAqE,EACAC,EACAC,GAEH,KAEJ,IAKE,KACD8B,GACFI,qBAAqBJ,GAEnBC,GACFA,GACD,CACH,GACC,CAAC1C,KAGJ8C,EAAAA,EAAAA,kBAAgB,KACVT,EAAWG,IAAID,IAAanC,IAC9BY,EAAKY,QAAQe,UAAYvC,EACvB9D,EAAAA,CAAAA,UAAW+F,EAAWG,IAAID,GAC1BhG,SAAU8F,EAAWG,IAAID,GACzBvC,MAAAA,GACG3B,IAAAA,MAILoC,GAAAA,EAAc,CACZsB,WAAU,IAAC,MAEbrB,GAAAA,EAAS,CACPqB,WAAU,IAEb,GACA,CAAC/B,KAGGrC,EAAAA,EAAAA,eAAc2C,EAAAA,EAAAA,CAAAA,EAChBS,EAAY,CACf3E,MAAKO,EAAAA,CAAAA,EACAkE,EACAzE,EACHW,CAAAA,gBAAAA,IAEFZ,UAAW,GAAG2E,IAAS3E,EAAY,IAAIA,IAAAA,KACvC4G,IAAK/B,EACLgC,wBAAyB,CACvBC,OAAQ5B,GAEV6B,0BAAyB,IAE7B,EAEwBC,GAAwCC,EAAAA,EAAAA,OAC9D,SAAqB/E,GACnB,OAAKA,EAAM2B,OAcJrC,EAAAA,EAAAA,eAAc0C,EAAqBhC,GARzC,IASH,IAGF8E,EAAYjE,UAAYA,EACxBiE,EAAY9D,YAAc,cC5P1B,2PAsBgBgE,SAAAA,EACdF,GAEA,OAAgBG,SAuBfnF,GAAAA,IAvB2BF,IAC1BA,EACAsF,YAAaC,EAASC,QACtBA,GAmBGpF,EAAAA,EAEHC,EAAAA,EAAAA,GAIA,OAJImF,GACFC,QAAQC,KAAKF,GAGXD,EACK9F,EAAAA,cAACyF,EAAYnD,EAAAA,CAAAA,MAAOwD,GAAenF,KAE5CqF,QAAQC,KAAK,mBAAoB1F,GAOnC,MACF,CAEA,MAAiBqF,EACfD,GFvDA,SAAoBlF,GAAAA,IAACmC,GACnBA,EAAAA,MAAUnE,UACVA,EACAoE,MAAOC,EAAWpE,MAClBA,EAAK4D,MACLA,EAAKvD,QACLA,EAAgB,oBAChBmH,EAAYC,SACZA,EAAQ9G,gBACRA,EAAeC,UACfA,EAASC,eACTA,GAAAA,EACGoB,EAAKC,EAAAA,EAAAA,GAER,IAAK0B,EAEH,OADA0D,QAAQC,KAAK,4CACN,KAGLnD,IACFrE,EAAYqE,GAGdqD,EAAAA,EAAAA,CACE7G,UAAAA,EACAC,eAAAA,EACAF,gBAAAA,GACG8G,GAGL,MAAM9H,MACJA,EAAKC,OACLA,EAAMC,OACNA,EAAMO,OACNA,EAAMM,YACNA,EACAC,gBAAiB+G,GACf9D,EAMAY,EAAAA,EAAgB7E,EAAOC,EAAQC,IAHjCG,MAAOyE,EACP1E,UAAW2E,GACRC,EAAAA,EAAAA,EAAAA,EAAAA,GAGCgD,EAA4C,CAChDnF,cAAS,EACTC,QAAS,IAoBX,OAlBIrC,EAAOoC,WACTmF,EAAcnF,SAAQjC,EAAAA,CAAAA,EACjBH,EAAOoC,SAAS,CACnB9C,OAAQU,EAAOoC,SAAS9C,OACpB8D,EAAepD,EAAOoC,SAAS9C,aAAAA,KAKnCU,EAAOqC,UACTkF,EAAclF,QAAUrC,EAAOqC,QAAQ5F,KAAIX,GAAAA,EAAAA,CAAAA,EAEpCA,EAAM,CACTwD,OAAQ8D,EAAetH,EAAOwD,aAAAA,EAAAA,cAMlCwE,EAEKS,EAAAA,CAAAA,EAAAA,EAAAA,CACH3E,MAAKO,EAAAA,CAAAA,EACAkE,EACAzE,EAAK,CACRW,gBAAAA,IAEFZ,UAAW,GAAG2E,IAAS3E,EAAY,IAAIA,IAAAA,OAEzCuB,EAAAA,cAACC,EAAc,CAAA1B,OAAQA,EAAQF,MAAOA,EAAOC,OAAQA,GACnD0B,EAAAA,cAACC,EAAWhB,EAAAA,CAAAA,EACNE,EACFC,GAAAA,EAEAb,EACAF,EACAC,EACA8H,EACA9G,EACAC,KAIJS,EAAAA,cAACC,EACuBhB,EAAAA,CAAAA,wBAAAA,GACtBR,UAAWyH,GACNvF,EAKDhC,EACU,UAAZI,GAAAA,EAEAsH,EACAtH,EACAoH,MAKV,IErDuBG,EAAgC,SACvD3F,EACAmB,GAAAA,IAAAA,IAAAA,EAAAA,UAAAA,OACGO,EAAAA,IAAAA,MAAAA,EAAAA,EAAAA,EAAAA,EAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAAA,UAAAA,GAAAA,MAG2B,cAA5B1B,EAAMpC,QACQ,UAAbuD,GAAAA,WAAwBA,IACzBnB,EAAMmB,GAAAA,IAAAA,OAMeyE,MANfzE,IAAAA,CAMgBnB,EAAOmB,GAAAA,OAAaO,IAJnC,IAASL,MACd,IAAIF,MAAanB,EAAMmB,iDAAAA,EAMX0E,EAAG,IAAIhE,IAAI,CAAQ,QAAa,YAAe,gBAEpDhB,EAAY,CACvBjB,IAAKkB,IAAAA,OAAiBC,WACtBrB,IAAK+B,EACL/D,MAAOiI,EACPhI,OAAQgI,EACRlF,MAAOK,IAAAA,OACPlD,OAASoC,IACP,YAAIA,EAAMpC,SAGNiI,EAAa1B,IAAInE,EAAMpC,QAI3B,OAAWyD,IAAAA,MACT,iBAAiBrB,EAAMpC,2HAA0H,GAKvJqH,EAAYjE,YAAc,cAC1BiE,EAAYpE,UAAYA,EC7FlBoE,MAAAA,EACJD,EAAgBc,GAElBb,EAAYjE,YAAc,cAC1BiE,EAAYpE,UAAYA,uQCMjB,MAAMkF,EAAQ,IACRC,EAAQ,IACRC,EAAO,IAEPC,EAAS,IACTC,EAAO,IACPC,EAAQ,IACRC,EAAO,IACPC,EAAmB,2DACzB,MAAMC,EACTC,MACAC,KACAC,GACAC,MACAC,SACAC,UAOA9J,MACA+J,IACAC,IACAC,OACAC,MACApK,YAAYqK,EAAOC,GACf,MAAM,MAAEX,EAAK,MAAEG,EAAK,KAAEF,EAAI,GAAEC,EAAE,MAAE3J,EAAK,SAAE6J,EAAQ,UAAEC,GAAcM,EACzDC,EAAgBC,EAAUZ,GAC1Ba,EAAcD,EAAUX,GAC9Ba,KAAKf,MAAQA,EACbe,KAAKZ,MAAQA,EACbY,KAAKd,KAAOW,EACZG,KAAKb,GAAKY,EAMVC,KAAKT,IAAMI,EAAkB,WAAEC,EAAUD,EAAc,OAAE,CAAEM,OAAO,KAClED,KAAKR,IAAMK,EAAgBE,EAC3BC,KAAKP,OAASE,EAAMO,MAEpBP,EAAiB,UAAEC,GACnBI,KAAKN,MAAQC,EAAMO,MACnBP,EAAiB,YAEjBK,KAAKxK,MAAQ,GACb,IAAK,MAAM2K,KAAQC,EACXA,EAAKD,GAAQ3K,IACbwK,KAAKxK,OAAS6K,EAAMF,IAGxBd,IACAW,KAAKX,SAAWA,GAEhBC,IACAU,KAAKV,UAAYA,EACjBU,KAAKR,KAAOF,EAEpB,CACAgB,YACI,OAAON,KAAKxK,MAAM+K,QAAQF,EAAe,UAAM,CACnD,CACAG,cACI,OAAOR,KAAKxK,MAAM+K,QAAQF,EAAiB,YAAM,CACrD,CACAI,cACI,OAAOT,KAAKxK,MAAM+K,QAAQF,EAAkB,aAAM,CACtD,CACAK,mBACI,OAAOV,KAAKxK,MAAM+K,QAAQF,EAAoB,eAAM,CACxD,CACAM,oBACI,OAAOX,KAAKxK,MAAM+K,QAAQF,EAAoB,eAAM,CACxD,CACAO,YACI,OAAOZ,KAAKxK,MAAM+K,QAAQF,EAAgB,WAAM,CACpD,EAEJ,MAAMQ,GAAS,EACTR,EAAQ,CACVS,OAAQ,IACRC,QAAS,IACTC,SAAU,IACVC,WAAY,IACZC,UAAW,IACXC,aAAc,IACdC,aAAc,KAGLC,EAAU,CACnB,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC1C,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC1C,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC1C,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC1C,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC1C,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC1C,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC1C,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAExCjB,EAAO,CACTU,OAAQ,EACRC,QAAS,EACTC,SAAU,EACVC,WAAY,EACZC,UAAW,GACXC,aAAc,GACdC,aAAc,IA0CZE,EAAO,CACTC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EACrDC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAC5DC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAC5DC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAC5DC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAC5DC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAC5DC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAC/DC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,IAAKC,GAAI,KAEjEC,EAAe,CACjBlQ,EAAG,CAAC,GAAI,GAAI,GAAI,IAChBmQ,EAAG,EAAE,IAAK,IAAK,IAAK,KAElBC,EAAgB,CAClBC,EAAG,EAAE,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IACpCrQ,EAAG,EAAE,IAAK,GAAI,GAAI,IAClBsQ,EAAG,EAAE,GAAI,EAAG,IAAK,GACjBC,EAAG,EAAE,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,GACnCC,EAAG,EAAE,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAGjCC,EAAU,CACZ,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAChD,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAChD,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAChD,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAC3D,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAChD,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAChD,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAG1CC,EAAO,CACT,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAChD,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAChD,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAChD,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAA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","sources":["webpack://quick-chess/./node_modules/camelcase/index.js","webpack://quick-chess/./node_modules/fast-deep-equal/index.js","webpack://quick-chess/../src/image-utils.ts","webpack://quick-chess/../src/components/hooks.ts","webpack://quick-chess/../src/components/layout-wrapper.tsx","webpack://quick-chess/../src/components/picture.tsx","webpack://quick-chess/../src/components/placeholder.tsx","webpack://quick-chess/../src/components/main-image.tsx","webpack://quick-chess/../src/components/gatsby-image.server.tsx","webpack://quick-chess/../src/components/gatsby-image.browser.tsx","webpack://quick-chess/../src/components/static-image.server.tsx","webpack://quick-chess/../src/components/static-image.tsx","webpack://quick-chess/./node_modules/chess.js/dist/esm/chess.js","webpack://quick-chess/./node_modules/redux/es/redux.js","webpack://quick-chess/./node_modules/@react-dnd/invariant/dist/index.js","webpack://quick-chess/./node_modules/dnd-core/dist/utils/js_utils.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/dragDrop/types.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/dragDrop/local/setClientOffset.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/dragDrop/beginDrag.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/dragDrop/drop.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/dragDrop/endDrag.js","webpack://quick-chess/./node_modules/dnd-core/dist/utils/matchesType.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/dragDrop/hover.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/dragDrop/publishDragSource.js","webpack://quick-chess/./node_modules/dnd-core/dist/classes/DragDropManagerImpl.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/dragDrop/index.js","webpack://quick-chess/./node_modules/dnd-core/dist/utils/coords.js","webpack://quick-chess/./node_modules/dnd-core/dist/utils/dirtiness.js","webpack://quick-chess/./node_modules/dnd-core/dist/classes/DragDropMonitorImpl.js","webpack://quick-chess/./node_modules/@react-dnd/asap/dist/makeRequestCall.js","webpack://quick-chess/./node_modules/@react-dnd/asap/dist/RawTask.js","webpack://quick-chess/./node_modules/@react-dnd/asap/dist/asap.js","webpack://quick-chess/./node_modules/@react-dnd/asap/dist/AsapQueue.js","webpack://quick-chess/./node_modules/@react-dnd/asap/dist/TaskFactory.js","webpack://quick-chess/./node_modules/dnd-core/dist/actions/registry.js","webpack://quick-chess/./node_modules/dnd-core/dist/contracts.js","webpack://quick-chess/./node_modules/dnd-core/dist/interfaces.js","webpack://quick-chess/./node_modules/dnd-core/dist/utils/getNextUniqueId.js","webpack://quick-chess/./node_modules/dnd-core/dist/classes/HandlerRegistryImpl.js","webpack://quick-chess/./node_modules/dnd-core/dist/utils/equality.js","webpack://quick-chess/./node_modules/dnd-core/dist/reducers/dirtyHandlerIds.js","webpack://quick-chess/./node_modules/dnd-core/dist/reducers/dragOffset.js","webpack://quick-chess/./node_modules/dnd-core/dist/reducers/dragOperation.js","webpack://quick-chess/./node_modules/dnd-core/dist/reducers/refCount.js","webpack://quick-chess/./node_modules/dnd-core/dist/reducers/stateId.js","webpack://quick-chess/./node_modules/dnd-core/dist/reducers/index.js","webpack://quick-chess/./node_modules/dnd-core/dist/createDragDropManager.js","webpack://quick-chess/./node_modules/react-dnd/dist/core/DndContext.js","webpack://quick-chess/./node_modules/react-dnd/dist/core/DndProvider.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/utils/js_utils.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/EnterLeaveCounter.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/NativeDragSources/NativeDragSource.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/NativeTypes.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/NativeDragSources/getDataFromDataTransfer.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/NativeDragSources/nativeTypesConfig.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/NativeDragSources/index.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/BrowserDetector.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/MonotonicInterpolant.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/OffsetUtils.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/OptionsReader.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/HTML5BackendImpl.js","webpack://quick-chess/./node_modules/react-dnd-html5-backend/dist/index.js","webpack://quick-chess/./src/hooks/useChessGame.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useIsomorphicLayoutEffect.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useMonitorOutput.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useCollector.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useCollectedProps.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useOptionalFactory.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrag/connectors.js","webpack://quick-chess/./node_modules/@react-dnd/shallowequal/dist/index.js","webpack://quick-chess/./node_modules/react-dnd/dist/internals/isRef.js","webpack://quick-chess/./node_modules/react-dnd/dist/internals/wrapConnectorHooks.js","webpack://quick-chess/./node_modules/react-dnd/dist/internals/SourceConnector.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDragDropManager.js","webpack://quick-chess/./node_modules/react-dnd/dist/internals/DragSourceMonitorImpl.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrag/DragSourceImpl.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrag/useRegisteredDragSource.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrag/useDragSource.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrag/useDragType.js","webpack://quick-chess/./node_modules/react-dnd/dist/internals/registration.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrag/useDrag.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrag/useDragSourceMonitor.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrag/useDragSourceConnector.js","webpack://quick-chess/./src/components/ChessPiece.js","webpack://quick-chess/./src/components/DraggablePiece.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrop/connectors.js","webpack://quick-chess/./node_modules/react-dnd/dist/internals/TargetConnector.js","webpack://quick-chess/./node_modules/react-dnd/dist/internals/DropTargetMonitorImpl.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrop/DropTargetImpl.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrop/useRegisteredDropTarget.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrop/useDropTarget.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrop/useAccept.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrop/useDrop.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrop/useDropTargetMonitor.js","webpack://quick-chess/./node_modules/react-dnd/dist/hooks/useDrop/useDropTargetConnector.js","webpack://quick-chess/./src/components/DroppableSquare.js","webpack://quick-chess/./src/components/chess-board.js","webpack://quick-chess/./src/context/ChessContext.js","webpack://quick-chess/./src/pages/index.js"],"sourcesContent":["'use strict';\n\nconst UPPERCASE = /[\\p{Lu}]/u;\nconst LOWERCASE = /[\\p{Ll}]/u;\nconst LEADING_CAPITAL = /^[\\p{Lu}](?![\\p{Lu}])/gu;\nconst IDENTIFIER = /([\\p{Alpha}\\p{N}_]|$)/u;\nconst SEPARATORS = /[_.\\- ]+/;\n\nconst LEADING_SEPARATORS = new RegExp('^' + SEPARATORS.source);\nconst SEPARATORS_AND_IDENTIFIER = new RegExp(SEPARATORS.source + IDENTIFIER.source, 'gu');\nconst NUMBERS_AND_IDENTIFIER = new RegExp('\\\\d+' + IDENTIFIER.source, 'gu');\n\nconst preserveCamelCase = (string, toLowerCase, toUpperCase) => {\n\tlet isLastCharLower = false;\n\tlet isLastCharUpper = false;\n\tlet isLastLastCharUpper = false;\n\n\tfor (let i = 0; i < string.length; i++) {\n\t\tconst character = string[i];\n\n\t\tif (isLastCharLower && UPPERCASE.test(character)) {\n\t\t\tstring = string.slice(0, i) + '-' + string.slice(i);\n\t\t\tisLastCharLower = false;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = true;\n\t\t\ti++;\n\t\t} else if (isLastCharUpper && isLastLastCharUpper && LOWERCASE.test(character)) {\n\t\t\tstring = string.slice(0, i - 1) + '-' + string.slice(i - 1);\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = false;\n\t\t\tisLastCharLower = true;\n\t\t} else {\n\t\t\tisLastCharLower = toLowerCase(character) === character && toUpperCase(character) !== character;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = toUpperCase(character) === character && toLowerCase(character) !== character;\n\t\t}\n\t}\n\n\treturn string;\n};\n\nconst preserveConsecutiveUppercase = (input, toLowerCase) => {\n\tLEADING_CAPITAL.lastIndex = 0;\n\n\treturn input.replace(LEADING_CAPITAL, m1 => toLowerCase(m1));\n};\n\nconst postProcess = (input, toUpperCase) => {\n\tSEPARATORS_AND_IDENTIFIER.lastIndex = 0;\n\tNUMBERS_AND_IDENTIFIER.lastIndex = 0;\n\n\treturn input.replace(SEPARATORS_AND_IDENTIFIER, (_, identifier) => toUpperCase(identifier))\n\t\t.replace(NUMBERS_AND_IDENTIFIER, m => toUpperCase(m));\n};\n\nconst camelCase = (input, options) => {\n\tif (!(typeof input === 'string' || Array.isArray(input))) {\n\t\tthrow new TypeError('Expected the input to be `string | string[]`');\n\t}\n\n\toptions = {\n\t\tpascalCase: false,\n\t\tpreserveConsecutiveUppercase: false,\n\t\t...options\n\t};\n\n\tif (Array.isArray(input)) {\n\t\tinput = input.map(x => x.trim())\n\t\t\t.filter(x => x.length)\n\t\t\t.join('-');\n\t} else {\n\t\tinput = input.trim();\n\t}\n\n\tif (input.length === 0) {\n\t\treturn '';\n\t}\n\n\tconst toLowerCase = options.locale === false ?\n\t\tstring => string.toLowerCase() :\n\t\tstring => string.toLocaleLowerCase(options.locale);\n\tconst toUpperCase = options.locale === false ?\n\t\tstring => string.toUpperCase() :\n\t\tstring => string.toLocaleUpperCase(options.locale);\n\n\tif (input.length === 1) {\n\t\treturn options.pascalCase ? toUpperCase(input) : toLowerCase(input);\n\t}\n\n\tconst hasUpperCase = input !== toLowerCase(input);\n\n\tif (hasUpperCase) {\n\t\tinput = preserveCamelCase(input, toLowerCase, toUpperCase);\n\t}\n\n\tinput = input.replace(LEADING_SEPARATORS, '');\n\n\tif (options.preserveConsecutiveUppercase) {\n\t\tinput = preserveConsecutiveUppercase(input, toLowerCase);\n\t} else {\n\t\tinput = toLowerCase(input);\n\t}\n\n\tif (options.pascalCase) {\n\t\tinput = toUpperCase(input.charAt(0)) + input.slice(1);\n\t}\n\n\treturn postProcess(input, toUpperCase);\n};\n\nmodule.exports = camelCase;\n// TODO: Remove this for the next major release\nmodule.exports.default = camelCase;\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import camelCase from \"camelcase\"\nimport type { IGatsbyImageData } from \"./index\"\n\nconst DEFAULT_PIXEL_DENSITIES = [0.25, 0.5, 1, 2]\nexport const DEFAULT_BREAKPOINTS = [750, 1080, 1366, 1920]\nexport const EVERY_BREAKPOINT = [\n  320, 654, 768, 1024, 1366, 1600, 1920, 2048, 2560, 3440, 3840, 4096,\n]\nconst DEFAULT_FLUID_WIDTH = 800\nconst DEFAULT_FIXED_WIDTH = 800\nconst DEFAULT_ASPECT_RATIO = 4 / 3\n\nexport type Fit = \"cover\" | \"fill\" | \"inside\" | \"outside\" | \"contain\"\n\nexport type Layout = \"fixed\" | \"fullWidth\" | \"constrained\"\nexport type ImageFormat = \"jpg\" | \"png\" | \"webp\" | \"avif\" | \"auto\" | \"\"\n\n/**\n * The minimal required reporter, as we don't want to import it from gatsby-cli\n */\nexport interface IReporter {\n  warn(message: string): void\n}\n\nexport interface ISharpGatsbyImageArgs {\n  layout?: Layout\n  formats?: Array<ImageFormat>\n  placeholder?: \"tracedSVG\" | \"dominantColor\" | \"blurred\" | \"none\"\n  tracedSVGOptions?: Record<string, unknown>\n  width?: number\n  height?: number\n  aspectRatio?: number\n  sizes?: string\n  quality?: number\n  transformOptions?: {\n    fit?: Fit\n    cropFocus?: number | string\n    duotone?: {\n      highlight: string\n      shadow: string\n      opacity?: number\n    }\n    grayscale?: boolean\n    rotate?: number\n    trim?: number\n  }\n  jpgOptions?: Record<string, unknown>\n  pngOptions?: Record<string, unknown>\n  webpOptions?: Record<string, unknown>\n  avifOptions?: Record<string, unknown>\n  blurredOptions?: { width?: number; toFormat?: ImageFormat }\n  breakpoints?: Array<number>\n  outputPixelDensities?: Array<number>\n  backgroundColor?: string\n}\n\nexport interface IImageSizeArgs {\n  width?: number\n  height?: number\n  layout?: Layout\n  filename: string\n  outputPixelDensities?: Array<number>\n  breakpoints?: Array<number>\n  fit?: Fit\n  reporter?: IReporter\n  sourceMetadata: { width: number; height: number }\n}\n\nexport interface IImageSizes {\n  sizes: Array<number>\n  presentationWidth: number\n  presentationHeight: number\n  aspectRatio: number\n  unscaledWidth: number\n}\n\nexport interface IImage {\n  src: string\n  width: number\n  height: number\n  format: ImageFormat\n}\n\nexport interface IGatsbyImageHelperArgs {\n  pluginName: string\n  generateImageSource: (\n    filename: string,\n    width: number,\n    height: number,\n    format: ImageFormat,\n    fit?: Fit,\n    options?: Record<string, unknown>\n  ) => IImage\n  layout?: Layout\n  formats?: Array<ImageFormat>\n  filename: string\n  placeholderURL?: string\n  width?: number\n  height?: number\n  sizes?: string\n  reporter?: IReporter\n  sourceMetadata?: { width: number; height: number; format: ImageFormat }\n  fit?: Fit\n  options?: Record<string, unknown>\n  breakpoints?: Array<number>\n  backgroundColor?: string\n  aspectRatio?: number\n}\n\nconst warn = (message: string): void => console.warn(message)\n\nconst sortNumeric = (a: number, b: number): number => a - b\n\nexport const getSizes = (width: number, layout: Layout): string | undefined => {\n  switch (layout) {\n    // If screen is wider than the max size, image width is the max size,\n    // otherwise it's the width of the screen\n    case `constrained`:\n      return `(min-width: ${width}px) ${width}px, 100vw`\n\n    // Image is always the same width, whatever the size of the screen\n    case `fixed`:\n      return `${width}px`\n\n    // Image is always the width of the screen\n    case `fullWidth`:\n      return `100vw`\n\n    default:\n      return undefined\n  }\n}\n\nexport const getSrcSet = (images: Array<IImage>): string =>\n  images.map(image => `${image.src} ${image.width}w`).join(`,\\n`)\n\nexport function formatFromFilename(filename: string): ImageFormat | undefined {\n  const dot = filename.lastIndexOf(`.`)\n  if (dot !== -1) {\n    const ext = filename.slice(dot + 1)\n    if (ext === `jpeg`) {\n      return `jpg`\n    }\n    if (ext.length === 3 || ext.length === 4) {\n      return ext as ImageFormat\n    }\n  }\n  return undefined\n}\n\nexport function setDefaultDimensions(\n  args: IGatsbyImageHelperArgs\n): IGatsbyImageHelperArgs {\n  let {\n    layout = `constrained`,\n    width,\n    height,\n    sourceMetadata,\n    breakpoints,\n    aspectRatio,\n    formats = [`auto`, `webp`],\n  } = args\n  formats = formats.map(format => format.toLowerCase() as ImageFormat)\n  layout = camelCase(layout) as Layout\n\n  if (width && height) {\n    return { ...args, formats, layout, aspectRatio: width / height }\n  }\n  if (sourceMetadata.width && sourceMetadata.height && !aspectRatio) {\n    aspectRatio = sourceMetadata.width / sourceMetadata.height\n  }\n\n  if (layout === `fullWidth`) {\n    width = width || sourceMetadata.width || breakpoints[breakpoints.length - 1]\n    height = height || Math.round(width / (aspectRatio || DEFAULT_ASPECT_RATIO))\n  } else {\n    if (!width) {\n      if (height && aspectRatio) {\n        width = height * aspectRatio\n      } else if (sourceMetadata.width) {\n        width = sourceMetadata.width\n      } else if (height) {\n        width = Math.round(height / DEFAULT_ASPECT_RATIO)\n      } else {\n        width = DEFAULT_FIXED_WIDTH\n      }\n    }\n\n    if (aspectRatio && !height) {\n      height = Math.round(width / aspectRatio)\n    } else if (!aspectRatio) {\n      aspectRatio = width / height\n    }\n  }\n  return { ...args, width, height, aspectRatio, layout, formats }\n}\n\n/**\n * Use this for getting an image for the blurred placeholder. This ensures the\n * aspect ratio and crop match the main image\n */\nexport function getLowResolutionImageURL(\n  args: IGatsbyImageHelperArgs,\n  width = 20\n): string {\n  args = setDefaultDimensions(args)\n  const { generateImageSource, filename, aspectRatio } = args\n  return generateImageSource(\n    filename,\n    width,\n    Math.round(width / aspectRatio),\n    args.sourceMetadata.format || `jpg`,\n    args.fit,\n    args.options\n  )?.src\n}\n\nexport function generateImageData(\n  args: IGatsbyImageHelperArgs\n): IGatsbyImageData {\n  args = setDefaultDimensions(args)\n\n  let {\n    pluginName,\n    sourceMetadata,\n    generateImageSource,\n    layout,\n    fit,\n    options,\n    width,\n    height,\n    filename,\n    reporter = { warn },\n    backgroundColor,\n    placeholderURL,\n  } = args\n\n  if (!pluginName) {\n    reporter.warn(\n      `[gatsby-plugin-image] \"generateImageData\" was not passed a plugin name`\n    )\n  }\n\n  if (typeof generateImageSource !== `function`) {\n    throw new Error(`generateImageSource must be a function`)\n  }\n\n  if (!sourceMetadata || (!sourceMetadata.width && !sourceMetadata.height)) {\n    // No metadata means we let the CDN handle max size etc, aspect ratio etc\n    sourceMetadata = {\n      width,\n      height,\n      format: sourceMetadata?.format || formatFromFilename(filename) || `auto`,\n    }\n  } else if (!sourceMetadata.format) {\n    sourceMetadata.format = formatFromFilename(filename)\n  }\n\n  const formats = new Set<ImageFormat>(args.formats)\n\n  if (formats.size === 0 || formats.has(`auto`) || formats.has(``)) {\n    formats.delete(`auto`)\n    formats.delete(``)\n    formats.add(sourceMetadata.format)\n  }\n\n  if (formats.has(`jpg`) && formats.has(`png`)) {\n    reporter.warn(\n      `[${pluginName}] Specifying both 'jpg' and 'png' formats is not supported. Using 'auto' instead`\n    )\n    if (sourceMetadata.format === `jpg`) {\n      formats.delete(`png`)\n    } else {\n      formats.delete(`jpg`)\n    }\n  }\n\n  const imageSizes = calculateImageSizes({ ...args, sourceMetadata })\n\n  const result: IGatsbyImageData[\"images\"] = {\n    sources: [],\n  }\n\n  let sizes = args.sizes\n  if (!sizes) {\n    sizes = getSizes(imageSizes.presentationWidth, layout)\n  }\n\n  formats.forEach(format => {\n    const images = imageSizes.sizes\n      .map(size => {\n        const imageSrc = generateImageSource(\n          filename,\n          size,\n          Math.round(size / imageSizes.aspectRatio),\n          format,\n          fit,\n          options\n        )\n        if (\n          !imageSrc?.width ||\n          !imageSrc.height ||\n          !imageSrc.src ||\n          !imageSrc.format\n        ) {\n          reporter.warn(\n            `[${pluginName}] The resolver for image ${filename} returned an invalid value.`\n          )\n          return undefined\n        }\n        return imageSrc\n      })\n      .filter(Boolean)\n\n    if (format === `jpg` || format === `png` || format === `auto`) {\n      const unscaled =\n        images.find(img => img.width === imageSizes.unscaledWidth) || images[0]\n\n      if (unscaled) {\n        result.fallback = {\n          src: unscaled.src,\n          srcSet: getSrcSet(images),\n          sizes,\n        }\n      }\n    } else {\n      result.sources?.push({\n        srcSet: getSrcSet(images),\n        sizes,\n        type: `image/${format}`,\n      })\n    }\n  })\n\n  const imageProps: Partial<IGatsbyImageData> = {\n    images: result,\n    layout,\n    backgroundColor,\n  }\n\n  if (placeholderURL) {\n    imageProps.placeholder = { fallback: placeholderURL }\n  }\n\n  switch (layout) {\n    case `fixed`:\n      imageProps.width = imageSizes.presentationWidth\n      imageProps.height = imageSizes.presentationHeight\n      break\n\n    case `fullWidth`:\n      imageProps.width = 1\n      imageProps.height = 1 / imageSizes.aspectRatio\n      break\n\n    case `constrained`:\n      imageProps.width = args.width || imageSizes.presentationWidth || 1\n      imageProps.height = (imageProps.width || 1) / imageSizes.aspectRatio\n  }\n\n  return imageProps as IGatsbyImageData\n}\n\nconst dedupeAndSortDensities = (values: Array<number>): Array<number> =>\n  Array.from(new Set([1, ...values])).sort(sortNumeric)\n\nexport function calculateImageSizes(args: IImageSizeArgs): IImageSizes {\n  const {\n    width,\n    height,\n    filename,\n    layout = `constrained`,\n    sourceMetadata: imgDimensions,\n    reporter = { warn },\n    breakpoints = DEFAULT_BREAKPOINTS,\n  } = args\n\n  // check that all dimensions provided are positive\n  const userDimensions = { width, height }\n  const erroneousUserDimensions = Object.entries(userDimensions).filter(\n    ([_, size]) => typeof size === `number` && size < 1\n  )\n  if (erroneousUserDimensions.length) {\n    throw new Error(\n      `Specified dimensions for images must be positive numbers (> 0). Problem dimensions you have are ${erroneousUserDimensions\n        .map(dim => dim.join(`: `))\n        .join(`, `)}`\n    )\n  }\n\n  if (layout === `fixed`) {\n    return fixedImageSizes(args)\n  } else if (layout === `constrained`) {\n    return responsiveImageSizes(args)\n  } else if (layout === `fullWidth`) {\n    return responsiveImageSizes({ breakpoints, ...args })\n  } else {\n    reporter.warn(\n      `No valid layout was provided for the image at ${filename}. Valid image layouts are fixed, fullWidth, and constrained. Found ${layout}`\n    )\n    return {\n      sizes: [imgDimensions.width],\n      presentationWidth: imgDimensions.width,\n      presentationHeight: imgDimensions.height,\n      aspectRatio: imgDimensions.width / imgDimensions.height,\n      unscaledWidth: imgDimensions.width,\n    }\n  }\n}\nexport function fixedImageSizes({\n  filename,\n  sourceMetadata: imgDimensions,\n  width,\n  height,\n  fit = `cover`,\n  outputPixelDensities = DEFAULT_PIXEL_DENSITIES,\n  reporter = { warn },\n}: IImageSizeArgs): IImageSizes {\n  let aspectRatio = imgDimensions.width / imgDimensions.height\n  // Sort, dedupe and ensure there's a 1\n  const densities = dedupeAndSortDensities(outputPixelDensities)\n\n  // If both are provided then we need to check the fit\n  if (width && height) {\n    const calculated = getDimensionsAndAspectRatio(imgDimensions, {\n      width,\n      height,\n      fit,\n    })\n    width = calculated.width\n    height = calculated.height\n    aspectRatio = calculated.aspectRatio\n  }\n\n  if (!width) {\n    if (!height) {\n      width = DEFAULT_FIXED_WIDTH\n    } else {\n      width = Math.round(height * aspectRatio)\n    }\n  } else if (!height) {\n    height = Math.round(width / aspectRatio)\n  }\n\n  const originalWidth = width // will use this for presentationWidth, don't want to lose it\n  const isTopSizeOverriden =\n    imgDimensions.width < width || imgDimensions.height < (height as number)\n\n  // If the image is smaller than requested, warn the user that it's being processed as such\n  // print out this message with the necessary information before we overwrite it for sizing\n  if (isTopSizeOverriden) {\n    const fixedDimension = imgDimensions.width < width ? `width` : `height`\n    reporter.warn(`\nThe requested ${fixedDimension} \"${\n      fixedDimension === `width` ? width : height\n    }px\" for the image ${filename} was larger than the actual image ${fixedDimension} of ${\n      imgDimensions[fixedDimension]\n    }px. If possible, replace the current image with a larger one.`)\n\n    if (fixedDimension === `width`) {\n      width = imgDimensions.width\n      height = Math.round(width / aspectRatio)\n    } else {\n      height = imgDimensions.height\n      width = height * aspectRatio\n    }\n  }\n\n  const sizes = densities\n    .filter(size => size >= 1) // remove smaller densities because fixed images don't need them\n    .map(density => Math.round(density * (width as number)))\n    .filter(size => size <= imgDimensions.width)\n\n  return {\n    sizes,\n    aspectRatio,\n    presentationWidth: originalWidth,\n    presentationHeight: Math.round(originalWidth / aspectRatio),\n    unscaledWidth: width,\n  }\n}\n\nexport function responsiveImageSizes({\n  sourceMetadata: imgDimensions,\n  width,\n  height,\n  fit = `cover`,\n  outputPixelDensities = DEFAULT_PIXEL_DENSITIES,\n  breakpoints,\n  layout,\n}: IImageSizeArgs): IImageSizes {\n  let sizes\n  let aspectRatio = imgDimensions.width / imgDimensions.height\n  // Sort, dedupe and ensure there's a 1\n  const densities = dedupeAndSortDensities(outputPixelDensities)\n\n  // If both are provided then we need to check the fit\n  if (width && height) {\n    const calculated = getDimensionsAndAspectRatio(imgDimensions, {\n      width,\n      height,\n      fit,\n    })\n    width = calculated.width\n    height = calculated.height\n    aspectRatio = calculated.aspectRatio\n  }\n\n  // Case 1: width of height were passed in, make sure it isn't larger than the actual image\n  width = width && Math.min(width, imgDimensions.width)\n  height = height && Math.min(height, imgDimensions.height)\n\n  // Case 2: neither width or height were passed in, use default size\n  if (!width && !height) {\n    width = Math.min(DEFAULT_FLUID_WIDTH, imgDimensions.width)\n    height = width / aspectRatio\n  }\n\n  // if it still hasn't been found, calculate width from the derived height.\n  // TS isn't smart enough to realise the type for height has been narrowed here\n  if (!width) {\n    width = (height as number) * aspectRatio\n  }\n\n  const originalWidth = width\n  const isTopSizeOverriden =\n    imgDimensions.width < width || imgDimensions.height < (height as number)\n  if (isTopSizeOverriden) {\n    width = imgDimensions.width\n    height = imgDimensions.height\n  }\n\n  width = Math.round(width)\n\n  if (breakpoints?.length > 0) {\n    sizes = breakpoints.filter(size => size <= imgDimensions.width)\n\n    // If a larger breakpoint has been filtered-out, add the actual image width instead\n    if (\n      sizes.length < breakpoints.length &&\n      !sizes.includes(imgDimensions.width)\n    ) {\n      sizes.push(imgDimensions.width)\n    }\n  } else {\n    sizes = densities.map(density => Math.round(density * (width as number)))\n    sizes = sizes.filter(size => size <= imgDimensions.width)\n  }\n\n  // ensure that the size passed in is included in the final output\n  if (layout === `constrained` && !sizes.includes(width)) {\n    sizes.push(width)\n  }\n  sizes = sizes.sort(sortNumeric)\n  return {\n    sizes,\n    aspectRatio,\n    presentationWidth: originalWidth,\n    presentationHeight: Math.round(originalWidth / aspectRatio),\n    unscaledWidth: width,\n  }\n}\n\nexport function getDimensionsAndAspectRatio(\n  dimensions,\n  options\n): { width: number; height: number; aspectRatio: number } {\n  // Calculate the eventual width/height of the image.\n  const imageAspectRatio = dimensions.width / dimensions.height\n\n  let width = options.width\n  let height = options.height\n\n  switch (options.fit) {\n    case `fill`: {\n      width = options.width ? options.width : dimensions.width\n      height = options.height ? options.height : dimensions.height\n      break\n    }\n    case `inside`: {\n      const widthOption = options.width\n        ? options.width\n        : Number.MAX_SAFE_INTEGER\n      const heightOption = options.height\n        ? options.height\n        : Number.MAX_SAFE_INTEGER\n\n      width = Math.min(widthOption, Math.round(heightOption * imageAspectRatio))\n      height = Math.min(\n        heightOption,\n        Math.round(widthOption / imageAspectRatio)\n      )\n      break\n    }\n    case `outside`: {\n      const widthOption = options.width ? options.width : 0\n      const heightOption = options.height ? options.height : 0\n\n      width = Math.max(widthOption, Math.round(heightOption * imageAspectRatio))\n      height = Math.max(\n        heightOption,\n        Math.round(widthOption / imageAspectRatio)\n      )\n      break\n    }\n\n    default: {\n      if (options.width && !options.height) {\n        width = options.width\n        height = Math.round(options.width / imageAspectRatio)\n      }\n\n      if (options.height && !options.width) {\n        width = Math.round(options.height * imageAspectRatio)\n        height = options.height\n      }\n    }\n  }\n\n  return {\n    width,\n    height,\n    aspectRatio: width / height,\n  }\n}\n","/* global GATSBY___IMAGE */\nimport { generateImageData, EVERY_BREAKPOINT } from \"../image-utils\"\nimport type { CSSProperties, HTMLAttributes, ImgHTMLAttributes } from \"react\"\nimport type { Node } from \"gatsby\"\nimport type { PlaceholderProps } from \"./placeholder\"\nimport type { MainImageProps } from \"./main-image\"\nimport type { IGatsbyImageData } from \"./gatsby-image.browser\"\nimport type {\n  IGatsbyImageHelperArgs,\n  Layout,\n  IImage,\n  ImageFormat,\n} from \"../image-utils\"\n\n// Native lazy-loading support: https://addyosmani.com/blog/lazy-loading/\nexport const hasNativeLazyLoadSupport = (): boolean =>\n  typeof HTMLImageElement !== `undefined` &&\n  `loading` in HTMLImageElement.prototype\n\nexport function gatsbyImageIsInstalled(): boolean {\n  return typeof GATSBY___IMAGE !== `undefined` && GATSBY___IMAGE\n}\n\nexport type IGatsbyImageDataParent<T = never> = T & {\n  gatsbyImageData: IGatsbyImageData\n}\nexport type IGatsbyImageParent<T = never> = T & {\n  gatsbyImage: IGatsbyImageData\n}\nexport type FileNode = Partial<Node> & {\n  childImageSharp?: IGatsbyImageDataParent<Partial<Node>>\n}\n\nconst isGatsbyImageData = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  node: IGatsbyImageData | any\n): node is IGatsbyImageData =>\n  // 🦆 check for a deep prop to be sure this is a valid gatsbyImageData object\n  Boolean(node?.images?.fallback?.src)\n\nconst isGatsbyImageDataParent = <T>(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  node: IGatsbyImageDataParent<T> | any\n): node is IGatsbyImageDataParent<T> => Boolean(node?.gatsbyImageData)\n\nconst isGatsbyImageParent = <T>(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  node: IGatsbyImageParent<T> | any\n): node is IGatsbyImageParent<T> => Boolean(node?.gatsbyImage)\n\nexport type ImageDataLike =\n  | FileNode\n  | IGatsbyImageDataParent\n  | IGatsbyImageParent\n  | IGatsbyImageData\n\nexport const getImage = (\n  node: ImageDataLike | null\n): IGatsbyImageData | undefined => {\n  // This checks both for gatsbyImageData and gatsbyImage\n  if (isGatsbyImageData(node)) {\n    return node\n  }\n  // gatsbyImageData GraphQL field\n  if (isGatsbyImageDataParent(node)) {\n    return node.gatsbyImageData\n  }\n  // gatsbyImage GraphQL field for Gatsby's Image CDN service\n  if (isGatsbyImageParent(node)) {\n    return node.gatsbyImage\n  }\n  return node?.childImageSharp?.gatsbyImageData\n}\n\nexport const getSrc = (node: ImageDataLike): string | undefined =>\n  getImage(node)?.images?.fallback?.src\n\nexport const getSrcSet = (node: ImageDataLike): string | undefined =>\n  getImage(node)?.images?.fallback?.srcSet\n\nexport function getWrapperProps(\n  width: number,\n  height: number,\n  layout: Layout\n): Pick<HTMLAttributes<HTMLElement>, \"className\" | \"style\"> & {\n  \"data-gatsby-image-wrapper\": string\n} {\n  const wrapperStyle: CSSProperties = {}\n\n  let className = `gatsby-image-wrapper`\n\n  // If the plugin isn't installed we need to apply the styles inline\n  if (!gatsbyImageIsInstalled()) {\n    wrapperStyle.position = `relative`\n    wrapperStyle.overflow = `hidden`\n  }\n\n  if (layout === `fixed`) {\n    wrapperStyle.width = width\n    wrapperStyle.height = height\n  } else if (layout === `constrained`) {\n    if (!gatsbyImageIsInstalled()) {\n      wrapperStyle.display = `inline-block`\n      wrapperStyle.verticalAlign = `top`\n    }\n    className = `gatsby-image-wrapper gatsby-image-wrapper-constrained`\n  }\n\n  return {\n    className,\n    \"data-gatsby-image-wrapper\": ``,\n    style: wrapperStyle,\n  }\n}\n\nexport interface IUrlBuilderArgs<OptionsType> {\n  width: number\n  height: number\n  baseUrl: string\n  format: ImageFormat\n  options: OptionsType\n}\nexport interface IGetImageDataArgs<OptionsType = Record<string, unknown>> {\n  baseUrl: string\n  /**\n   * For constrained and fixed images, the size of the image element\n   */\n  width?: number\n  height?: number\n  /**\n   * If available, pass the source image width and height\n   */\n  sourceWidth?: number\n  sourceHeight?: number\n  /**\n   * If only one dimension is passed, then this will be used to calculate the other.\n   */\n  aspectRatio?: number\n  layout?: Layout\n  /**\n   * Returns a URL based on the passed arguments. Should be a pure function\n   */\n  urlBuilder: (args: IUrlBuilderArgs<OptionsType>) => string\n\n  /**\n   * Should be a data URI\n   */\n  placeholderURL?: string\n  backgroundColor?: string\n  /**\n   * Used in error messages etc\n   */\n  pluginName?: string\n\n  /**\n   * If you do not support auto-format, pass an array of image types here\n   */\n  formats?: Array<ImageFormat>\n\n  breakpoints?: Array<number>\n\n  /**\n   * Passed to the urlBuilder function\n   */\n  options?: OptionsType\n}\n\n/**\n * Use this hook to generate gatsby-plugin-image data in the browser.\n */\nexport function getImageData<OptionsType>({\n  baseUrl,\n  urlBuilder,\n  sourceWidth,\n  sourceHeight,\n  pluginName = `getImageData`,\n  formats = [`auto`],\n  breakpoints,\n  options,\n  ...props\n}: IGetImageDataArgs<OptionsType>): IGatsbyImageData {\n  if (\n    !breakpoints?.length &&\n    (props.layout === `fullWidth` || (props.layout as string) === `FULL_WIDTH`)\n  ) {\n    breakpoints = EVERY_BREAKPOINT\n  }\n  const generateImageSource = (\n    baseUrl: string,\n    width: number,\n    height?: number,\n    format?: ImageFormat\n  ): IImage => {\n    return {\n      width,\n      height,\n      format,\n      src: urlBuilder({ baseUrl, width, height, options, format }),\n    }\n  }\n\n  const sourceMetadata: IGatsbyImageHelperArgs[\"sourceMetadata\"] = {\n    width: sourceWidth,\n    height: sourceHeight,\n    format: `auto`,\n  }\n\n  const args: IGatsbyImageHelperArgs = {\n    ...props,\n    pluginName,\n    generateImageSource,\n    filename: baseUrl,\n    formats,\n    breakpoints,\n    sourceMetadata,\n  }\n  return generateImageData(args)\n}\n\nexport function getMainProps(\n  isLoading: boolean,\n  isLoaded: boolean,\n  images: IGatsbyImageData[\"images\"],\n  loading?: \"eager\" | \"lazy\",\n  style: CSSProperties = {}\n): Partial<MainImageProps> {\n  // fallback when it's not configured in gatsby-config.\n  if (!gatsbyImageIsInstalled()) {\n    style = {\n      height: `100%`,\n      left: 0,\n      position: `absolute`,\n      top: 0,\n      transform: `translateZ(0)`,\n      transition: `opacity 250ms linear`,\n      width: `100%`,\n      willChange: `opacity`,\n      ...style,\n    }\n  }\n\n  const result = {\n    ...images,\n    loading,\n    shouldLoad: isLoading,\n    \"data-main-image\": ``,\n    style: {\n      ...style,\n      opacity: isLoaded ? 1 : 0,\n    },\n  }\n\n  return result\n}\n\nexport type PlaceholderImageAttrs = ImgHTMLAttributes<HTMLImageElement> &\n  Pick<PlaceholderProps, \"sources\" | \"fallback\"> & {\n    \"data-placeholder-image\"?: string\n  }\n\nexport function getPlaceholderProps(\n  placeholder: PlaceholderImageAttrs | undefined,\n  isLoaded: boolean,\n  layout: Layout,\n  width?: number,\n  height?: number,\n  backgroundColor?: string,\n  objectFit?: CSSProperties[\"objectFit\"],\n  objectPosition?: CSSProperties[\"objectPosition\"]\n): PlaceholderImageAttrs {\n  const wrapperStyle: CSSProperties = {}\n\n  if (backgroundColor) {\n    wrapperStyle.backgroundColor = backgroundColor\n\n    if (layout === `fixed`) {\n      wrapperStyle.width = width\n      wrapperStyle.height = height\n      wrapperStyle.backgroundColor = backgroundColor\n      wrapperStyle.position = `relative`\n    } else if (layout === `constrained`) {\n      wrapperStyle.position = `absolute`\n      wrapperStyle.top = 0\n      wrapperStyle.left = 0\n      wrapperStyle.bottom = 0\n      wrapperStyle.right = 0\n    } else if (layout === `fullWidth`) {\n      wrapperStyle.position = `absolute`\n      wrapperStyle.top = 0\n      wrapperStyle.left = 0\n      wrapperStyle.bottom = 0\n      wrapperStyle.right = 0\n    }\n  }\n\n  if (objectFit) {\n    wrapperStyle.objectFit = objectFit\n  }\n\n  if (objectPosition) {\n    wrapperStyle.objectPosition = objectPosition\n  }\n  const result: PlaceholderImageAttrs = {\n    ...placeholder,\n    \"aria-hidden\": true,\n    \"data-placeholder-image\": ``,\n    style: {\n      opacity: isLoaded ? 0 : 1,\n      transition: `opacity 500ms linear`,\n      ...wrapperStyle,\n    },\n  }\n\n  // fallback when it's not configured in gatsby-config.\n  if (!gatsbyImageIsInstalled()) {\n    result.style = {\n      height: `100%`,\n      left: 0,\n      position: `absolute`,\n      top: 0,\n      width: `100%`,\n    }\n  }\n\n  return result\n}\n\nexport interface IArtDirectedImage {\n  media: string\n  image: IGatsbyImageData\n}\n\n/**\n * Generate a Gatsby image data object with multiple, art-directed images that display at different\n * resolutions.\n *\n * @param defaultImage The image displayed when no media query matches.\n * It is also used for all other settings applied to the image, such as width, height and layout.\n * You should pass a className to the component with media queries to adjust the size of the container,\n * as this cannot be adjusted automatically.\n * @param artDirected Array of objects which each contains a `media` string which is a media query\n * such as `(min-width: 320px)`, and the image object to use when that query matches.\n */\nexport function withArtDirection(\n  defaultImage: IGatsbyImageData,\n  artDirected: Array<IArtDirectedImage>\n): IGatsbyImageData {\n  const { images, placeholder, ...props } = defaultImage\n  const output: IGatsbyImageData = {\n    ...props,\n    images: {\n      ...images,\n      sources: [],\n    },\n    placeholder: placeholder && {\n      ...placeholder,\n      sources: [],\n    },\n  }\n\n  artDirected.forEach(({ media, image }) => {\n    if (!media) {\n      if (process.env.NODE_ENV === `development`) {\n        console.warn(\n          \"[gatsby-plugin-image] All art-directed images passed to must have a value set for `media`. Skipping.\"\n        )\n      }\n      return\n    }\n\n    if (\n      image.layout !== defaultImage.layout &&\n      process.env.NODE_ENV === `development`\n    ) {\n      console.warn(\n        `[gatsby-plugin-image] Mismatched image layout: expected \"${defaultImage.layout}\" but received \"${image.layout}\". All art-directed images use the same layout as the default image`\n      )\n    }\n\n    output.images.sources.push(\n      ...image.images.sources.map(source => {\n        return { ...source, media }\n      }),\n      {\n        media,\n        srcSet: image.images.fallback.srcSet,\n      }\n    )\n\n    if (!output.placeholder) {\n      return\n    }\n\n    output.placeholder.sources.push({\n      media,\n      srcSet: image.placeholder.fallback,\n    })\n  })\n  output.images.sources.push(...images.sources)\n  if (placeholder?.sources) {\n    output.placeholder?.sources.push(...placeholder.sources)\n  }\n  return output\n}\n","import React, { Fragment, FunctionComponent, PropsWithChildren } from \"react\"\nimport terserMacro from \"../../macros/terser.macro\"\nimport { Layout } from \"../image-utils\"\n\nexport interface ILayoutWrapperProps {\n  layout: Layout\n  width: number\n  height: number\n}\n\nconst NativeScriptLoading: FunctionComponent = () => (\n  <script\n    type=\"module\"\n    dangerouslySetInnerHTML={{\n      __html: terserMacro`\nconst hasNativeLazyLoadSupport = typeof HTMLImageElement !== \"undefined\" && \"loading\" in HTMLImageElement.prototype;\nif (hasNativeLazyLoadSupport) {\n  const gatsbyImages = document.querySelectorAll('img[data-main-image]');\n  for (let mainImage of gatsbyImages) {\n    if (mainImage.dataset.src) {\n      mainImage.setAttribute('src', mainImage.dataset.src)\n      mainImage.removeAttribute('data-src')\n    }\n    if (mainImage.dataset.srcset) {\n      mainImage.setAttribute('srcset', mainImage.dataset.srcset)\n      mainImage.removeAttribute('data-srcset')\n    }\n\n    const sources = mainImage.parentNode.querySelectorAll('source[data-srcset]');\n    for (let source of sources) {\n      source.setAttribute('srcset', source.dataset.srcset)\n      source.removeAttribute('data-srcset')\n    }\n\n    if (mainImage.complete) {\n      mainImage.style.opacity = 1;\n\n      // also hide the placeholder\n      mainImage.parentNode.parentNode.querySelector('[data-placeholder-image]').style.opacity = 0;\n    }\n  }\n}\n`,\n    }}\n  />\n)\n\nexport function getSizer(\n  layout: Layout,\n  width: number,\n  height: number\n): string {\n  let sizer = ``\n  if (layout === `fullWidth`) {\n    sizer = `<div aria-hidden=\"true\" style=\"padding-top: ${\n      (height / width) * 100\n    }%;\"></div>`\n  }\n\n  if (layout === `constrained`) {\n    sizer = `<div style=\"max-width: ${width}px; display: block;\"><img alt=\"\" role=\"presentation\" aria-hidden=\"true\" src=\"data:image/svg+xml;charset=utf-8,%3Csvg%20height='${height}'%20width='${width}'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%3E%3C/svg%3E\" style=\"max-width: 100%; display: block; position: static;\"></div>`\n  }\n\n  return sizer\n}\n\nconst Sizer: FunctionComponent<ILayoutWrapperProps> = function Sizer({\n  layout,\n  width,\n  height,\n}) {\n  if (layout === `fullWidth`) {\n    return (\n      <div aria-hidden style={{ paddingTop: `${(height / width) * 100}%` }} />\n    )\n  }\n\n  if (layout === `constrained`) {\n    return (\n      <div style={{ maxWidth: width, display: `block` }}>\n        <img\n          alt=\"\"\n          role=\"presentation\"\n          aria-hidden=\"true\"\n          src={`data:image/svg+xml;charset=utf-8,%3Csvg%20height='${height}'%20width='${width}'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%3E%3C/svg%3E`}\n          style={{\n            maxWidth: `100%`,\n            display: `block`,\n            position: `static`,\n          }}\n        />\n      </div>\n    )\n  }\n\n  return null\n}\n\nexport const LayoutWrapper: FunctionComponent<\n  PropsWithChildren<ILayoutWrapperProps>\n> = function LayoutWrapper({ children, ...props }) {\n  return (\n    <Fragment>\n      <Sizer {...props} />\n      {children}\n\n      {SERVER ? <NativeScriptLoading /> : null}\n    </Fragment>\n  )\n}\n","import React, { FunctionComponent, ImgHTMLAttributes } from \"react\"\nimport * as PropTypes from \"prop-types\"\n\nexport interface IResponsiveImageProps {\n  sizes?: string\n  srcSet: string\n}\n\nexport type SourceProps = IResponsiveImageProps &\n  (\n    | {\n        media: string\n        type?: string\n      }\n    | {\n        media?: string\n        type: string\n      }\n  )\n\ntype FallbackProps = { src: string } & Partial<IResponsiveImageProps>\n\ntype ImageProps = ImgHTMLAttributes<HTMLImageElement> & {\n  src: string\n  alt: string\n  shouldLoad: boolean\n}\n\nexport type PictureProps = ImgHTMLAttributes<HTMLImageElement> & {\n  fallback?: FallbackProps\n  sources?: Array<SourceProps>\n  alt: string\n  shouldLoad?: boolean\n}\n\nconst Image: FunctionComponent<ImageProps> = function Image({\n  src,\n  srcSet,\n  loading,\n  alt = ``,\n  shouldLoad,\n  ...props\n}) {\n  return (\n    <img\n      {...props}\n      decoding=\"async\"\n      loading={loading}\n      src={shouldLoad ? src : undefined}\n      data-src={!shouldLoad ? src : undefined}\n      srcSet={shouldLoad ? srcSet : undefined}\n      data-srcset={!shouldLoad ? srcSet : undefined}\n      alt={alt}\n    />\n  )\n}\n\nexport const Picture: React.FC<PictureProps> = function Picture({\n  fallback,\n  sources = [],\n  shouldLoad = true,\n  ...props\n}) {\n  const sizes = props.sizes || fallback?.sizes\n  const fallbackImage = (\n    <Image {...props} {...fallback} sizes={sizes} shouldLoad={shouldLoad} />\n  )\n\n  if (!sources.length) {\n    return fallbackImage\n  }\n\n  return (\n    <picture>\n      {sources.map(({ media, srcSet, type }) => (\n        <source\n          key={`${media}-${type}-${srcSet}`}\n          type={type}\n          media={media}\n          srcSet={shouldLoad ? srcSet : undefined}\n          data-srcset={!shouldLoad ? srcSet : undefined}\n          sizes={sizes}\n        />\n      ))}\n      {fallbackImage}\n    </picture>\n  )\n}\n\nImage.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  sizes: PropTypes.string,\n  srcSet: PropTypes.string,\n  shouldLoad: PropTypes.bool,\n}\n\nPicture.displayName = `Picture`\nPicture.propTypes = {\n  alt: PropTypes.string.isRequired,\n  shouldLoad: PropTypes.bool,\n  fallback: PropTypes.exact({\n    src: PropTypes.string.isRequired,\n    srcSet: PropTypes.string,\n    sizes: PropTypes.string,\n  }),\n  sources: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.exact({\n        media: PropTypes.string.isRequired,\n        type: PropTypes.string,\n        sizes: PropTypes.string,\n        srcSet: PropTypes.string.isRequired,\n      }),\n      PropTypes.exact({\n        media: PropTypes.string,\n        type: PropTypes.string.isRequired,\n        sizes: PropTypes.string,\n        srcSet: PropTypes.string.isRequired,\n      }),\n    ])\n  ),\n}\n","import React, { FunctionComponent, ImgHTMLAttributes } from \"react\"\nimport * as PropTypes from \"prop-types\"\nimport { Picture, SourceProps } from \"./picture\"\n\nexport type PlaceholderProps = ImgHTMLAttributes<HTMLImageElement> & {\n  fallback?: string\n  sources?: Array<SourceProps>\n}\n\nexport const Placeholder: FunctionComponent<PlaceholderProps> =\n  function Placeholder({ fallback, ...props }) {\n    if (fallback) {\n      return (\n        <Picture\n          {...props}\n          fallback={{\n            src: fallback,\n          }}\n          aria-hidden\n          alt=\"\"\n        />\n      )\n    } else {\n      return <div {...props}></div>\n    }\n  }\n\nPlaceholder.displayName = `Placeholder`\nPlaceholder.propTypes = {\n  fallback: PropTypes.string,\n  sources: Picture.propTypes?.sources,\n  alt: function (props, propName, componentName): Error | null {\n    if (!props[propName]) {\n      return null\n    }\n\n    return new Error(\n      `Invalid prop \\`${propName}\\` supplied to \\`${componentName}\\`. Validation failed.`\n    )\n  },\n}\n","import React from \"react\"\nimport { Picture, PictureProps } from \"./picture\"\n\nexport type MainImageProps = PictureProps\n\nexport const MainImage: React.FC<PictureProps> = function MainImage(props) {\n  return (\n    <>\n      <Picture {...props} />\n      <noscript>\n        <Picture {...props} shouldLoad={true} />\n      </noscript>\n    </>\n  )\n}\n\nMainImage.displayName = `MainImage`\nMainImage.propTypes = Picture.propTypes\n","import React from \"react\"\nimport { getWrapperProps, getMainProps, getPlaceholderProps } from \"./hooks\"\nimport { Placeholder } from \"./placeholder\"\nimport { MainImage, MainImageProps } from \"./main-image\"\nimport { LayoutWrapper } from \"./layout-wrapper\"\nimport PropTypes from \"prop-types\"\nimport type { FunctionComponent, WeakValidationMap } from \"react\"\nimport type { GatsbyImageProps, IGatsbyImageData } from \"./gatsby-image.browser\"\n\nconst removeNewLines = (str: string): string => str.replace(/\\n/g, ``)\n\nexport const GatsbyImage: FunctionComponent<GatsbyImageProps> =\n  function GatsbyImage({\n    as = `div`,\n    className,\n    class: preactClass,\n    style,\n    image,\n    loading = `lazy`,\n    imgClassName,\n    imgStyle,\n    backgroundColor,\n    objectFit,\n    objectPosition,\n    ...props\n  }) {\n    if (!image) {\n      console.warn(`[gatsby-plugin-image] Missing image prop`)\n      return null\n    }\n\n    if (preactClass) {\n      className = preactClass\n    }\n\n    imgStyle = {\n      objectFit,\n      objectPosition,\n      backgroundColor,\n      ...imgStyle,\n    }\n\n    const {\n      width,\n      height,\n      layout,\n      images,\n      placeholder,\n      backgroundColor: placeholderBackgroundColor,\n    } = image\n\n    const {\n      style: wStyle,\n      className: wClass,\n      ...wrapperProps\n    } = getWrapperProps(width, height, layout)\n\n    const cleanedImages: IGatsbyImageData[\"images\"] = {\n      fallback: undefined,\n      sources: [],\n    }\n    if (images.fallback) {\n      cleanedImages.fallback = {\n        ...images.fallback,\n        srcSet: images.fallback.srcSet\n          ? removeNewLines(images.fallback.srcSet)\n          : undefined,\n      }\n    }\n\n    if (images.sources) {\n      cleanedImages.sources = images.sources.map(source => {\n        return {\n          ...source,\n          srcSet: removeNewLines(source.srcSet),\n        }\n      })\n    }\n\n    return React.createElement(\n      as,\n      {\n        ...wrapperProps,\n        style: {\n          ...wStyle,\n          ...style,\n          backgroundColor,\n        },\n        className: `${wClass}${className ? ` ${className}` : ``}`,\n      },\n      <LayoutWrapper layout={layout} width={width} height={height}>\n        <Placeholder\n          {...getPlaceholderProps(\n            placeholder,\n            false,\n            layout,\n            width,\n            height,\n            placeholderBackgroundColor,\n            objectFit,\n            objectPosition\n          )}\n        />\n\n        <MainImage\n          data-gatsby-image-ssr=\"\"\n          className={imgClassName}\n          {...(props as Omit<\n            MainImageProps,\n            \"images\" | \"fallback\" | \"onError\" | \"onLoad\"\n          >)}\n          // When eager is set we want to start the isLoading state on true (we want to load the img without react)\n          {...getMainProps(\n            loading === `eager`,\n            false,\n            cleanedImages,\n            loading,\n            imgStyle\n          )}\n        />\n      </LayoutWrapper>\n    )\n  }\n\nexport const altValidator: PropTypes.Validator<string> = (\n  props: GatsbyImageProps,\n  propName,\n  componentName,\n  ...rest\n): Error | undefined => {\n  if (!props.alt && props.alt !== ``) {\n    return new Error(\n      `The \"alt\" prop is required in ${componentName}. If the image is purely presentational then pass an empty string: e.g. alt=\"\". Learn more: https://a11y-style-guide.com/style-guide/section-media.html`\n    )\n  }\n\n  return PropTypes.string(props, propName, componentName, ...rest)\n}\n\nexport const propTypes = {\n  image: PropTypes.object.isRequired,\n  alt: altValidator,\n} as WeakValidationMap<GatsbyImageProps>\n","import {\n  createElement,\n  memo,\n  useMemo,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n} from \"react\"\nimport {\n  getWrapperProps,\n  gatsbyImageIsInstalled,\n  hasNativeLazyLoadSupport,\n} from \"./hooks\"\nimport { getSizer } from \"./layout-wrapper\"\nimport { propTypes } from \"./gatsby-image.server\"\nimport type {\n  FC,\n  ElementType,\n  FunctionComponent,\n  ImgHTMLAttributes,\n  CSSProperties,\n  ReactEventHandler,\n} from \"react\"\nimport type { renderImageToString } from \"./lazy-hydrate\"\nimport type { PlaceholderProps } from \"./placeholder\"\nimport type { MainImageProps } from \"./main-image\"\nimport type { Layout } from \"../image-utils\"\n\nconst imageCache = new Set<string>()\nlet renderImageToStringPromise\nlet renderImage: typeof renderImageToString | undefined\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport interface GatsbyImageProps\n  extends Omit<\n    ImgHTMLAttributes<HTMLImageElement>,\n    \"placeholder\" | \"onLoad\" | \"src\" | \"srcSet\" | \"width\" | \"height\"\n  > {\n  alt: string\n  as?: ElementType\n  className?: string\n  class?: string\n  imgClassName?: string\n  image: IGatsbyImageData\n  imgStyle?: CSSProperties\n  backgroundColor?: string\n  objectFit?: CSSProperties[\"objectFit\"]\n  objectPosition?: CSSProperties[\"objectPosition\"]\n  onLoad?: (props: { wasCached: boolean }) => void\n  onError?: ReactEventHandler<HTMLImageElement>\n  onStartLoad?: (props: { wasCached: boolean }) => void\n}\n\nexport interface IGatsbyImageData {\n  layout: Layout\n  width: number\n  height: number\n  backgroundColor?: string\n  images: Pick<MainImageProps, \"sources\" | \"fallback\">\n  placeholder?: Pick<PlaceholderProps, \"sources\" | \"fallback\">\n}\n\nconst GatsbyImageHydrator: FC<GatsbyImageProps> = function GatsbyImageHydrator({\n  as = `div`,\n  image,\n  style,\n  backgroundColor,\n  className,\n  class: preactClass,\n  onStartLoad,\n  onLoad,\n  onError,\n  ...props\n}) {\n  const { width, height, layout } = image\n  const {\n    style: wStyle,\n    className: wClass,\n    ...wrapperProps\n  } = getWrapperProps(width, height, layout)\n  const root = useRef<HTMLElement>()\n  const cacheKey = useMemo(() => JSON.stringify(image.images), [image.images])\n\n  // Preact uses class instead of className so we need to check for both\n  if (preactClass) {\n    className = preactClass\n  }\n\n  const sizer = getSizer(layout, width, height)\n\n  useEffect(() => {\n    if (!renderImageToStringPromise) {\n      renderImageToStringPromise = import(`./lazy-hydrate`).then(\n        ({ renderImageToString, swapPlaceholderImage }) => {\n          renderImage = renderImageToString\n\n          return {\n            renderImageToString,\n            swapPlaceholderImage,\n          }\n        }\n      )\n    }\n\n    // The plugin image component is a bit special where if it's server-side rendered, we add extra script tags to support lazy-loading without\n    // In this case we stop hydration but fire the correct events.\n    const ssrImage = root.current.querySelector(\n      `[data-gatsby-image-ssr]`\n    ) as HTMLImageElement\n    if (ssrImage && hasNativeLazyLoadSupport()) {\n      if (ssrImage.complete) {\n        // Trigger onStartload and onLoad events\n        onStartLoad?.({\n          wasCached: true,\n        })\n        onLoad?.({\n          wasCached: true,\n        })\n\n        // remove ssr key for state updates but add delay to not fight with native code snippt of gatsby-ssr\n        setTimeout(() => {\n          ssrImage.removeAttribute(`data-gatsby-image-ssr`)\n        }, 0)\n      } else {\n        onStartLoad?.({\n          wasCached: true,\n        })\n\n        ssrImage.addEventListener(`load`, function onLoadListener() {\n          ssrImage.removeEventListener(`load`, onLoadListener)\n\n          onLoad?.({\n            wasCached: true,\n          })\n          // remove ssr key for state updates but add delay to not fight with native code snippt of gatsby-ssr\n          setTimeout(() => {\n            ssrImage.removeAttribute(`data-gatsby-image-ssr`)\n          }, 0)\n        })\n      }\n\n      imageCache.add(cacheKey)\n\n      return\n    }\n\n    if (renderImage && imageCache.has(cacheKey)) {\n      return\n    }\n\n    let animationFrame\n    let cleanupCallback\n    renderImageToStringPromise.then(\n      ({ renderImageToString, swapPlaceholderImage }) => {\n        if (!root.current) {\n          return\n        }\n\n        root.current.innerHTML = renderImageToString({\n          isLoading: true,\n          isLoaded: imageCache.has(cacheKey),\n          image,\n          ...props,\n        })\n\n        if (!imageCache.has(cacheKey)) {\n          animationFrame = requestAnimationFrame(() => {\n            if (root.current) {\n              cleanupCallback = swapPlaceholderImage(\n                root.current,\n                cacheKey,\n                imageCache,\n                style,\n                onStartLoad,\n                onLoad,\n                onError\n              )\n            }\n          })\n        }\n      }\n    )\n\n    // eslint-disable-next-line consistent-return\n    return (): void => {\n      if (animationFrame) {\n        cancelAnimationFrame(animationFrame)\n      }\n      if (cleanupCallback) {\n        cleanupCallback()\n      }\n    }\n  }, [image])\n\n  // useLayoutEffect is ran before React commits to the DOM. This allows us to make sure our HTML is using our cached image version\n  useLayoutEffect(() => {\n    if (imageCache.has(cacheKey) && renderImage) {\n      root.current.innerHTML = renderImage({\n        isLoading: imageCache.has(cacheKey),\n        isLoaded: imageCache.has(cacheKey),\n        image,\n        ...props,\n      })\n\n      // Trigger onStartload and onLoad events\n      onStartLoad?.({\n        wasCached: true,\n      })\n      onLoad?.({\n        wasCached: true,\n      })\n    }\n  }, [image])\n\n  // By keeping all props equal React will keep the component in the DOM\n  return createElement(as, {\n    ...wrapperProps,\n    style: {\n      ...wStyle,\n      ...style,\n      backgroundColor,\n    },\n    className: `${wClass}${className ? ` ${className}` : ``}`,\n    ref: root,\n    dangerouslySetInnerHTML: {\n      __html: sizer,\n    },\n    suppressHydrationWarning: true,\n  })\n}\n\nexport const GatsbyImage: FunctionComponent<GatsbyImageProps> = memo(\n  function GatsbyImage(props) {\n    if (!props.image) {\n      if (process.env.NODE_ENV === `development`) {\n        console.warn(`[gatsby-plugin-image] Missing image prop`)\n      }\n\n      return null\n    }\n\n    if (!gatsbyImageIsInstalled() && process.env.NODE_ENV === `development`) {\n      console.warn(\n        `[gatsby-plugin-image] You're missing out on some cool performance features. Please add \"gatsby-plugin-image\" to your gatsby-config.js`\n      )\n    }\n\n    return createElement(GatsbyImageHydrator, props)\n  }\n)\n\nGatsbyImage.propTypes = propTypes\nGatsbyImage.displayName = `GatsbyImage`\n","import React, { FunctionComponent, ReactElement } from \"react\"\nimport {\n  altValidator,\n  GatsbyImage as GatsbyImageServer,\n} from \"./gatsby-image.server\"\nimport { GatsbyImageProps, IGatsbyImageData } from \"./gatsby-image.browser\"\nimport PropTypes from \"prop-types\"\nimport { ISharpGatsbyImageArgs } from \"../image-utils\"\n\nexport interface IStaticImageProps\n  extends Omit<GatsbyImageProps, \"image\">,\n    Omit<ISharpGatsbyImageArgs, \"backgroundColor\"> {\n  src: string\n  filename?: string\n}\n\n// These values are added by Babel. Do not add them manually\ninterface IPrivateProps {\n  __imageData?: IGatsbyImageData\n  __error?: string\n}\n\nexport function _getStaticImage(\n  GatsbyImage: FunctionComponent<GatsbyImageProps>\n): React.FC<IStaticImageProps & IPrivateProps> {\n  return function StaticImage({\n    src,\n    __imageData: imageData,\n    __error,\n    // We extract these because they're not meant to be passed-down to GatsbyImage\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    width,\n    height,\n    aspectRatio,\n    tracedSVGOptions,\n    placeholder,\n    formats,\n    quality,\n    transformOptions,\n    jpgOptions,\n    pngOptions,\n    webpOptions,\n    avifOptions,\n    blurredOptions,\n    breakpoints,\n    outputPixelDensities,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    ...props\n  }): ReactElement {\n    if (__error) {\n      console.warn(__error)\n    }\n\n    if (imageData) {\n      return <GatsbyImage image={imageData} {...props} />\n    }\n    console.warn(`Image not loaded`, src)\n    if (!__error && process.env.NODE_ENV === `development`) {\n      console.warn(\n        `Please ensure that \"gatsby-plugin-image\" is included in the plugins array in gatsby-config.js, and that your version of gatsby is at least 2.24.78`\n      )\n    }\n    return null\n  }\n}\n\nconst StaticImage: React.FC<IStaticImageProps & IPrivateProps> =\n  _getStaticImage(GatsbyImageServer)\n\nconst checkDimensionProps: PropTypes.Validator<number> = (\n  props: IStaticImageProps & IPrivateProps,\n  propName: keyof IStaticImageProps & IPrivateProps,\n  ...rest\n) => {\n  if (\n    props.layout === `fullWidth` &&\n    (propName === `width` || propName === `height`) &&\n    props[propName]\n  ) {\n    return new Error(\n      `\"${propName}\" ${props[propName]} may not be passed when layout is fullWidth.`\n    )\n  }\n  return PropTypes.number(props, propName, ...rest)\n}\n\nconst validLayouts = new Set([`fixed`, `fullWidth`, `constrained`])\n\nexport const propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: altValidator,\n  width: checkDimensionProps,\n  height: checkDimensionProps,\n  sizes: PropTypes.string,\n  layout: (props: IStaticImageProps & IPrivateProps): Error | undefined => {\n    if (props.layout === undefined) {\n      return undefined\n    }\n    if (validLayouts.has(props.layout)) {\n      return undefined\n    }\n\n    return new Error(\n      `Invalid value ${props.layout}\" provided for prop \"layout\". Defaulting to \"constrained\". Valid values are \"fixed\", \"fullWidth\" or \"constrained\".`\n    )\n  },\n}\n\nStaticImage.displayName = `StaticImage`\nStaticImage.propTypes = propTypes\n\nexport { StaticImage }\n","import {\n  GatsbyImage as GatsbyImageBrowser,\n  IGatsbyImageData,\n} from \"./gatsby-image.browser\"\nimport React from \"react\"\nimport {\n  _getStaticImage,\n  propTypes,\n  IStaticImageProps,\n} from \"./static-image.server\"\n// These values are added by Babel. Do not add them manually\ninterface IPrivateProps {\n  __imageData?: IGatsbyImageData\n  __error?: string\n}\n\nconst StaticImage: React.FC<IStaticImageProps & IPrivateProps> =\n  _getStaticImage(GatsbyImageBrowser)\n\nStaticImage.displayName = `StaticImage`\nStaticImage.propTypes = propTypes\n\nexport { StaticImage }\n","/**\n * @license\n * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\nexport const WHITE = 'w';\nexport const BLACK = 'b';\nexport const PAWN = 'p';\nexport const KNIGHT = 'n';\nexport const BISHOP = 'b';\nexport const ROOK = 'r';\nexport const QUEEN = 'q';\nexport const KING = 'k';\nexport const DEFAULT_POSITION = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\nexport class Move {\n    color;\n    from;\n    to;\n    piece;\n    captured;\n    promotion;\n    /**\n     * @deprecated This field is deprecated and will be removed in version 2.0.0.\n     * Please use move descriptor functions instead: `isCapture`, `isPromotion`,\n     * `isEnPassant`, `isKingsideCastle`, `isQueensideCastle`, `isCastle`, and\n     * `isBigPawn`\n     */\n    flags;\n    san;\n    lan;\n    before;\n    after;\n    constructor(chess, internal) {\n        const { color, piece, from, to, flags, captured, promotion } = internal;\n        const fromAlgebraic = algebraic(from);\n        const toAlgebraic = algebraic(to);\n        this.color = color;\n        this.piece = piece;\n        this.from = fromAlgebraic;\n        this.to = toAlgebraic;\n        /*\n         * HACK: The chess['_method']() calls below invoke private methods in the\n         * Chess class to generate SAN and FEN. It's a bit of a hack, but makes the\n         * code cleaner elsewhere.\n         */\n        this.san = chess['_moveToSan'](internal, chess['_moves']({ legal: true }));\n        this.lan = fromAlgebraic + toAlgebraic;\n        this.before = chess.fen();\n        // Generate the FEN for the 'after' key\n        chess['_makeMove'](internal);\n        this.after = chess.fen();\n        chess['_undoMove']();\n        // Build the text representation of the move flags\n        this.flags = '';\n        for (const flag in BITS) {\n            if (BITS[flag] & flags) {\n                this.flags += FLAGS[flag];\n            }\n        }\n        if (captured) {\n            this.captured = captured;\n        }\n        if (promotion) {\n            this.promotion = promotion;\n            this.lan += promotion;\n        }\n    }\n    isCapture() {\n        return this.flags.indexOf(FLAGS['CAPTURE']) > -1;\n    }\n    isPromotion() {\n        return this.flags.indexOf(FLAGS['PROMOTION']) > -1;\n    }\n    isEnPassant() {\n        return this.flags.indexOf(FLAGS['EP_CAPTURE']) > -1;\n    }\n    isKingsideCastle() {\n        return this.flags.indexOf(FLAGS['KSIDE_CASTLE']) > -1;\n    }\n    isQueensideCastle() {\n        return this.flags.indexOf(FLAGS['QSIDE_CASTLE']) > -1;\n    }\n    isBigPawn() {\n        return this.flags.indexOf(FLAGS['BIG_PAWN']) > -1;\n    }\n}\nconst EMPTY = -1;\nconst FLAGS = {\n    NORMAL: 'n',\n    CAPTURE: 'c',\n    BIG_PAWN: 'b',\n    EP_CAPTURE: 'e',\n    PROMOTION: 'p',\n    KSIDE_CASTLE: 'k',\n    QSIDE_CASTLE: 'q',\n};\n// prettier-ignore\nexport const SQUARES = [\n    'a8', 'b8', 'c8', 'd8', 'e8', 'f8', 'g8', 'h8',\n    'a7', 'b7', 'c7', 'd7', 'e7', 'f7', 'g7', 'h7',\n    'a6', 'b6', 'c6', 'd6', 'e6', 'f6', 'g6', 'h6',\n    'a5', 'b5', 'c5', 'd5', 'e5', 'f5', 'g5', 'h5',\n    'a4', 'b4', 'c4', 'd4', 'e4', 'f4', 'g4', 'h4',\n    'a3', 'b3', 'c3', 'd3', 'e3', 'f3', 'g3', 'h3',\n    'a2', 'b2', 'c2', 'd2', 'e2', 'f2', 'g2', 'h2',\n    'a1', 'b1', 'c1', 'd1', 'e1', 'f1', 'g1', 'h1'\n];\nconst BITS = {\n    NORMAL: 1,\n    CAPTURE: 2,\n    BIG_PAWN: 4,\n    EP_CAPTURE: 8,\n    PROMOTION: 16,\n    KSIDE_CASTLE: 32,\n    QSIDE_CASTLE: 64,\n};\n/*\n * NOTES ABOUT 0x88 MOVE GENERATION ALGORITHM\n * ----------------------------------------------------------------------------\n * From https://github.com/jhlywa/chess.js/issues/230\n *\n * A lot of people are confused when they first see the internal representation\n * of chess.js. It uses the 0x88 Move Generation Algorithm which internally\n * stores the board as an 8x16 array. This is purely for efficiency but has a\n * couple of interesting benefits:\n *\n * 1. 0x88 offers a very inexpensive \"off the board\" check. Bitwise AND (&) any\n *    square with 0x88, if the result is non-zero then the square is off the\n *    board. For example, assuming a knight square A8 (0 in 0x88 notation),\n *    there are 8 possible directions in which the knight can move. These\n *    directions are relative to the 8x16 board and are stored in the\n *    PIECE_OFFSETS map. One possible move is A8 - 18 (up one square, and two\n *    squares to the left - which is off the board). 0 - 18 = -18 & 0x88 = 0x88\n *    (because of two-complement representation of -18). The non-zero result\n *    means the square is off the board and the move is illegal. Take the\n *    opposite move (from A8 to C7), 0 + 18 = 18 & 0x88 = 0. A result of zero\n *    means the square is on the board.\n *\n * 2. The relative distance (or difference) between two squares on a 8x16 board\n *    is unique and can be used to inexpensively determine if a piece on a\n *    square can attack any other arbitrary square. For example, let's see if a\n *    pawn on E7 can attack E2. The difference between E7 (20) - E2 (100) is\n *    -80. We add 119 to make the ATTACKS array index non-negative (because the\n *    worst case difference is A8 - H1 = -119). The ATTACKS array contains a\n *    bitmask of pieces that can attack from that distance and direction.\n *    ATTACKS[-80 + 119=39] gives us 24 or 0b11000 in binary. Look at the\n *    PIECE_MASKS map to determine the mask for a given piece type. In our pawn\n *    example, we would check to see if 24 & 0x1 is non-zero, which it is\n *    not. So, naturally, a pawn on E7 can't attack a piece on E2. However, a\n *    rook can since 24 & 0x8 is non-zero. The only thing left to check is that\n *    there are no blocking pieces between E7 and E2. That's where the RAYS\n *    array comes in. It provides an offset (in this case 16) to add to E7 (20)\n *    to check for blocking pieces. E7 (20) + 16 = E6 (36) + 16 = E5 (52) etc.\n */\n// prettier-ignore\n// eslint-disable-next-line\nconst Ox88 = {\n    a8: 0, b8: 1, c8: 2, d8: 3, e8: 4, f8: 5, g8: 6, h8: 7,\n    a7: 16, b7: 17, c7: 18, d7: 19, e7: 20, f7: 21, g7: 22, h7: 23,\n    a6: 32, b6: 33, c6: 34, d6: 35, e6: 36, f6: 37, g6: 38, h6: 39,\n    a5: 48, b5: 49, c5: 50, d5: 51, e5: 52, f5: 53, g5: 54, h5: 55,\n    a4: 64, b4: 65, c4: 66, d4: 67, e4: 68, f4: 69, g4: 70, h4: 71,\n    a3: 80, b3: 81, c3: 82, d3: 83, e3: 84, f3: 85, g3: 86, h3: 87,\n    a2: 96, b2: 97, c2: 98, d2: 99, e2: 100, f2: 101, g2: 102, h2: 103,\n    a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119\n};\nconst PAWN_OFFSETS = {\n    b: [16, 32, 17, 15],\n    w: [-16, -32, -17, -15],\n};\nconst PIECE_OFFSETS = {\n    n: [-18, -33, -31, -14, 18, 33, 31, 14],\n    b: [-17, -15, 17, 15],\n    r: [-16, 1, 16, -1],\n    q: [-17, -16, -15, 1, 17, 16, 15, -1],\n    k: [-17, -16, -15, 1, 17, 16, 15, -1],\n};\n// prettier-ignore\nconst ATTACKS = [\n    20, 0, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 0, 20, 0,\n    0, 20, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 20, 0, 0,\n    0, 0, 20, 0, 0, 0, 0, 24, 0, 0, 0, 0, 20, 0, 0, 0,\n    0, 0, 0, 20, 0, 0, 0, 24, 0, 0, 0, 20, 0, 0, 0, 0,\n    0, 0, 0, 0, 20, 0, 0, 24, 0, 0, 20, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 20, 2, 24, 2, 20, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 2, 53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    24, 24, 24, 24, 24, 24, 56, 0, 56, 24, 24, 24, 24, 24, 24, 0,\n    0, 0, 0, 0, 0, 2, 53, 56, 53, 2, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 20, 2, 24, 2, 20, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 20, 0, 0, 24, 0, 0, 20, 0, 0, 0, 0, 0,\n    0, 0, 0, 20, 0, 0, 0, 24, 0, 0, 0, 20, 0, 0, 0, 0,\n    0, 0, 20, 0, 0, 0, 0, 24, 0, 0, 0, 0, 20, 0, 0, 0,\n    0, 20, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 20, 0, 0,\n    20, 0, 0, 0, 0, 0, 0, 24, 0, 0, 0, 0, 0, 0, 20\n];\n// prettier-ignore\nconst RAYS = [\n    17, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 15, 0,\n    0, 17, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 15, 0, 0,\n    0, 0, 17, 0, 0, 0, 0, 16, 0, 0, 0, 0, 15, 0, 0, 0,\n    0, 0, 0, 17, 0, 0, 0, 16, 0, 0, 0, 15, 0, 0, 0, 0,\n    0, 0, 0, 0, 17, 0, 0, 16, 0, 0, 15, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 17, 0, 16, 0, 15, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0, 17, 16, 15, 0, 0, 0, 0, 0, 0, 0,\n    1, 1, 1, 1, 1, 1, 1, 0, -1, -1, -1, -1, -1, -1, -1, 0,\n    0, 0, 0, 0, 0, 0, -15, -16, -17, 0, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, -15, 0, -16, 0, -17, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, -15, 0, 0, -16, 0, 0, -17, 0, 0, 0, 0, 0,\n    0, 0, 0, -15, 0, 0, 0, -16, 0, 0, 0, -17, 0, 0, 0, 0,\n    0, 0, -15, 0, 0, 0, 0, -16, 0, 0, 0, 0, -17, 0, 0, 0,\n    0, -15, 0, 0, 0, 0, 0, -16, 0, 0, 0, 0, 0, -17, 0, 0,\n    -15, 0, 0, 0, 0, 0, 0, -16, 0, 0, 0, 0, 0, 0, -17\n];\nconst PIECE_MASKS = { p: 0x1, n: 0x2, b: 0x4, r: 0x8, q: 0x10, k: 0x20 };\nconst SYMBOLS = 'pnbrqkPNBRQK';\nconst PROMOTIONS = [KNIGHT, BISHOP, ROOK, QUEEN];\nconst RANK_1 = 7;\nconst RANK_2 = 6;\n/*\n * const RANK_3 = 5\n * const RANK_4 = 4\n * const RANK_5 = 3\n * const RANK_6 = 2\n */\nconst RANK_7 = 1;\nconst RANK_8 = 0;\nconst SIDES = {\n    [KING]: BITS.KSIDE_CASTLE,\n    [QUEEN]: BITS.QSIDE_CASTLE,\n};\nconst ROOKS = {\n    w: [\n        { square: Ox88.a1, flag: BITS.QSIDE_CASTLE },\n        { square: Ox88.h1, flag: BITS.KSIDE_CASTLE },\n    ],\n    b: [\n        { square: Ox88.a8, flag: BITS.QSIDE_CASTLE },\n        { square: Ox88.h8, flag: BITS.KSIDE_CASTLE },\n    ],\n};\nconst SECOND_RANK = { b: RANK_7, w: RANK_2 };\nconst TERMINATION_MARKERS = ['1-0', '0-1', '1/2-1/2', '*'];\n// Extracts the zero-based rank of an 0x88 square.\nfunction rank(square) {\n    return square >> 4;\n}\n// Extracts the zero-based file of an 0x88 square.\nfunction file(square) {\n    return square & 0xf;\n}\nfunction isDigit(c) {\n    return '0123456789'.indexOf(c) !== -1;\n}\n// Converts a 0x88 square to algebraic notation.\nfunction algebraic(square) {\n    const f = file(square);\n    const r = rank(square);\n    return ('abcdefgh'.substring(f, f + 1) +\n        '87654321'.substring(r, r + 1));\n}\nfunction swapColor(color) {\n    return color === WHITE ? BLACK : WHITE;\n}\nexport function validateFen(fen) {\n    // 1st criterion: 6 space-seperated fields?\n    const tokens = fen.split(/\\s+/);\n    if (tokens.length !== 6) {\n        return {\n            ok: false,\n            error: 'Invalid FEN: must contain six space-delimited fields',\n        };\n    }\n    // 2nd criterion: move number field is a integer value > 0?\n    const moveNumber = parseInt(tokens[5], 10);\n    if (isNaN(moveNumber) || moveNumber <= 0) {\n        return {\n            ok: false,\n            error: 'Invalid FEN: move number must be a positive integer',\n        };\n    }\n    // 3rd criterion: half move counter is an integer >= 0?\n    const halfMoves = parseInt(tokens[4], 10);\n    if (isNaN(halfMoves) || halfMoves < 0) {\n        return {\n            ok: false,\n            error: 'Invalid FEN: half move counter number must be a non-negative integer',\n        };\n    }\n    // 4th criterion: 4th field is a valid e.p.-string?\n    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {\n        return { ok: false, error: 'Invalid FEN: en-passant square is invalid' };\n    }\n    // 5th criterion: 3th field is a valid castle-string?\n    if (/[^kKqQ-]/.test(tokens[2])) {\n        return { ok: false, error: 'Invalid FEN: castling availability is invalid' };\n    }\n    // 6th criterion: 2nd field is \"w\" (white) or \"b\" (black)?\n    if (!/^(w|b)$/.test(tokens[1])) {\n        return { ok: false, error: 'Invalid FEN: side-to-move is invalid' };\n    }\n    // 7th criterion: 1st field contains 8 rows?\n    const rows = tokens[0].split('/');\n    if (rows.length !== 8) {\n        return {\n            ok: false,\n            error: \"Invalid FEN: piece data does not contain 8 '/'-delimited rows\",\n        };\n    }\n    // 8th criterion: every row is valid?\n    for (let i = 0; i < rows.length; i++) {\n        // check for right sum of fields AND not two numbers in succession\n        let sumFields = 0;\n        let previousWasNumber = false;\n        for (let k = 0; k < rows[i].length; k++) {\n            if (isDigit(rows[i][k])) {\n                if (previousWasNumber) {\n                    return {\n                        ok: false,\n                        error: 'Invalid FEN: piece data is invalid (consecutive number)',\n                    };\n                }\n                sumFields += parseInt(rows[i][k], 10);\n                previousWasNumber = true;\n            }\n            else {\n                if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {\n                    return {\n                        ok: false,\n                        error: 'Invalid FEN: piece data is invalid (invalid piece)',\n                    };\n                }\n                sumFields += 1;\n                previousWasNumber = false;\n            }\n        }\n        if (sumFields !== 8) {\n            return {\n                ok: false,\n                error: 'Invalid FEN: piece data is invalid (too many squares in rank)',\n            };\n        }\n    }\n    // 9th criterion: is en-passant square legal?\n    if ((tokens[3][1] == '3' && tokens[1] == 'w') ||\n        (tokens[3][1] == '6' && tokens[1] == 'b')) {\n        return { ok: false, error: 'Invalid FEN: illegal en-passant square' };\n    }\n    // 10th criterion: does chess position contain exact two kings?\n    const kings = [\n        { color: 'white', regex: /K/g },\n        { color: 'black', regex: /k/g },\n    ];\n    for (const { color, regex } of kings) {\n        if (!regex.test(tokens[0])) {\n            return { ok: false, error: `Invalid FEN: missing ${color} king` };\n        }\n        if ((tokens[0].match(regex) || []).length > 1) {\n            return { ok: false, error: `Invalid FEN: too many ${color} kings` };\n        }\n    }\n    // 11th criterion: are any pawns on the first or eighth rows?\n    if (Array.from(rows[0] + rows[7]).some((char) => char.toUpperCase() === 'P')) {\n        return {\n            ok: false,\n            error: 'Invalid FEN: some pawns are on the edge rows',\n        };\n    }\n    return { ok: true };\n}\n// this function is used to uniquely identify ambiguous moves\nfunction getDisambiguator(move, moves) {\n    const from = move.from;\n    const to = move.to;\n    const piece = move.piece;\n    let ambiguities = 0;\n    let sameRank = 0;\n    let sameFile = 0;\n    for (let i = 0, len = moves.length; i < len; i++) {\n        const ambigFrom = moves[i].from;\n        const ambigTo = moves[i].to;\n        const ambigPiece = moves[i].piece;\n        /*\n         * if a move of the same piece type ends on the same to square, we'll need\n         * to add a disambiguator to the algebraic notation\n         */\n        if (piece === ambigPiece && from !== ambigFrom && to === ambigTo) {\n            ambiguities++;\n            if (rank(from) === rank(ambigFrom)) {\n                sameRank++;\n            }\n            if (file(from) === file(ambigFrom)) {\n                sameFile++;\n            }\n        }\n    }\n    if (ambiguities > 0) {\n        if (sameRank > 0 && sameFile > 0) {\n            /*\n             * if there exists a similar moving piece on the same rank and file as\n             * the move in question, use the square as the disambiguator\n             */\n            return algebraic(from);\n        }\n        else if (sameFile > 0) {\n            /*\n             * if the moving piece rests on the same file, use the rank symbol as the\n             * disambiguator\n             */\n            return algebraic(from).charAt(1);\n        }\n        else {\n            // else use the file symbol\n            return algebraic(from).charAt(0);\n        }\n    }\n    return '';\n}\nfunction addMove(moves, color, from, to, piece, captured = undefined, flags = BITS.NORMAL) {\n    const r = rank(to);\n    if (piece === PAWN && (r === RANK_1 || r === RANK_8)) {\n        for (let i = 0; i < PROMOTIONS.length; i++) {\n            const promotion = PROMOTIONS[i];\n            moves.push({\n                color,\n                from,\n                to,\n                piece,\n                captured,\n                promotion,\n                flags: flags | BITS.PROMOTION,\n            });\n        }\n    }\n    else {\n        moves.push({\n            color,\n            from,\n            to,\n            piece,\n            captured,\n            flags,\n        });\n    }\n}\nfunction inferPieceType(san) {\n    let pieceType = san.charAt(0);\n    if (pieceType >= 'a' && pieceType <= 'h') {\n        const matches = san.match(/[a-h]\\d.*[a-h]\\d/);\n        if (matches) {\n            return undefined;\n        }\n        return PAWN;\n    }\n    pieceType = pieceType.toLowerCase();\n    if (pieceType === 'o') {\n        return KING;\n    }\n    return pieceType;\n}\n// parses all of the decorators out of a SAN string\nfunction strippedSan(move) {\n    return move.replace(/=/, '').replace(/[+#]?[?!]*$/, '');\n}\nfunction trimFen(fen) {\n    /*\n     * remove last two fields in FEN string as they're not needed when checking\n     * for repetition\n     */\n    return fen.split(' ').slice(0, 4).join(' ');\n}\nexport class Chess {\n    _board = new Array(128);\n    _turn = WHITE;\n    _header = {};\n    _kings = { w: EMPTY, b: EMPTY };\n    _epSquare = -1;\n    _halfMoves = 0;\n    _moveNumber = 0;\n    _history = [];\n    _comments = {};\n    _castling = { w: 0, b: 0 };\n    // tracks number of times a position has been seen for repetition checking\n    _positionCount = {};\n    constructor(fen = DEFAULT_POSITION, { skipValidation = false } = {}) {\n        this.load(fen, { skipValidation });\n    }\n    clear({ preserveHeaders = false } = {}) {\n        this._board = new Array(128);\n        this._kings = { w: EMPTY, b: EMPTY };\n        this._turn = WHITE;\n        this._castling = { w: 0, b: 0 };\n        this._epSquare = EMPTY;\n        this._halfMoves = 0;\n        this._moveNumber = 1;\n        this._history = [];\n        this._comments = {};\n        this._header = preserveHeaders ? this._header : {};\n        this._positionCount = {};\n        /*\n         * Delete the SetUp and FEN headers (if preserved), the board is empty and\n         * these headers don't make sense in this state. They'll get added later\n         * via .load() or .put()\n         */\n        delete this._header['SetUp'];\n        delete this._header['FEN'];\n    }\n    load(fen, { skipValidation = false, preserveHeaders = false } = {}) {\n        let tokens = fen.split(/\\s+/);\n        // append commonly omitted fen tokens\n        if (tokens.length >= 2 && tokens.length < 6) {\n            const adjustments = ['-', '-', '0', '1'];\n            fen = tokens.concat(adjustments.slice(-(6 - tokens.length))).join(' ');\n        }\n        tokens = fen.split(/\\s+/);\n        if (!skipValidation) {\n            const { ok, error } = validateFen(fen);\n            if (!ok) {\n                throw new Error(error);\n            }\n        }\n        const position = tokens[0];\n        let square = 0;\n        this.clear({ preserveHeaders });\n        for (let i = 0; i < position.length; i++) {\n            const piece = position.charAt(i);\n            if (piece === '/') {\n                square += 8;\n            }\n            else if (isDigit(piece)) {\n                square += parseInt(piece, 10);\n            }\n            else {\n                const color = piece < 'a' ? WHITE : BLACK;\n                this._put({ type: piece.toLowerCase(), color }, algebraic(square));\n                square++;\n            }\n        }\n        this._turn = tokens[1];\n        if (tokens[2].indexOf('K') > -1) {\n            this._castling.w |= BITS.KSIDE_CASTLE;\n        }\n        if (tokens[2].indexOf('Q') > -1) {\n            this._castling.w |= BITS.QSIDE_CASTLE;\n        }\n        if (tokens[2].indexOf('k') > -1) {\n            this._castling.b |= BITS.KSIDE_CASTLE;\n        }\n        if (tokens[2].indexOf('q') > -1) {\n            this._castling.b |= BITS.QSIDE_CASTLE;\n        }\n        this._epSquare = tokens[3] === '-' ? EMPTY : Ox88[tokens[3]];\n        this._halfMoves = parseInt(tokens[4], 10);\n        this._moveNumber = parseInt(tokens[5], 10);\n        this._updateSetup(fen);\n        this._incPositionCount(fen);\n    }\n    fen() {\n        let empty = 0;\n        let fen = '';\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            if (this._board[i]) {\n                if (empty > 0) {\n                    fen += empty;\n                    empty = 0;\n                }\n                const { color, type: piece } = this._board[i];\n                fen += color === WHITE ? piece.toUpperCase() : piece.toLowerCase();\n            }\n            else {\n                empty++;\n            }\n            if ((i + 1) & 0x88) {\n                if (empty > 0) {\n                    fen += empty;\n                }\n                if (i !== Ox88.h1) {\n                    fen += '/';\n                }\n                empty = 0;\n                i += 8;\n            }\n        }\n        let castling = '';\n        if (this._castling[WHITE] & BITS.KSIDE_CASTLE) {\n            castling += 'K';\n        }\n        if (this._castling[WHITE] & BITS.QSIDE_CASTLE) {\n            castling += 'Q';\n        }\n        if (this._castling[BLACK] & BITS.KSIDE_CASTLE) {\n            castling += 'k';\n        }\n        if (this._castling[BLACK] & BITS.QSIDE_CASTLE) {\n            castling += 'q';\n        }\n        // do we have an empty castling flag?\n        castling = castling || '-';\n        let epSquare = '-';\n        /*\n         * only print the ep square if en passant is a valid move (pawn is present\n         * and ep capture is not pinned)\n         */\n        if (this._epSquare !== EMPTY) {\n            const bigPawnSquare = this._epSquare + (this._turn === WHITE ? 16 : -16);\n            const squares = [bigPawnSquare + 1, bigPawnSquare - 1];\n            for (const square of squares) {\n                // is the square off the board?\n                if (square & 0x88) {\n                    continue;\n                }\n                const color = this._turn;\n                // is there a pawn that can capture the epSquare?\n                if (this._board[square]?.color === color &&\n                    this._board[square]?.type === PAWN) {\n                    // if the pawn makes an ep capture, does it leave it's king in check?\n                    this._makeMove({\n                        color,\n                        from: square,\n                        to: this._epSquare,\n                        piece: PAWN,\n                        captured: PAWN,\n                        flags: BITS.EP_CAPTURE,\n                    });\n                    const isLegal = !this._isKingAttacked(color);\n                    this._undoMove();\n                    // if ep is legal, break and set the ep square in the FEN output\n                    if (isLegal) {\n                        epSquare = algebraic(this._epSquare);\n                        break;\n                    }\n                }\n            }\n        }\n        return [\n            fen,\n            this._turn,\n            castling,\n            epSquare,\n            this._halfMoves,\n            this._moveNumber,\n        ].join(' ');\n    }\n    /*\n     * Called when the initial board setup is changed with put() or remove().\n     * modifies the SetUp and FEN properties of the header object. If the FEN\n     * is equal to the default position, the SetUp and FEN are deleted the setup\n     * is only updated if history.length is zero, ie moves haven't been made.\n     */\n    _updateSetup(fen) {\n        if (this._history.length > 0)\n            return;\n        if (fen !== DEFAULT_POSITION) {\n            this._header['SetUp'] = '1';\n            this._header['FEN'] = fen;\n        }\n        else {\n            delete this._header['SetUp'];\n            delete this._header['FEN'];\n        }\n    }\n    reset() {\n        this.load(DEFAULT_POSITION);\n    }\n    get(square) {\n        return this._board[Ox88[square]];\n    }\n    put({ type, color }, square) {\n        if (this._put({ type, color }, square)) {\n            this._updateCastlingRights();\n            this._updateEnPassantSquare();\n            this._updateSetup(this.fen());\n            return true;\n        }\n        return false;\n    }\n    _put({ type, color }, square) {\n        // check for piece\n        if (SYMBOLS.indexOf(type.toLowerCase()) === -1) {\n            return false;\n        }\n        // check for valid square\n        if (!(square in Ox88)) {\n            return false;\n        }\n        const sq = Ox88[square];\n        // don't let the user place more than one king\n        if (type == KING &&\n            !(this._kings[color] == EMPTY || this._kings[color] == sq)) {\n            return false;\n        }\n        const currentPieceOnSquare = this._board[sq];\n        // if one of the kings will be replaced by the piece from args, set the `_kings` respective entry to `EMPTY`\n        if (currentPieceOnSquare && currentPieceOnSquare.type === KING) {\n            this._kings[currentPieceOnSquare.color] = EMPTY;\n        }\n        this._board[sq] = { type: type, color: color };\n        if (type === KING) {\n            this._kings[color] = sq;\n        }\n        return true;\n    }\n    remove(square) {\n        const piece = this.get(square);\n        delete this._board[Ox88[square]];\n        if (piece && piece.type === KING) {\n            this._kings[piece.color] = EMPTY;\n        }\n        this._updateCastlingRights();\n        this._updateEnPassantSquare();\n        this._updateSetup(this.fen());\n        return piece;\n    }\n    _updateCastlingRights() {\n        const whiteKingInPlace = this._board[Ox88.e1]?.type === KING &&\n            this._board[Ox88.e1]?.color === WHITE;\n        const blackKingInPlace = this._board[Ox88.e8]?.type === KING &&\n            this._board[Ox88.e8]?.color === BLACK;\n        if (!whiteKingInPlace ||\n            this._board[Ox88.a1]?.type !== ROOK ||\n            this._board[Ox88.a1]?.color !== WHITE) {\n            this._castling.w &= ~BITS.QSIDE_CASTLE;\n        }\n        if (!whiteKingInPlace ||\n            this._board[Ox88.h1]?.type !== ROOK ||\n            this._board[Ox88.h1]?.color !== WHITE) {\n            this._castling.w &= ~BITS.KSIDE_CASTLE;\n        }\n        if (!blackKingInPlace ||\n            this._board[Ox88.a8]?.type !== ROOK ||\n            this._board[Ox88.a8]?.color !== BLACK) {\n            this._castling.b &= ~BITS.QSIDE_CASTLE;\n        }\n        if (!blackKingInPlace ||\n            this._board[Ox88.h8]?.type !== ROOK ||\n            this._board[Ox88.h8]?.color !== BLACK) {\n            this._castling.b &= ~BITS.KSIDE_CASTLE;\n        }\n    }\n    _updateEnPassantSquare() {\n        if (this._epSquare === EMPTY) {\n            return;\n        }\n        const startSquare = this._epSquare + (this._turn === WHITE ? -16 : 16);\n        const currentSquare = this._epSquare + (this._turn === WHITE ? 16 : -16);\n        const attackers = [currentSquare + 1, currentSquare - 1];\n        if (this._board[startSquare] !== null ||\n            this._board[this._epSquare] !== null ||\n            this._board[currentSquare]?.color !== swapColor(this._turn) ||\n            this._board[currentSquare]?.type !== PAWN) {\n            this._epSquare = EMPTY;\n            return;\n        }\n        const canCapture = (square) => !(square & 0x88) &&\n            this._board[square]?.color === this._turn &&\n            this._board[square]?.type === PAWN;\n        if (!attackers.some(canCapture)) {\n            this._epSquare = EMPTY;\n        }\n    }\n    _attacked(color, square, verbose) {\n        const attackers = [];\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            // did we run off the end of the board\n            if (i & 0x88) {\n                i += 7;\n                continue;\n            }\n            // if empty square or wrong color\n            if (this._board[i] === undefined || this._board[i].color !== color) {\n                continue;\n            }\n            const piece = this._board[i];\n            const difference = i - square;\n            // skip - to/from square are the same\n            if (difference === 0) {\n                continue;\n            }\n            const index = difference + 119;\n            if (ATTACKS[index] & PIECE_MASKS[piece.type]) {\n                if (piece.type === PAWN) {\n                    if ((difference > 0 && piece.color === WHITE) ||\n                        (difference <= 0 && piece.color === BLACK)) {\n                        if (!verbose) {\n                            return true;\n                        }\n                        else {\n                            attackers.push(algebraic(i));\n                        }\n                    }\n                    continue;\n                }\n                // if the piece is a knight or a king\n                if (piece.type === 'n' || piece.type === 'k') {\n                    if (!verbose) {\n                        return true;\n                    }\n                    else {\n                        attackers.push(algebraic(i));\n                        continue;\n                    }\n                }\n                const offset = RAYS[index];\n                let j = i + offset;\n                let blocked = false;\n                while (j !== square) {\n                    if (this._board[j] != null) {\n                        blocked = true;\n                        break;\n                    }\n                    j += offset;\n                }\n                if (!blocked) {\n                    if (!verbose) {\n                        return true;\n                    }\n                    else {\n                        attackers.push(algebraic(i));\n                        continue;\n                    }\n                }\n            }\n        }\n        if (verbose) {\n            return attackers;\n        }\n        else {\n            return false;\n        }\n    }\n    attackers(square, attackedBy) {\n        if (!attackedBy) {\n            return this._attacked(this._turn, Ox88[square], true);\n        }\n        else {\n            return this._attacked(attackedBy, Ox88[square], true);\n        }\n    }\n    _isKingAttacked(color) {\n        const square = this._kings[color];\n        return square === -1 ? false : this._attacked(swapColor(color), square);\n    }\n    isAttacked(square, attackedBy) {\n        return this._attacked(attackedBy, Ox88[square]);\n    }\n    isCheck() {\n        return this._isKingAttacked(this._turn);\n    }\n    inCheck() {\n        return this.isCheck();\n    }\n    isCheckmate() {\n        return this.isCheck() && this._moves().length === 0;\n    }\n    isStalemate() {\n        return !this.isCheck() && this._moves().length === 0;\n    }\n    isInsufficientMaterial() {\n        /*\n         * k.b. vs k.b. (of opposite colors) with mate in 1:\n         * 8/8/8/8/1b6/8/B1k5/K7 b - - 0 1\n         *\n         * k.b. vs k.n. with mate in 1:\n         * 8/8/8/8/1n6/8/B7/K1k5 b - - 2 1\n         */\n        const pieces = {\n            b: 0,\n            n: 0,\n            r: 0,\n            q: 0,\n            k: 0,\n            p: 0,\n        };\n        const bishops = [];\n        let numPieces = 0;\n        let squareColor = 0;\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            squareColor = (squareColor + 1) % 2;\n            if (i & 0x88) {\n                i += 7;\n                continue;\n            }\n            const piece = this._board[i];\n            if (piece) {\n                pieces[piece.type] = piece.type in pieces ? pieces[piece.type] + 1 : 1;\n                if (piece.type === BISHOP) {\n                    bishops.push(squareColor);\n                }\n                numPieces++;\n            }\n        }\n        // k vs. k\n        if (numPieces === 2) {\n            return true;\n        }\n        else if (\n        // k vs. kn .... or .... k vs. kb\n        numPieces === 3 &&\n            (pieces[BISHOP] === 1 || pieces[KNIGHT] === 1)) {\n            return true;\n        }\n        else if (numPieces === pieces[BISHOP] + 2) {\n            // kb vs. kb where any number of bishops are all on the same color\n            let sum = 0;\n            const len = bishops.length;\n            for (let i = 0; i < len; i++) {\n                sum += bishops[i];\n            }\n            if (sum === 0 || sum === len) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isThreefoldRepetition() {\n        return this._getPositionCount(this.fen()) >= 3;\n    }\n    isDrawByFiftyMoves() {\n        return this._halfMoves >= 100; // 50 moves per side = 100 half moves\n    }\n    isDraw() {\n        return (this.isDrawByFiftyMoves() ||\n            this.isStalemate() ||\n            this.isInsufficientMaterial() ||\n            this.isThreefoldRepetition());\n    }\n    isGameOver() {\n        return this.isCheckmate() || this.isStalemate() || this.isDraw();\n    }\n    moves({ verbose = false, square = undefined, piece = undefined, } = {}) {\n        const moves = this._moves({ square, piece });\n        if (verbose) {\n            return moves.map((move) => new Move(this, move));\n        }\n        else {\n            return moves.map((move) => this._moveToSan(move, moves));\n        }\n    }\n    _moves({ legal = true, piece = undefined, square = undefined, } = {}) {\n        const forSquare = square ? square.toLowerCase() : undefined;\n        const forPiece = piece?.toLowerCase();\n        const moves = [];\n        const us = this._turn;\n        const them = swapColor(us);\n        let firstSquare = Ox88.a8;\n        let lastSquare = Ox88.h1;\n        let singleSquare = false;\n        // are we generating moves for a single square?\n        if (forSquare) {\n            // illegal square, return empty moves\n            if (!(forSquare in Ox88)) {\n                return [];\n            }\n            else {\n                firstSquare = lastSquare = Ox88[forSquare];\n                singleSquare = true;\n            }\n        }\n        for (let from = firstSquare; from <= lastSquare; from++) {\n            // did we run off the end of the board\n            if (from & 0x88) {\n                from += 7;\n                continue;\n            }\n            // empty square or opponent, skip\n            if (!this._board[from] || this._board[from].color === them) {\n                continue;\n            }\n            const { type } = this._board[from];\n            let to;\n            if (type === PAWN) {\n                if (forPiece && forPiece !== type)\n                    continue;\n                // single square, non-capturing\n                to = from + PAWN_OFFSETS[us][0];\n                if (!this._board[to]) {\n                    addMove(moves, us, from, to, PAWN);\n                    // double square\n                    to = from + PAWN_OFFSETS[us][1];\n                    if (SECOND_RANK[us] === rank(from) && !this._board[to]) {\n                        addMove(moves, us, from, to, PAWN, undefined, BITS.BIG_PAWN);\n                    }\n                }\n                // pawn captures\n                for (let j = 2; j < 4; j++) {\n                    to = from + PAWN_OFFSETS[us][j];\n                    if (to & 0x88)\n                        continue;\n                    if (this._board[to]?.color === them) {\n                        addMove(moves, us, from, to, PAWN, this._board[to].type, BITS.CAPTURE);\n                    }\n                    else if (to === this._epSquare) {\n                        addMove(moves, us, from, to, PAWN, PAWN, BITS.EP_CAPTURE);\n                    }\n                }\n            }\n            else {\n                if (forPiece && forPiece !== type)\n                    continue;\n                for (let j = 0, len = PIECE_OFFSETS[type].length; j < len; j++) {\n                    const offset = PIECE_OFFSETS[type][j];\n                    to = from;\n                    while (true) {\n                        to += offset;\n                        if (to & 0x88)\n                            break;\n                        if (!this._board[to]) {\n                            addMove(moves, us, from, to, type);\n                        }\n                        else {\n                            // own color, stop loop\n                            if (this._board[to].color === us)\n                                break;\n                            addMove(moves, us, from, to, type, this._board[to].type, BITS.CAPTURE);\n                            break;\n                        }\n                        /* break, if knight or king */\n                        if (type === KNIGHT || type === KING)\n                            break;\n                    }\n                }\n            }\n        }\n        /*\n         * check for castling if we're:\n         *   a) generating all moves, or\n         *   b) doing single square move generation on the king's square\n         */\n        if (forPiece === undefined || forPiece === KING) {\n            if (!singleSquare || lastSquare === this._kings[us]) {\n                // king-side castling\n                if (this._castling[us] & BITS.KSIDE_CASTLE) {\n                    const castlingFrom = this._kings[us];\n                    const castlingTo = castlingFrom + 2;\n                    if (!this._board[castlingFrom + 1] &&\n                        !this._board[castlingTo] &&\n                        !this._attacked(them, this._kings[us]) &&\n                        !this._attacked(them, castlingFrom + 1) &&\n                        !this._attacked(them, castlingTo)) {\n                        addMove(moves, us, this._kings[us], castlingTo, KING, undefined, BITS.KSIDE_CASTLE);\n                    }\n                }\n                // queen-side castling\n                if (this._castling[us] & BITS.QSIDE_CASTLE) {\n                    const castlingFrom = this._kings[us];\n                    const castlingTo = castlingFrom - 2;\n                    if (!this._board[castlingFrom - 1] &&\n                        !this._board[castlingFrom - 2] &&\n                        !this._board[castlingFrom - 3] &&\n                        !this._attacked(them, this._kings[us]) &&\n                        !this._attacked(them, castlingFrom - 1) &&\n                        !this._attacked(them, castlingTo)) {\n                        addMove(moves, us, this._kings[us], castlingTo, KING, undefined, BITS.QSIDE_CASTLE);\n                    }\n                }\n            }\n        }\n        /*\n         * return all pseudo-legal moves (this includes moves that allow the king\n         * to be captured)\n         */\n        if (!legal || this._kings[us] === -1) {\n            return moves;\n        }\n        // filter out illegal moves\n        const legalMoves = [];\n        for (let i = 0, len = moves.length; i < len; i++) {\n            this._makeMove(moves[i]);\n            if (!this._isKingAttacked(us)) {\n                legalMoves.push(moves[i]);\n            }\n            this._undoMove();\n        }\n        return legalMoves;\n    }\n    move(move, { strict = false } = {}) {\n        /*\n         * The move function can be called with in the following parameters:\n         *\n         * .move('Nxb7')       <- argument is a case-sensitive SAN string\n         *\n         * .move({ from: 'h7', <- argument is a move object\n         *         to :'h8',\n         *         promotion: 'q' })\n         *\n         *\n         * An optional strict argument may be supplied to tell chess.js to\n         * strictly follow the SAN specification.\n         */\n        let moveObj = null;\n        if (typeof move === 'string') {\n            moveObj = this._moveFromSan(move, strict);\n        }\n        else if (typeof move === 'object') {\n            const moves = this._moves();\n            // convert the pretty move object to an ugly move object\n            for (let i = 0, len = moves.length; i < len; i++) {\n                if (move.from === algebraic(moves[i].from) &&\n                    move.to === algebraic(moves[i].to) &&\n                    (!('promotion' in moves[i]) || move.promotion === moves[i].promotion)) {\n                    moveObj = moves[i];\n                    break;\n                }\n            }\n        }\n        // failed to find move\n        if (!moveObj) {\n            if (typeof move === 'string') {\n                throw new Error(`Invalid move: ${move}`);\n            }\n            else {\n                throw new Error(`Invalid move: ${JSON.stringify(move)}`);\n            }\n        }\n        /*\n         * need to make a copy of move because we can't generate SAN after the move\n         * is made\n         */\n        const prettyMove = new Move(this, moveObj);\n        this._makeMove(moveObj);\n        this._incPositionCount(prettyMove.after);\n        return prettyMove;\n    }\n    _push(move) {\n        this._history.push({\n            move,\n            kings: { b: this._kings.b, w: this._kings.w },\n            turn: this._turn,\n            castling: { b: this._castling.b, w: this._castling.w },\n            epSquare: this._epSquare,\n            halfMoves: this._halfMoves,\n            moveNumber: this._moveNumber,\n        });\n    }\n    _makeMove(move) {\n        const us = this._turn;\n        const them = swapColor(us);\n        this._push(move);\n        this._board[move.to] = this._board[move.from];\n        delete this._board[move.from];\n        // if ep capture, remove the captured pawn\n        if (move.flags & BITS.EP_CAPTURE) {\n            if (this._turn === BLACK) {\n                delete this._board[move.to - 16];\n            }\n            else {\n                delete this._board[move.to + 16];\n            }\n        }\n        // if pawn promotion, replace with new piece\n        if (move.promotion) {\n            this._board[move.to] = { type: move.promotion, color: us };\n        }\n        // if we moved the king\n        if (this._board[move.to].type === KING) {\n            this._kings[us] = move.to;\n            // if we castled, move the rook next to the king\n            if (move.flags & BITS.KSIDE_CASTLE) {\n                const castlingTo = move.to - 1;\n                const castlingFrom = move.to + 1;\n                this._board[castlingTo] = this._board[castlingFrom];\n                delete this._board[castlingFrom];\n            }\n            else if (move.flags & BITS.QSIDE_CASTLE) {\n                const castlingTo = move.to + 1;\n                const castlingFrom = move.to - 2;\n                this._board[castlingTo] = this._board[castlingFrom];\n                delete this._board[castlingFrom];\n            }\n            // turn off castling\n            this._castling[us] = 0;\n        }\n        // turn off castling if we move a rook\n        if (this._castling[us]) {\n            for (let i = 0, len = ROOKS[us].length; i < len; i++) {\n                if (move.from === ROOKS[us][i].square &&\n                    this._castling[us] & ROOKS[us][i].flag) {\n                    this._castling[us] ^= ROOKS[us][i].flag;\n                    break;\n                }\n            }\n        }\n        // turn off castling if we capture a rook\n        if (this._castling[them]) {\n            for (let i = 0, len = ROOKS[them].length; i < len; i++) {\n                if (move.to === ROOKS[them][i].square &&\n                    this._castling[them] & ROOKS[them][i].flag) {\n                    this._castling[them] ^= ROOKS[them][i].flag;\n                    break;\n                }\n            }\n        }\n        // if big pawn move, update the en passant square\n        if (move.flags & BITS.BIG_PAWN) {\n            if (us === BLACK) {\n                this._epSquare = move.to - 16;\n            }\n            else {\n                this._epSquare = move.to + 16;\n            }\n        }\n        else {\n            this._epSquare = EMPTY;\n        }\n        // reset the 50 move counter if a pawn is moved or a piece is captured\n        if (move.piece === PAWN) {\n            this._halfMoves = 0;\n        }\n        else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n            this._halfMoves = 0;\n        }\n        else {\n            this._halfMoves++;\n        }\n        if (us === BLACK) {\n            this._moveNumber++;\n        }\n        this._turn = them;\n    }\n    undo() {\n        const move = this._undoMove();\n        if (move) {\n            const prettyMove = new Move(this, move);\n            this._decPositionCount(prettyMove.after);\n            return prettyMove;\n        }\n        return null;\n    }\n    _undoMove() {\n        const old = this._history.pop();\n        if (old === undefined) {\n            return null;\n        }\n        const move = old.move;\n        this._kings = old.kings;\n        this._turn = old.turn;\n        this._castling = old.castling;\n        this._epSquare = old.epSquare;\n        this._halfMoves = old.halfMoves;\n        this._moveNumber = old.moveNumber;\n        const us = this._turn;\n        const them = swapColor(us);\n        this._board[move.from] = this._board[move.to];\n        this._board[move.from].type = move.piece; // to undo any promotions\n        delete this._board[move.to];\n        if (move.captured) {\n            if (move.flags & BITS.EP_CAPTURE) {\n                // en passant capture\n                let index;\n                if (us === BLACK) {\n                    index = move.to - 16;\n                }\n                else {\n                    index = move.to + 16;\n                }\n                this._board[index] = { type: PAWN, color: them };\n            }\n            else {\n                // regular capture\n                this._board[move.to] = { type: move.captured, color: them };\n            }\n        }\n        if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {\n            let castlingTo, castlingFrom;\n            if (move.flags & BITS.KSIDE_CASTLE) {\n                castlingTo = move.to + 1;\n                castlingFrom = move.to - 1;\n            }\n            else {\n                castlingTo = move.to - 2;\n                castlingFrom = move.to + 1;\n            }\n            this._board[castlingTo] = this._board[castlingFrom];\n            delete this._board[castlingFrom];\n        }\n        return move;\n    }\n    pgn({ newline = '\\n', maxWidth = 0, } = {}) {\n        /*\n         * using the specification from http://www.chessclub.com/help/PGN-spec\n         * example for html usage: .pgn({ max_width: 72, newline_char: \"<br />\" })\n         */\n        const result = [];\n        let headerExists = false;\n        /* add the PGN header information */\n        for (const i in this._header) {\n            /*\n             * TODO: order of enumerated properties in header object is not\n             * guaranteed, see ECMA-262 spec (section 12.6.4)\n             */\n            result.push('[' + i + ' \"' + this._header[i] + '\"]' + newline);\n            headerExists = true;\n        }\n        if (headerExists && this._history.length) {\n            result.push(newline);\n        }\n        const appendComment = (moveString) => {\n            const comment = this._comments[this.fen()];\n            if (typeof comment !== 'undefined') {\n                const delimiter = moveString.length > 0 ? ' ' : '';\n                moveString = `${moveString}${delimiter}{${comment}}`;\n            }\n            return moveString;\n        };\n        // pop all of history onto reversed_history\n        const reversedHistory = [];\n        while (this._history.length > 0) {\n            reversedHistory.push(this._undoMove());\n        }\n        const moves = [];\n        let moveString = '';\n        // special case of a commented starting position with no moves\n        if (reversedHistory.length === 0) {\n            moves.push(appendComment(''));\n        }\n        // build the list of moves.  a move_string looks like: \"3. e3 e6\"\n        while (reversedHistory.length > 0) {\n            moveString = appendComment(moveString);\n            const move = reversedHistory.pop();\n            // make TypeScript stop complaining about move being undefined\n            if (!move) {\n                break;\n            }\n            // if the position started with black to move, start PGN with #. ...\n            if (!this._history.length && move.color === 'b') {\n                const prefix = `${this._moveNumber}. ...`;\n                // is there a comment preceding the first move?\n                moveString = moveString ? `${moveString} ${prefix}` : prefix;\n            }\n            else if (move.color === 'w') {\n                // store the previous generated move_string if we have one\n                if (moveString.length) {\n                    moves.push(moveString);\n                }\n                moveString = this._moveNumber + '.';\n            }\n            moveString =\n                moveString + ' ' + this._moveToSan(move, this._moves({ legal: true }));\n            this._makeMove(move);\n        }\n        // are there any other leftover moves?\n        if (moveString.length) {\n            moves.push(appendComment(moveString));\n        }\n        // is there a result?\n        if (typeof this._header.Result !== 'undefined') {\n            moves.push(this._header.Result);\n        }\n        /*\n         * history should be back to what it was before we started generating PGN,\n         * so join together moves\n         */\n        if (maxWidth === 0) {\n            return result.join('') + moves.join(' ');\n        }\n        // TODO (jah): huh?\n        const strip = function () {\n            if (result.length > 0 && result[result.length - 1] === ' ') {\n                result.pop();\n                return true;\n            }\n            return false;\n        };\n        // NB: this does not preserve comment whitespace.\n        const wrapComment = function (width, move) {\n            for (const token of move.split(' ')) {\n                if (!token) {\n                    continue;\n                }\n                if (width + token.length > maxWidth) {\n                    while (strip()) {\n                        width--;\n                    }\n                    result.push(newline);\n                    width = 0;\n                }\n                result.push(token);\n                width += token.length;\n                result.push(' ');\n                width++;\n            }\n            if (strip()) {\n                width--;\n            }\n            return width;\n        };\n        // wrap the PGN output at max_width\n        let currentWidth = 0;\n        for (let i = 0; i < moves.length; i++) {\n            if (currentWidth + moves[i].length > maxWidth) {\n                if (moves[i].includes('{')) {\n                    currentWidth = wrapComment(currentWidth, moves[i]);\n                    continue;\n                }\n            }\n            // if the current move will push past max_width\n            if (currentWidth + moves[i].length > maxWidth && i !== 0) {\n                // don't end the line with whitespace\n                if (result[result.length - 1] === ' ') {\n                    result.pop();\n                }\n                result.push(newline);\n                currentWidth = 0;\n            }\n            else if (i !== 0) {\n                result.push(' ');\n                currentWidth++;\n            }\n            result.push(moves[i]);\n            currentWidth += moves[i].length;\n        }\n        return result.join('');\n    }\n    /*\n     * @deprecated Use `setHeader` and `getHeaders` instead.\n     */\n    header(...args) {\n        for (let i = 0; i < args.length; i += 2) {\n            if (typeof args[i] === 'string' && typeof args[i + 1] === 'string') {\n                this._header[args[i]] = args[i + 1];\n            }\n        }\n        return this._header;\n    }\n    setHeader(key, value) {\n        this._header[key] = value;\n        return this._header;\n    }\n    removeHeader(key) {\n        if (key in this._header) {\n            delete this._header[key];\n            return true;\n        }\n        return false;\n    }\n    getHeaders() {\n        return this._header;\n    }\n    loadPgn(pgn, { strict = false, newlineChar = '\\r?\\n', } = {}) {\n        function mask(str) {\n            return str.replace(/\\\\/g, '\\\\');\n        }\n        function parsePgnHeader(header) {\n            const headerObj = {};\n            const headers = header.split(new RegExp(mask(newlineChar)));\n            let key = '';\n            let value = '';\n            for (let i = 0; i < headers.length; i++) {\n                const regex = /^\\s*\\[\\s*([A-Za-z]+)\\s*\"(.*)\"\\s*\\]\\s*$/;\n                key = headers[i].replace(regex, '$1');\n                value = headers[i].replace(regex, '$2');\n                if (key.trim().length > 0) {\n                    headerObj[key] = value;\n                }\n            }\n            return headerObj;\n        }\n        // strip whitespace from head/tail of PGN block\n        pgn = pgn.trim();\n        /*\n         * RegExp to split header. Takes advantage of the fact that header and movetext\n         * will always have a blank line between them (ie, two newline_char's). Handles\n         * case where movetext is empty by matching newlineChar until end of string is\n         * matched - effectively trimming from the end extra newlineChar.\n         *\n         * With default newline_char, will equal:\n         * /^(\\[((?:\\r?\\n)|.)*\\])((?:\\s*\\r?\\n){2}|(?:\\s*\\r?\\n)*$)/\n         */\n        const headerRegex = new RegExp('^(\\\\[((?:' +\n            mask(newlineChar) +\n            ')|.)*\\\\])' +\n            '((?:\\\\s*' +\n            mask(newlineChar) +\n            '){2}|(?:\\\\s*' +\n            mask(newlineChar) +\n            ')*$)');\n        // If no header given, begin with moves.\n        const headerRegexResults = headerRegex.exec(pgn);\n        const headerString = headerRegexResults\n            ? headerRegexResults.length >= 2\n                ? headerRegexResults[1]\n                : ''\n            : '';\n        // Put the board in the starting position\n        this.reset();\n        // parse PGN header\n        const headers = parsePgnHeader(headerString);\n        let fen = '';\n        for (const key in headers) {\n            // check to see user is including fen (possibly with wrong tag case)\n            if (key.toLowerCase() === 'fen') {\n                fen = headers[key];\n            }\n            this.header(key, headers[key]);\n        }\n        /*\n         * the permissive parser should attempt to load a fen tag, even if it's the\n         * wrong case and doesn't include a corresponding [SetUp \"1\"] tag\n         */\n        if (!strict) {\n            if (fen) {\n                this.load(fen, { preserveHeaders: true });\n            }\n        }\n        else {\n            /*\n             * strict parser - load the starting position indicated by [Setup '1']\n             * and [FEN position]\n             */\n            if (headers['SetUp'] === '1') {\n                if (!('FEN' in headers)) {\n                    throw new Error('Invalid PGN: FEN tag must be supplied with SetUp tag');\n                }\n                // don't clear the headers when loading\n                this.load(headers['FEN'], { preserveHeaders: true });\n            }\n        }\n        /*\n         * NB: the regexes below that delete move numbers, recursive annotations,\n         * and numeric annotation glyphs may also match text in comments. To\n         * prevent this, we transform comments by hex-encoding them in place and\n         * decoding them again after the other tokens have been deleted.\n         *\n         * While the spec states that PGN files should be ASCII encoded, we use\n         * {en,de}codeURIComponent here to support arbitrary UTF8 as a convenience\n         * for modern users\n         */\n        function toHex(s) {\n            return Array.from(s)\n                .map(function (c) {\n                /*\n                 * encodeURI doesn't transform most ASCII characters, so we handle\n                 * these ourselves\n                 */\n                return c.charCodeAt(0) < 128\n                    ? c.charCodeAt(0).toString(16)\n                    : encodeURIComponent(c).replace(/%/g, '').toLowerCase();\n            })\n                .join('');\n        }\n        function fromHex(s) {\n            return s.length == 0\n                ? ''\n                : decodeURIComponent('%' + (s.match(/.{1,2}/g) || []).join('%'));\n        }\n        const encodeComment = function (s) {\n            s = s.replace(new RegExp(mask(newlineChar), 'g'), ' ');\n            return `{${toHex(s.slice(1, s.length - 1))}}`;\n        };\n        const decodeComment = function (s) {\n            if (s.startsWith('{') && s.endsWith('}')) {\n                return fromHex(s.slice(1, s.length - 1));\n            }\n        };\n        // delete header to get the moves\n        let ms = pgn\n            .replace(headerString, '')\n            .replace(\n        // encode comments so they don't get deleted below\n        new RegExp(`({[^}]*})+?|;([^${mask(newlineChar)}]*)`, 'g'), function (_match, bracket, semicolon) {\n            return bracket !== undefined\n                ? encodeComment(bracket)\n                : ' ' + encodeComment(`{${semicolon.slice(1)}}`);\n        })\n            .replace(new RegExp(mask(newlineChar), 'g'), ' ');\n        // delete recursive annotation variations\n        const ravRegex = /(\\([^()]+\\))+?/g;\n        while (ravRegex.test(ms)) {\n            ms = ms.replace(ravRegex, '');\n        }\n        // delete move numbers\n        ms = ms.replace(/\\d+\\.(\\.\\.)?/g, '');\n        // delete ... indicating black to move\n        ms = ms.replace(/\\.\\.\\./g, '');\n        /* delete numeric annotation glyphs */\n        ms = ms.replace(/\\$\\d+/g, '');\n        // trim and get array of moves\n        let moves = ms.trim().split(new RegExp(/\\s+/));\n        // delete empty entries\n        moves = moves.filter((move) => move !== '');\n        let result = '';\n        for (let halfMove = 0; halfMove < moves.length; halfMove++) {\n            const comment = decodeComment(moves[halfMove]);\n            if (comment !== undefined) {\n                this._comments[this.fen()] = comment;\n                continue;\n            }\n            const move = this._moveFromSan(moves[halfMove], strict);\n            // invalid move\n            if (move == null) {\n                // was the move an end of game marker\n                if (TERMINATION_MARKERS.indexOf(moves[halfMove]) > -1) {\n                    result = moves[halfMove];\n                }\n                else {\n                    throw new Error(`Invalid move in PGN: ${moves[halfMove]}`);\n                }\n            }\n            else {\n                // reset the end of game marker if making a valid move\n                result = '';\n                this._makeMove(move);\n                this._incPositionCount(this.fen());\n            }\n        }\n        /*\n         * Per section 8.2.6 of the PGN spec, the Result tag pair must match match\n         * the termination marker. Only do this when headers are present, but the\n         * result tag is missing\n         */\n        if (result && Object.keys(this._header).length && !this._header['Result']) {\n            this.header('Result', result);\n        }\n    }\n    /*\n     * Convert a move from 0x88 coordinates to Standard Algebraic Notation\n     * (SAN)\n     *\n     * @param {boolean} strict Use the strict SAN parser. It will throw errors\n     * on overly disambiguated moves (see below):\n     *\n     * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4\n     * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned\n     * 4. ... Ne7 is technically the valid SAN\n     */\n    _moveToSan(move, moves) {\n        let output = '';\n        if (move.flags & BITS.KSIDE_CASTLE) {\n            output = 'O-O';\n        }\n        else if (move.flags & BITS.QSIDE_CASTLE) {\n            output = 'O-O-O';\n        }\n        else {\n            if (move.piece !== PAWN) {\n                const disambiguator = getDisambiguator(move, moves);\n                output += move.piece.toUpperCase() + disambiguator;\n            }\n            if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {\n                if (move.piece === PAWN) {\n                    output += algebraic(move.from)[0];\n                }\n                output += 'x';\n            }\n            output += algebraic(move.to);\n            if (move.promotion) {\n                output += '=' + move.promotion.toUpperCase();\n            }\n        }\n        this._makeMove(move);\n        if (this.isCheck()) {\n            if (this.isCheckmate()) {\n                output += '#';\n            }\n            else {\n                output += '+';\n            }\n        }\n        this._undoMove();\n        return output;\n    }\n    // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates\n    _moveFromSan(move, strict = false) {\n        // strip off any move decorations: e.g Nf3+?! becomes Nf3\n        const cleanMove = strippedSan(move);\n        let pieceType = inferPieceType(cleanMove);\n        let moves = this._moves({ legal: true, piece: pieceType });\n        // strict parser\n        for (let i = 0, len = moves.length; i < len; i++) {\n            if (cleanMove === strippedSan(this._moveToSan(moves[i], moves))) {\n                return moves[i];\n            }\n        }\n        // the strict parser failed\n        if (strict) {\n            return null;\n        }\n        let piece = undefined;\n        let matches = undefined;\n        let from = undefined;\n        let to = undefined;\n        let promotion = undefined;\n        /*\n         * The default permissive (non-strict) parser allows the user to parse\n         * non-standard chess notations. This parser is only run after the strict\n         * Standard Algebraic Notation (SAN) parser has failed.\n         *\n         * When running the permissive parser, we'll run a regex to grab the piece, the\n         * to/from square, and an optional promotion piece. This regex will\n         * parse common non-standard notation like: Pe2-e4, Rc1c4, Qf3xf7,\n         * f7f8q, b1c3\n         *\n         * NOTE: Some positions and moves may be ambiguous when using the permissive\n         * parser. For example, in this position: 6k1/8/8/B7/8/8/8/BN4K1 w - - 0 1,\n         * the move b1c3 may be interpreted as Nc3 or B1c3 (a disambiguated bishop\n         * move). In these cases, the permissive parser will default to the most\n         * basic interpretation (which is b1c3 parsing to Nc3).\n         */\n        let overlyDisambiguated = false;\n        matches = cleanMove.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);\n        if (matches) {\n            piece = matches[1];\n            from = matches[2];\n            to = matches[3];\n            promotion = matches[4];\n            if (from.length == 1) {\n                overlyDisambiguated = true;\n            }\n        }\n        else {\n            /*\n             * The [a-h]?[1-8]? portion of the regex below handles moves that may be\n             * overly disambiguated (e.g. Nge7 is unnecessary and non-standard when\n             * there is one legal knight move to e7). In this case, the value of\n             * 'from' variable will be a rank or file, not a square.\n             */\n            matches = cleanMove.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/);\n            if (matches) {\n                piece = matches[1];\n                from = matches[2];\n                to = matches[3];\n                promotion = matches[4];\n                if (from.length == 1) {\n                    overlyDisambiguated = true;\n                }\n            }\n        }\n        pieceType = inferPieceType(cleanMove);\n        moves = this._moves({\n            legal: true,\n            piece: piece ? piece : pieceType,\n        });\n        if (!to) {\n            return null;\n        }\n        for (let i = 0, len = moves.length; i < len; i++) {\n            if (!from) {\n                // if there is no from square, it could be just 'x' missing from a capture\n                if (cleanMove ===\n                    strippedSan(this._moveToSan(moves[i], moves)).replace('x', '')) {\n                    return moves[i];\n                }\n                // hand-compare move properties with the results from our permissive regex\n            }\n            else if ((!piece || piece.toLowerCase() == moves[i].piece) &&\n                Ox88[from] == moves[i].from &&\n                Ox88[to] == moves[i].to &&\n                (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n                return moves[i];\n            }\n            else if (overlyDisambiguated) {\n                /*\n                 * SPECIAL CASE: we parsed a move string that may have an unneeded\n                 * rank/file disambiguator (e.g. Nge7).  The 'from' variable will\n                 */\n                const square = algebraic(moves[i].from);\n                if ((!piece || piece.toLowerCase() == moves[i].piece) &&\n                    Ox88[to] == moves[i].to &&\n                    (from == square[0] || from == square[1]) &&\n                    (!promotion || promotion.toLowerCase() == moves[i].promotion)) {\n                    return moves[i];\n                }\n            }\n        }\n        return null;\n    }\n    ascii() {\n        let s = '   +------------------------+\\n';\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            // display the rank\n            if (file(i) === 0) {\n                s += ' ' + '87654321'[rank(i)] + ' |';\n            }\n            if (this._board[i]) {\n                const piece = this._board[i].type;\n                const color = this._board[i].color;\n                const symbol = color === WHITE ? piece.toUpperCase() : piece.toLowerCase();\n                s += ' ' + symbol + ' ';\n            }\n            else {\n                s += ' . ';\n            }\n            if ((i + 1) & 0x88) {\n                s += '|\\n';\n                i += 8;\n            }\n        }\n        s += '   +------------------------+\\n';\n        s += '     a  b  c  d  e  f  g  h';\n        return s;\n    }\n    perft(depth) {\n        const moves = this._moves({ legal: false });\n        let nodes = 0;\n        const color = this._turn;\n        for (let i = 0, len = moves.length; i < len; i++) {\n            this._makeMove(moves[i]);\n            if (!this._isKingAttacked(color)) {\n                if (depth - 1 > 0) {\n                    nodes += this.perft(depth - 1);\n                }\n                else {\n                    nodes++;\n                }\n            }\n            this._undoMove();\n        }\n        return nodes;\n    }\n    turn() {\n        return this._turn;\n    }\n    board() {\n        const output = [];\n        let row = [];\n        for (let i = Ox88.a8; i <= Ox88.h1; i++) {\n            if (this._board[i] == null) {\n                row.push(null);\n            }\n            else {\n                row.push({\n                    square: algebraic(i),\n                    type: this._board[i].type,\n                    color: this._board[i].color,\n                });\n            }\n            if ((i + 1) & 0x88) {\n                output.push(row);\n                row = [];\n                i += 8;\n            }\n        }\n        return output;\n    }\n    squareColor(square) {\n        if (square in Ox88) {\n            const sq = Ox88[square];\n            return (rank(sq) + file(sq)) % 2 === 0 ? 'light' : 'dark';\n        }\n        return null;\n    }\n    history({ verbose = false } = {}) {\n        const reversedHistory = [];\n        const moveHistory = [];\n        while (this._history.length > 0) {\n            reversedHistory.push(this._undoMove());\n        }\n        while (true) {\n            const move = reversedHistory.pop();\n            if (!move) {\n                break;\n            }\n            if (verbose) {\n                moveHistory.push(new Move(this, move));\n            }\n            else {\n                moveHistory.push(this._moveToSan(move, this._moves()));\n            }\n            this._makeMove(move);\n        }\n        return moveHistory;\n    }\n    /*\n     * Keeps track of position occurrence counts for the purpose of repetition\n     * checking. All three methods (`_inc`, `_dec`, and `_get`) trim the\n     * irrelevent information from the fen, initialising new positions, and\n     * removing old positions from the record if their counts are reduced to 0.\n     */\n    _getPositionCount(fen) {\n        const trimmedFen = trimFen(fen);\n        return this._positionCount[trimmedFen] || 0;\n    }\n    _incPositionCount(fen) {\n        const trimmedFen = trimFen(fen);\n        if (this._positionCount[trimmedFen] === undefined) {\n            this._positionCount[trimmedFen] = 0;\n        }\n        this._positionCount[trimmedFen] += 1;\n    }\n    _decPositionCount(fen) {\n        const trimmedFen = trimFen(fen);\n        if (this._positionCount[trimmedFen] === 1) {\n            delete this._positionCount[trimmedFen];\n        }\n        else {\n            this._positionCount[trimmedFen] -= 1;\n        }\n    }\n    _pruneComments() {\n        const reversedHistory = [];\n        const currentComments = {};\n        const copyComment = (fen) => {\n            if (fen in this._comments) {\n                currentComments[fen] = this._comments[fen];\n            }\n        };\n        while (this._history.length > 0) {\n            reversedHistory.push(this._undoMove());\n        }\n        copyComment(this.fen());\n        while (true) {\n            const move = reversedHistory.pop();\n            if (!move) {\n                break;\n            }\n            this._makeMove(move);\n            copyComment(this.fen());\n        }\n        this._comments = currentComments;\n    }\n    getComment() {\n        return this._comments[this.fen()];\n    }\n    setComment(comment) {\n        this._comments[this.fen()] = comment.replace('{', '[').replace('}', ']');\n    }\n    /**\n     * @deprecated Renamed to `removeComment` for consistency\n     */\n    deleteComment() {\n        return this.removeComment();\n    }\n    removeComment() {\n        const comment = this._comments[this.fen()];\n        delete this._comments[this.fen()];\n        return comment;\n    }\n    getComments() {\n        this._pruneComments();\n        return Object.keys(this._comments).map((fen) => {\n            return { fen: fen, comment: this._comments[fen] };\n        });\n    }\n    /**\n     * @deprecated Renamed to `removeComments` for consistency\n     */\n    deleteComments() {\n        return this.removeComments();\n    }\n    removeComments() {\n        this._pruneComments();\n        return Object.keys(this._comments).map((fen) => {\n            const comment = this._comments[fen];\n            delete this._comments[fen];\n            return { fen: fen, comment: comment };\n        });\n    }\n    setCastlingRights(color, rights) {\n        for (const side of [KING, QUEEN]) {\n            if (rights[side] !== undefined) {\n                if (rights[side]) {\n                    this._castling[color] |= SIDES[side];\n                }\n                else {\n                    this._castling[color] &= ~SIDES[side];\n                }\n            }\n        }\n        this._updateCastlingRights();\n        const result = this.getCastlingRights(color);\n        return ((rights[KING] === undefined || rights[KING] === result[KING]) &&\n            (rights[QUEEN] === undefined || rights[QUEEN] === result[QUEEN]));\n    }\n    getCastlingRights(color) {\n        return {\n            [KING]: (this._castling[color] & SIDES[KING]) !== 0,\n            [QUEEN]: (this._castling[color] & SIDES[QUEEN]) !== 0,\n        };\n    }\n    moveNumber() {\n        return this._moveNumber;\n    }\n}\n//# sourceMappingURL=chess.js.map","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */ export function invariant(condition, format, ...args) {\n    if (isProduction()) {\n        if (format === undefined) {\n            throw new Error('invariant requires an error message argument');\n        }\n    }\n    if (!condition) {\n        let error;\n        if (format === undefined) {\n            error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n        } else {\n            let argIndex = 0;\n            error = new Error(format.replace(/%s/g, function() {\n                return args[argIndex++];\n            }));\n            error.name = 'Invariant Violation';\n        }\n        error.framesToPop = 1 // we don't care about invariant's own frame\n        ;\n        throw error;\n    }\n}\nfunction isProduction() {\n    return typeof process !== 'undefined' && process.env['NODE_ENV'] === 'production';\n}\n\n//# sourceMappingURL=index.js.map","// cheap lodash replacements\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */ export function get(obj, path, defaultValue) {\n    return path.split('.').reduce((a, c)=>a && a[c] ? a[c] : defaultValue || null\n    , obj);\n}\n/**\n * drop-in replacement for _.without\n */ export function without(items, item) {\n    return items.filter((i)=>i !== item\n    );\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */ export function isString(input) {\n    return typeof input === 'string';\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */ export function isObject(input) {\n    return typeof input === 'object';\n}\n/**\n * replacement for _.xor\n * @param itemsA\n * @param itemsB\n */ export function xor(itemsA, itemsB) {\n    const map = new Map();\n    const insertItem = (item)=>{\n        map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n    };\n    itemsA.forEach(insertItem);\n    itemsB.forEach(insertItem);\n    const result = [];\n    map.forEach((count, key)=>{\n        if (count === 1) {\n            result.push(key);\n        }\n    });\n    return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */ export function intersection(itemsA, itemsB) {\n    return itemsA.filter((t)=>itemsB.indexOf(t) > -1\n    );\n}\n\n//# sourceMappingURL=js_utils.js.map","export const INIT_COORDS = 'dnd-core/INIT_COORDS';\nexport const BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nexport const PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nexport const HOVER = 'dnd-core/HOVER';\nexport const DROP = 'dnd-core/DROP';\nexport const END_DRAG = 'dnd-core/END_DRAG';\n\n//# sourceMappingURL=types.js.map","import { INIT_COORDS } from '../types.js';\nexport function setClientOffset(clientOffset, sourceClientOffset) {\n    return {\n        type: INIT_COORDS,\n        payload: {\n            sourceClientOffset: sourceClientOffset || null,\n            clientOffset: clientOffset || null\n        }\n    };\n}\n\n//# sourceMappingURL=setClientOffset.js.map","import { invariant } from '@react-dnd/invariant';\nimport { isObject } from '../../utils/js_utils.js';\nimport { setClientOffset } from './local/setClientOffset.js';\nimport { BEGIN_DRAG, INIT_COORDS } from './types.js';\nconst ResetCoordinatesAction = {\n    type: INIT_COORDS,\n    payload: {\n        clientOffset: null,\n        sourceClientOffset: null\n    }\n};\nexport function createBeginDrag(manager) {\n    return function beginDrag(sourceIds = [], options = {\n        publishSource: true\n    }) {\n        const { publishSource =true , clientOffset , getSourceClientOffset ,  } = options;\n        const monitor = manager.getMonitor();\n        const registry = manager.getRegistry();\n        // Initialize the coordinates using the client offset\n        manager.dispatch(setClientOffset(clientOffset));\n        verifyInvariants(sourceIds, monitor, registry);\n        // Get the draggable source\n        const sourceId = getDraggableSource(sourceIds, monitor);\n        if (sourceId == null) {\n            manager.dispatch(ResetCoordinatesAction);\n            return;\n        }\n        // Get the source client offset\n        let sourceClientOffset = null;\n        if (clientOffset) {\n            if (!getSourceClientOffset) {\n                throw new Error('getSourceClientOffset must be defined');\n            }\n            verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n            sourceClientOffset = getSourceClientOffset(sourceId);\n        }\n        // Initialize the full coordinates\n        manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n        const source = registry.getSource(sourceId);\n        const item = source.beginDrag(monitor, sourceId);\n        // If source.beginDrag returns null, this is an indicator to cancel the drag\n        if (item == null) {\n            return undefined;\n        }\n        verifyItemIsObject(item);\n        registry.pinSource(sourceId);\n        const itemType = registry.getSourceType(sourceId);\n        return {\n            type: BEGIN_DRAG,\n            payload: {\n                itemType,\n                item,\n                sourceId,\n                clientOffset: clientOffset || null,\n                sourceClientOffset: sourceClientOffset || null,\n                isSourcePublic: !!publishSource\n            }\n        };\n    };\n}\nfunction verifyInvariants(sourceIds, monitor, registry) {\n    invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n    sourceIds.forEach(function(sourceId) {\n        invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n    });\n}\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n    invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\nfunction verifyItemIsObject(item) {\n    invariant(isObject(item), 'Item must be an object.');\n}\nfunction getDraggableSource(sourceIds, monitor) {\n    let sourceId = null;\n    for(let i = sourceIds.length - 1; i >= 0; i--){\n        if (monitor.canDragSource(sourceIds[i])) {\n            sourceId = sourceIds[i];\n            break;\n        }\n    }\n    return sourceId;\n}\n\n//# sourceMappingURL=beginDrag.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { invariant } from '@react-dnd/invariant';\nimport { isObject } from '../../utils/js_utils.js';\nimport { DROP } from './types.js';\nexport function createDrop(manager) {\n    return function drop(options = {}) {\n        const monitor = manager.getMonitor();\n        const registry = manager.getRegistry();\n        verifyInvariants(monitor);\n        const targetIds = getDroppableTargets(monitor);\n        // Multiple actions are dispatched here, which is why this doesn't return an action\n        targetIds.forEach((targetId, index)=>{\n            const dropResult = determineDropResult(targetId, index, registry, monitor);\n            const action = {\n                type: DROP,\n                payload: {\n                    dropResult: _objectSpread({}, options, dropResult)\n                }\n            };\n            manager.dispatch(action);\n        });\n    };\n}\nfunction verifyInvariants(monitor) {\n    invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n    invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\nfunction determineDropResult(targetId, index, registry, monitor) {\n    const target = registry.getTarget(targetId);\n    let dropResult = target ? target.drop(monitor, targetId) : undefined;\n    verifyDropResultType(dropResult);\n    if (typeof dropResult === 'undefined') {\n        dropResult = index === 0 ? {} : monitor.getDropResult();\n    }\n    return dropResult;\n}\nfunction verifyDropResultType(dropResult) {\n    invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\nfunction getDroppableTargets(monitor) {\n    const targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n    targetIds.reverse();\n    return targetIds;\n}\n\n//# sourceMappingURL=drop.js.map","import { invariant } from '@react-dnd/invariant';\nimport { END_DRAG } from './types.js';\nexport function createEndDrag(manager) {\n    return function endDrag() {\n        const monitor = manager.getMonitor();\n        const registry = manager.getRegistry();\n        verifyIsDragging(monitor);\n        const sourceId = monitor.getSourceId();\n        if (sourceId != null) {\n            const source = registry.getSource(sourceId, true);\n            source.endDrag(monitor, sourceId);\n            registry.unpinSource();\n        }\n        return {\n            type: END_DRAG\n        };\n    };\n}\nfunction verifyIsDragging(monitor) {\n    invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}\n\n//# sourceMappingURL=endDrag.js.map","export function matchesType(targetType, draggedItemType) {\n    if (draggedItemType === null) {\n        return targetType === null;\n    }\n    return Array.isArray(targetType) ? targetType.some((t)=>t === draggedItemType\n    ) : targetType === draggedItemType;\n}\n\n//# sourceMappingURL=matchesType.js.map","import { invariant } from '@react-dnd/invariant';\nimport { matchesType } from '../../utils/matchesType.js';\nimport { HOVER } from './types.js';\nexport function createHover(manager) {\n    return function hover(targetIdsArg, { clientOffset  } = {}) {\n        verifyTargetIdsIsArray(targetIdsArg);\n        const targetIds = targetIdsArg.slice(0);\n        const monitor = manager.getMonitor();\n        const registry = manager.getRegistry();\n        const draggedItemType = monitor.getItemType();\n        removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n        checkInvariants(targetIds, monitor, registry);\n        hoverAllTargets(targetIds, monitor, registry);\n        return {\n            type: HOVER,\n            payload: {\n                targetIds,\n                clientOffset: clientOffset || null\n            }\n        };\n    };\n}\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n    invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\nfunction checkInvariants(targetIds, monitor, registry) {\n    invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n    invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n    for(let i = 0; i < targetIds.length; i++){\n        const targetId = targetIds[i];\n        invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n        const target = registry.getTarget(targetId);\n        invariant(target, 'Expected targetIds to be registered.');\n    }\n}\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n    // Remove those targetIds that don't match the targetType.  This\n    // fixes shallow isOver which would only be non-shallow because of\n    // non-matching targets.\n    for(let i = targetIds.length - 1; i >= 0; i--){\n        const targetId = targetIds[i];\n        const targetType = registry.getTargetType(targetId);\n        if (!matchesType(targetType, draggedItemType)) {\n            targetIds.splice(i, 1);\n        }\n    }\n}\nfunction hoverAllTargets(targetIds, monitor, registry) {\n    // Finally call hover on all matching targets.\n    targetIds.forEach(function(targetId) {\n        const target = registry.getTarget(targetId);\n        target.hover(monitor, targetId);\n    });\n}\n\n//# sourceMappingURL=hover.js.map","import { PUBLISH_DRAG_SOURCE } from './types.js';\nexport function createPublishDragSource(manager) {\n    return function publishDragSource() {\n        const monitor = manager.getMonitor();\n        if (monitor.isDragging()) {\n            return {\n                type: PUBLISH_DRAG_SOURCE\n            };\n        }\n        return;\n    };\n}\n\n//# sourceMappingURL=publishDragSource.js.map","import { createDragDropActions } from '../actions/dragDrop/index.js';\nexport class DragDropManagerImpl {\n    receiveBackend(backend) {\n        this.backend = backend;\n    }\n    getMonitor() {\n        return this.monitor;\n    }\n    getBackend() {\n        return this.backend;\n    }\n    getRegistry() {\n        return this.monitor.registry;\n    }\n    getActions() {\n        /* eslint-disable-next-line @typescript-eslint/no-this-alias */ const manager = this;\n        const { dispatch  } = this.store;\n        function bindActionCreator(actionCreator) {\n            return (...args)=>{\n                const action = actionCreator.apply(manager, args);\n                if (typeof action !== 'undefined') {\n                    dispatch(action);\n                }\n            };\n        }\n        const actions = createDragDropActions(this);\n        return Object.keys(actions).reduce((boundActions, key)=>{\n            const action = actions[key];\n            boundActions[key] = bindActionCreator(action);\n            return boundActions;\n        }, {});\n    }\n    dispatch(action) {\n        this.store.dispatch(action);\n    }\n    constructor(store, monitor){\n        this.isSetUp = false;\n        this.handleRefCountChange = ()=>{\n            const shouldSetUp = this.store.getState().refCount > 0;\n            if (this.backend) {\n                if (shouldSetUp && !this.isSetUp) {\n                    this.backend.setup();\n                    this.isSetUp = true;\n                } else if (!shouldSetUp && this.isSetUp) {\n                    this.backend.teardown();\n                    this.isSetUp = false;\n                }\n            }\n        };\n        this.store = store;\n        this.monitor = monitor;\n        store.subscribe(this.handleRefCountChange);\n    }\n}\n\n//# sourceMappingURL=DragDropManagerImpl.js.map","import { createBeginDrag } from './beginDrag.js';\nimport { createDrop } from './drop.js';\nimport { createEndDrag } from './endDrag.js';\nimport { createHover } from './hover.js';\nimport { createPublishDragSource } from './publishDragSource.js';\nexport * from './types.js';\nexport function createDragDropActions(manager) {\n    return {\n        beginDrag: createBeginDrag(manager),\n        publishDragSource: createPublishDragSource(manager),\n        hover: createHover(manager),\n        drop: createDrop(manager),\n        endDrag: createEndDrag(manager)\n    };\n}\n\n//# sourceMappingURL=index.js.map","/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */ export function add(a, b) {\n    return {\n        x: a.x + b.x,\n        y: a.y + b.y\n    };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */ export function subtract(a, b) {\n    return {\n        x: a.x - b.x,\n        y: a.y - b.y\n    };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */ export function getSourceClientOffset(state) {\n    const { clientOffset , initialClientOffset , initialSourceClientOffset  } = state;\n    if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n        return null;\n    }\n    return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */ export function getDifferenceFromInitialOffset(state) {\n    const { clientOffset , initialClientOffset  } = state;\n    if (!clientOffset || !initialClientOffset) {\n        return null;\n    }\n    return subtract(clientOffset, initialClientOffset);\n}\n\n//# sourceMappingURL=coords.js.map","import { intersection } from './js_utils.js';\nexport const NONE = [];\nexport const ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */ export function areDirty(dirtyIds, handlerIds) {\n    if (dirtyIds === NONE) {\n        return false;\n    }\n    if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n        return true;\n    }\n    const commonIds = intersection(handlerIds, dirtyIds);\n    return commonIds.length > 0;\n}\n\n//# sourceMappingURL=dirtiness.js.map","import { invariant } from '@react-dnd/invariant';\nimport { getDifferenceFromInitialOffset, getSourceClientOffset } from '../utils/coords.js';\nimport { areDirty } from '../utils/dirtiness.js';\nimport { matchesType } from '../utils/matchesType.js';\nexport class DragDropMonitorImpl {\n    subscribeToStateChange(listener, options = {}) {\n        const { handlerIds  } = options;\n        invariant(typeof listener === 'function', 'listener must be a function.');\n        invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n        let prevStateId = this.store.getState().stateId;\n        const handleChange = ()=>{\n            const state = this.store.getState();\n            const currentStateId = state.stateId;\n            try {\n                const canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n                if (!canSkipListener) {\n                    listener();\n                }\n            } finally{\n                prevStateId = currentStateId;\n            }\n        };\n        return this.store.subscribe(handleChange);\n    }\n    subscribeToOffsetChange(listener) {\n        invariant(typeof listener === 'function', 'listener must be a function.');\n        let previousState = this.store.getState().dragOffset;\n        const handleChange = ()=>{\n            const nextState = this.store.getState().dragOffset;\n            if (nextState === previousState) {\n                return;\n            }\n            previousState = nextState;\n            listener();\n        };\n        return this.store.subscribe(handleChange);\n    }\n    canDragSource(sourceId) {\n        if (!sourceId) {\n            return false;\n        }\n        const source = this.registry.getSource(sourceId);\n        invariant(source, `Expected to find a valid source. sourceId=${sourceId}`);\n        if (this.isDragging()) {\n            return false;\n        }\n        return source.canDrag(this, sourceId);\n    }\n    canDropOnTarget(targetId) {\n        // undefined on initial render\n        if (!targetId) {\n            return false;\n        }\n        const target = this.registry.getTarget(targetId);\n        invariant(target, `Expected to find a valid target. targetId=${targetId}`);\n        if (!this.isDragging() || this.didDrop()) {\n            return false;\n        }\n        const targetType = this.registry.getTargetType(targetId);\n        const draggedItemType = this.getItemType();\n        return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n    isDragging() {\n        return Boolean(this.getItemType());\n    }\n    isDraggingSource(sourceId) {\n        // undefined on initial render\n        if (!sourceId) {\n            return false;\n        }\n        const source = this.registry.getSource(sourceId, true);\n        invariant(source, `Expected to find a valid source. sourceId=${sourceId}`);\n        if (!this.isDragging() || !this.isSourcePublic()) {\n            return false;\n        }\n        const sourceType = this.registry.getSourceType(sourceId);\n        const draggedItemType = this.getItemType();\n        if (sourceType !== draggedItemType) {\n            return false;\n        }\n        return source.isDragging(this, sourceId);\n    }\n    isOverTarget(targetId, options = {\n        shallow: false\n    }) {\n        // undefined on initial render\n        if (!targetId) {\n            return false;\n        }\n        const { shallow  } = options;\n        if (!this.isDragging()) {\n            return false;\n        }\n        const targetType = this.registry.getTargetType(targetId);\n        const draggedItemType = this.getItemType();\n        if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n            return false;\n        }\n        const targetIds = this.getTargetIds();\n        if (!targetIds.length) {\n            return false;\n        }\n        const index = targetIds.indexOf(targetId);\n        if (shallow) {\n            return index === targetIds.length - 1;\n        } else {\n            return index > -1;\n        }\n    }\n    getItemType() {\n        return this.store.getState().dragOperation.itemType;\n    }\n    getItem() {\n        return this.store.getState().dragOperation.item;\n    }\n    getSourceId() {\n        return this.store.getState().dragOperation.sourceId;\n    }\n    getTargetIds() {\n        return this.store.getState().dragOperation.targetIds;\n    }\n    getDropResult() {\n        return this.store.getState().dragOperation.dropResult;\n    }\n    didDrop() {\n        return this.store.getState().dragOperation.didDrop;\n    }\n    isSourcePublic() {\n        return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n    getInitialClientOffset() {\n        return this.store.getState().dragOffset.initialClientOffset;\n    }\n    getInitialSourceClientOffset() {\n        return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n    getClientOffset() {\n        return this.store.getState().dragOffset.clientOffset;\n    }\n    getSourceClientOffset() {\n        return getSourceClientOffset(this.store.getState().dragOffset);\n    }\n    getDifferenceFromInitialOffset() {\n        return getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n    constructor(store, registry){\n        this.store = store;\n        this.registry = registry;\n    }\n}\n\n//# sourceMappingURL=DragDropMonitorImpl.js.map","// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n/* globals self */ const scope = typeof global !== 'undefined' ? global : self;\nconst BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\nexport function makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        const timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        const intervalHandle = setInterval(handleTimer, 50);\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nexport function makeRequestCallFromMutationObserver(callback) {\n    let toggle = 1;\n    const observer = new BrowserMutationObserver(callback);\n    const node = document.createTextNode('');\n    observer.observe(node, {\n        characterData: true\n    });\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\nexport const makeRequestCall = typeof BrowserMutationObserver === 'function' ? // reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nmakeRequestCallFromMutationObserver : // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\nmakeRequestCallFromTimer;\n\n//# sourceMappingURL=makeRequestCall.js.map","// `call`, just like a function.\nexport class RawTask {\n    call() {\n        try {\n            this.task && this.task();\n        } catch (error) {\n            this.onError(error);\n        } finally{\n            this.task = null;\n            this.release(this);\n        }\n    }\n    constructor(onError, release){\n        this.onError = onError;\n        this.release = release;\n        this.task = null;\n    }\n}\n\n//# sourceMappingURL=RawTask.js.map","import { AsapQueue } from './AsapQueue.js';\nimport { TaskFactory } from './TaskFactory.js';\nconst asapQueue = new AsapQueue();\nconst taskFactory = new TaskFactory(asapQueue.registerPendingError);\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */ export function asap(task) {\n    asapQueue.enqueueTask(taskFactory.create(task));\n}\n\n//# sourceMappingURL=asap.js.map","/* eslint-disable no-restricted-globals, @typescript-eslint/ban-ts-comment, @typescript-eslint/no-unused-vars, @typescript-eslint/no-non-null-assertion */ import { makeRequestCall, makeRequestCallFromTimer } from './makeRequestCall.js';\nexport class AsapQueue {\n    // Use the fastest means possible to execute a task in its own turn, with\n    // priority over other events including IO, animation, reflow, and redraw\n    // events in browsers.\n    //\n    // An exception thrown by a task will permanently interrupt the processing of\n    // subsequent tasks. The higher level `asap` function ensures that if an\n    // exception is thrown by a task, that the task queue will continue flushing as\n    // soon as possible, but if you use `rawAsap` directly, you are responsible to\n    // either ensure that no exceptions are thrown from your task, or to manually\n    // call `rawAsap.requestFlush` if an exception is thrown.\n    enqueueTask(task) {\n        const { queue: q , requestFlush  } = this;\n        if (!q.length) {\n            requestFlush();\n            this.flushing = true;\n        }\n        // Equivalent to push, but avoids a function call.\n        q[q.length] = task;\n    }\n    constructor(){\n        this.queue = [];\n        // We queue errors to ensure they are thrown in right order (FIFO).\n        // Array-as-queue is good enough here, since we are just dealing with exceptions.\n        this.pendingErrors = [];\n        // Once a flush has been requested, no further calls to `requestFlush` are\n        // necessary until the next `flush` completes.\n        // @ts-ignore\n        this.flushing = false;\n        // The position of the next task to execute in the task queue. This is\n        // preserved between calls to `flush` so that it can be resumed if\n        // a task throws an exception.\n        this.index = 0;\n        // If a task schedules additional tasks recursively, the task queue can grow\n        // unbounded. To prevent memory exhaustion, the task queue will periodically\n        // truncate already-completed tasks.\n        this.capacity = 1024;\n        // The flush function processes all tasks that have been scheduled with\n        // `rawAsap` unless and until one of those tasks throws an exception.\n        // If a task throws an exception, `flush` ensures that its state will remain\n        // consistent and will resume where it left off when called again.\n        // However, `flush` does not make any arrangements to be called again if an\n        // exception is thrown.\n        this.flush = ()=>{\n            const { queue: q  } = this;\n            while(this.index < q.length){\n                const currentIndex = this.index;\n                // Advance the index before calling the task. This ensures that we will\n                // begin flushing on the next task the task throws an error.\n                this.index++;\n                q[currentIndex].call();\n                // Prevent leaking memory for long chains of recursive calls to `asap`.\n                // If we call `asap` within tasks scheduled by `asap`, the queue will\n                // grow, but to avoid an O(n) walk for every task we execute, we don't\n                // shift tasks off the queue after they have been executed.\n                // Instead, we periodically shift 1024 tasks off the queue.\n                if (this.index > this.capacity) {\n                    // Manually shift all values starting at the index back to the\n                    // beginning of the queue.\n                    for(let scan = 0, newLength = q.length - this.index; scan < newLength; scan++){\n                        q[scan] = q[scan + this.index];\n                    }\n                    q.length -= this.index;\n                    this.index = 0;\n                }\n            }\n            q.length = 0;\n            this.index = 0;\n            this.flushing = false;\n        };\n        // In a web browser, exceptions are not fatal. However, to avoid\n        // slowing down the queue of pending tasks, we rethrow the error in a\n        // lower priority turn.\n        this.registerPendingError = (err)=>{\n            this.pendingErrors.push(err);\n            this.requestErrorThrow();\n        };\n        // `requestFlush` requests that the high priority event queue be flushed as\n        // soon as possible.\n        // This is useful to prevent an error thrown in a task from stalling the event\n        // queue if the exception handled by Node.js’s\n        // `process.on(\"uncaughtException\")` or by a domain.\n        // `requestFlush` is implemented using a strategy based on data collected from\n        // every available SauceLabs Selenium web driver worker at time of writing.\n        // https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n        this.requestFlush = makeRequestCall(this.flush);\n        this.requestErrorThrow = makeRequestCallFromTimer(()=>{\n            // Throw first error\n            if (this.pendingErrors.length) {\n                throw this.pendingErrors.shift();\n            }\n        });\n    }\n} // The message channel technique was discovered by Malte Ubl and was the\n // original foundation for this library.\n // http://www.nonblocking.io/2011/06/windownexttick.html\n // Safari 6.0.5 (at least) intermittently fails to create message ports on a\n // page's first load. Thankfully, this version of Safari supports\n // MutationObservers, so we don't need to fall back in that case.\n // function makeRequestCallFromMessageChannel(callback) {\n //     var channel = new MessageChannel();\n //     channel.port1.onmessage = callback;\n //     return function requestCall() {\n //         channel.port2.postMessage(0);\n //     };\n // }\n // For reasons explained above, we are also unable to use `setImmediate`\n // under any circumstances.\n // Even if we were, there is another bug in Internet Explorer 10.\n // It is not sufficient to assign `setImmediate` to `requestFlush` because\n // `setImmediate` must be called *by name* and therefore must be wrapped in a\n // closure.\n // Never forget.\n // function makeRequestCallFromSetImmediate(callback) {\n //     return function requestCall() {\n //         setImmediate(callback);\n //     };\n // }\n // Safari 6.0 has a problem where timers will get lost while the user is\n // scrolling. This problem does not impact ASAP because Safari 6.0 supports\n // mutation observers, so that implementation is used instead.\n // However, if we ever elect to use timers in Safari, the prevalent work-around\n // is to add a scroll event listener that calls for a flush.\n // `setTimeout` does not call the passed callback if the delay is less than\n // approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n // even then.\n // This is for `asap.js` only.\n // Its name will be periodically randomized to break any code that depends on\n // // its existence.\n // rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer\n // ASAP was originally a nextTick shim included in Q. This was factored out\n // into this ASAP package. It was later adapted to RSVP which made further\n // amendments. These decisions, particularly to marginalize MessageChannel and\n // to capture the MutationObserver implementation in a closure, were integrated\n // back into ASAP proper.\n // https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n//# sourceMappingURL=AsapQueue.js.map","import { RawTask } from './RawTask.js';\nexport class TaskFactory {\n    create(task) {\n        const tasks = this.freeTasks;\n        const t1 = tasks.length ? tasks.pop() : new RawTask(this.onError, (t)=>tasks[tasks.length] = t\n        );\n        t1.task = task;\n        return t1;\n    }\n    constructor(onError){\n        this.onError = onError;\n        this.freeTasks = [];\n    }\n}\n\n//# sourceMappingURL=TaskFactory.js.map","export const ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nexport const ADD_TARGET = 'dnd-core/ADD_TARGET';\nexport const REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nexport const REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nexport function addSource(sourceId) {\n    return {\n        type: ADD_SOURCE,\n        payload: {\n            sourceId\n        }\n    };\n}\nexport function addTarget(targetId) {\n    return {\n        type: ADD_TARGET,\n        payload: {\n            targetId\n        }\n    };\n}\nexport function removeSource(sourceId) {\n    return {\n        type: REMOVE_SOURCE,\n        payload: {\n            sourceId\n        }\n    };\n}\nexport function removeTarget(targetId) {\n    return {\n        type: REMOVE_TARGET,\n        payload: {\n            targetId\n        }\n    };\n}\n\n//# sourceMappingURL=registry.js.map","import { invariant } from '@react-dnd/invariant';\nexport function validateSourceContract(source) {\n    invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n    invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n    invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nexport function validateTargetContract(target) {\n    invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n    invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n    invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nexport function validateType(type, allowArray) {\n    if (allowArray && Array.isArray(type)) {\n        type.forEach((t)=>validateType(t, false)\n        );\n        return;\n    }\n    invariant(typeof type === 'string' || typeof type === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}\n\n//# sourceMappingURL=contracts.js.map","export var HandlerRole;\n(function(HandlerRole) {\n    HandlerRole[\"SOURCE\"] = \"SOURCE\";\n    HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));\n\n//# sourceMappingURL=interfaces.js.map","let nextUniqueId = 0;\nexport function getNextUniqueId() {\n    return nextUniqueId++;\n}\n\n//# sourceMappingURL=getNextUniqueId.js.map","import { asap } from '@react-dnd/asap';\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource, addTarget, removeSource, removeTarget } from '../actions/registry.js';\nimport { validateSourceContract, validateTargetContract, validateType } from '../contracts.js';\nimport { HandlerRole } from '../interfaces.js';\nimport { getNextUniqueId } from '../utils/getNextUniqueId.js';\nfunction getNextHandlerId(role) {\n    const id = getNextUniqueId().toString();\n    switch(role){\n        case HandlerRole.SOURCE:\n            return `S${id}`;\n        case HandlerRole.TARGET:\n            return `T${id}`;\n        default:\n            throw new Error(`Unknown Handler Role: ${role}`);\n    }\n}\nfunction parseRoleFromHandlerId(handlerId) {\n    switch(handlerId[0]){\n        case 'S':\n            return HandlerRole.SOURCE;\n        case 'T':\n            return HandlerRole.TARGET;\n        default:\n            throw new Error(`Cannot parse handler ID: ${handlerId}`);\n    }\n}\nfunction mapContainsValue(map, searchValue) {\n    const entries = map.entries();\n    let isDone = false;\n    do {\n        const { done , value: [, value] ,  } = entries.next();\n        if (value === searchValue) {\n            return true;\n        }\n        isDone = !!done;\n    }while (!isDone)\n    return false;\n}\nexport class HandlerRegistryImpl {\n    addSource(type, source) {\n        validateType(type);\n        validateSourceContract(source);\n        const sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n        this.store.dispatch(addSource(sourceId));\n        return sourceId;\n    }\n    addTarget(type, target) {\n        validateType(type, true);\n        validateTargetContract(target);\n        const targetId = this.addHandler(HandlerRole.TARGET, type, target);\n        this.store.dispatch(addTarget(targetId));\n        return targetId;\n    }\n    containsHandler(handler) {\n        return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n    getSource(sourceId, includePinned = false) {\n        invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n        const isPinned = includePinned && sourceId === this.pinnedSourceId;\n        const source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n        return source;\n    }\n    getTarget(targetId) {\n        invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n        return this.dropTargets.get(targetId);\n    }\n    getSourceType(sourceId) {\n        invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n        return this.types.get(sourceId);\n    }\n    getTargetType(targetId) {\n        invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n        return this.types.get(targetId);\n    }\n    isSourceId(handlerId) {\n        const role = parseRoleFromHandlerId(handlerId);\n        return role === HandlerRole.SOURCE;\n    }\n    isTargetId(handlerId) {\n        const role = parseRoleFromHandlerId(handlerId);\n        return role === HandlerRole.TARGET;\n    }\n    removeSource(sourceId) {\n        invariant(this.getSource(sourceId), 'Expected an existing source.');\n        this.store.dispatch(removeSource(sourceId));\n        asap(()=>{\n            this.dragSources.delete(sourceId);\n            this.types.delete(sourceId);\n        });\n    }\n    removeTarget(targetId) {\n        invariant(this.getTarget(targetId), 'Expected an existing target.');\n        this.store.dispatch(removeTarget(targetId));\n        this.dropTargets.delete(targetId);\n        this.types.delete(targetId);\n    }\n    pinSource(sourceId) {\n        const source = this.getSource(sourceId);\n        invariant(source, 'Expected an existing source.');\n        this.pinnedSourceId = sourceId;\n        this.pinnedSource = source;\n    }\n    unpinSource() {\n        invariant(this.pinnedSource, 'No source is pinned at the time.');\n        this.pinnedSourceId = null;\n        this.pinnedSource = null;\n    }\n    addHandler(role, type, handler) {\n        const id = getNextHandlerId(role);\n        this.types.set(id, type);\n        if (role === HandlerRole.SOURCE) {\n            this.dragSources.set(id, handler);\n        } else if (role === HandlerRole.TARGET) {\n            this.dropTargets.set(id, handler);\n        }\n        return id;\n    }\n    constructor(store){\n        this.types = new Map();\n        this.dragSources = new Map();\n        this.dropTargets = new Map();\n        this.pinnedSourceId = null;\n        this.pinnedSource = null;\n        this.store = store;\n    }\n}\n\n//# sourceMappingURL=HandlerRegistryImpl.js.map","export const strictEquality = (a, b)=>a === b\n;\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */ export function areCoordsEqual(offsetA, offsetB) {\n    if (!offsetA && !offsetB) {\n        return true;\n    } else if (!offsetA || !offsetB) {\n        return false;\n    } else {\n        return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n    }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */ export function areArraysEqual(a, b, isEqual = strictEquality) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    for(let i = 0; i < a.length; ++i){\n        if (!isEqual(a[i], b[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\n//# sourceMappingURL=equality.js.map","import { BEGIN_DRAG, DROP, END_DRAG, HOVER, PUBLISH_DRAG_SOURCE } from '../actions/dragDrop/index.js';\nimport { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry.js';\nimport { ALL, NONE } from '../utils/dirtiness.js';\nimport { areArraysEqual } from '../utils/equality.js';\nimport { xor } from '../utils/js_utils.js';\nexport function reduce(// eslint-disable-next-line @typescript-eslint/no-unused-vars\n_state = NONE, action) {\n    switch(action.type){\n        case HOVER:\n            break;\n        case ADD_SOURCE:\n        case ADD_TARGET:\n        case REMOVE_TARGET:\n        case REMOVE_SOURCE:\n            return NONE;\n        case BEGIN_DRAG:\n        case PUBLISH_DRAG_SOURCE:\n        case END_DRAG:\n        case DROP:\n        default:\n            return ALL;\n    }\n    const { targetIds =[] , prevTargetIds =[]  } = action.payload;\n    const result = xor(targetIds, prevTargetIds);\n    const didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n    if (!didChange) {\n        return NONE;\n    }\n    // Check the target ids at the innermost position. If they are valid, add them\n    // to the result\n    const prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n    const innermostTargetId = targetIds[targetIds.length - 1];\n    if (prevInnermostTargetId !== innermostTargetId) {\n        if (prevInnermostTargetId) {\n            result.push(prevInnermostTargetId);\n        }\n        if (innermostTargetId) {\n            result.push(innermostTargetId);\n        }\n    }\n    return result;\n}\n\n//# sourceMappingURL=dirtyHandlerIds.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { BEGIN_DRAG, DROP, END_DRAG, HOVER, INIT_COORDS } from '../actions/dragDrop/index.js';\nimport { areCoordsEqual } from '../utils/equality.js';\nconst initialState = {\n    initialSourceClientOffset: null,\n    initialClientOffset: null,\n    clientOffset: null\n};\nexport function reduce(state = initialState, action) {\n    const { payload  } = action;\n    switch(action.type){\n        case INIT_COORDS:\n        case BEGIN_DRAG:\n            return {\n                initialSourceClientOffset: payload.sourceClientOffset,\n                initialClientOffset: payload.clientOffset,\n                clientOffset: payload.clientOffset\n            };\n        case HOVER:\n            if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n                return state;\n            }\n            return _objectSpread({}, state, {\n                clientOffset: payload.clientOffset\n            });\n        case END_DRAG:\n        case DROP:\n            return initialState;\n        default:\n            return state;\n    }\n}\n\n//# sourceMappingURL=dragOffset.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { BEGIN_DRAG, DROP, END_DRAG, HOVER, PUBLISH_DRAG_SOURCE } from '../actions/dragDrop/index.js';\nimport { REMOVE_TARGET } from '../actions/registry.js';\nimport { without } from '../utils/js_utils.js';\nconst initialState = {\n    itemType: null,\n    item: null,\n    sourceId: null,\n    targetIds: [],\n    dropResult: null,\n    didDrop: false,\n    isSourcePublic: null\n};\nexport function reduce(state = initialState, action) {\n    const { payload  } = action;\n    switch(action.type){\n        case BEGIN_DRAG:\n            return _objectSpread({}, state, {\n                itemType: payload.itemType,\n                item: payload.item,\n                sourceId: payload.sourceId,\n                isSourcePublic: payload.isSourcePublic,\n                dropResult: null,\n                didDrop: false\n            });\n        case PUBLISH_DRAG_SOURCE:\n            return _objectSpread({}, state, {\n                isSourcePublic: true\n            });\n        case HOVER:\n            return _objectSpread({}, state, {\n                targetIds: payload.targetIds\n            });\n        case REMOVE_TARGET:\n            if (state.targetIds.indexOf(payload.targetId) === -1) {\n                return state;\n            }\n            return _objectSpread({}, state, {\n                targetIds: without(state.targetIds, payload.targetId)\n            });\n        case DROP:\n            return _objectSpread({}, state, {\n                dropResult: payload.dropResult,\n                didDrop: true,\n                targetIds: []\n            });\n        case END_DRAG:\n            return _objectSpread({}, state, {\n                itemType: null,\n                item: null,\n                sourceId: null,\n                dropResult: null,\n                didDrop: false,\n                isSourcePublic: null,\n                targetIds: []\n            });\n        default:\n            return state;\n    }\n}\n\n//# sourceMappingURL=dragOperation.js.map","import { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry.js';\nexport function reduce(state = 0, action) {\n    switch(action.type){\n        case ADD_SOURCE:\n        case ADD_TARGET:\n            return state + 1;\n        case REMOVE_SOURCE:\n        case REMOVE_TARGET:\n            return state - 1;\n        default:\n            return state;\n    }\n}\n\n//# sourceMappingURL=refCount.js.map","export function reduce(state = 0) {\n    return state + 1;\n}\n\n//# sourceMappingURL=stateId.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { get } from '../utils/js_utils.js';\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds.js';\nimport { reduce as dragOffset } from './dragOffset.js';\nimport { reduce as dragOperation } from './dragOperation.js';\nimport { reduce as refCount } from './refCount.js';\nimport { reduce as stateId } from './stateId.js';\nexport function reduce(state = {}, action) {\n    return {\n        dirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n            type: action.type,\n            payload: _objectSpread({}, action.payload, {\n                prevTargetIds: get(state, 'dragOperation.targetIds', [])\n            })\n        }),\n        dragOffset: dragOffset(state.dragOffset, action),\n        refCount: refCount(state.refCount, action),\n        dragOperation: dragOperation(state.dragOperation, action),\n        stateId: stateId(state.stateId)\n    };\n}\n\n//# sourceMappingURL=index.js.map","import { createStore } from 'redux';\nimport { DragDropManagerImpl } from './classes/DragDropManagerImpl.js';\nimport { DragDropMonitorImpl } from './classes/DragDropMonitorImpl.js';\nimport { HandlerRegistryImpl } from './classes/HandlerRegistryImpl.js';\nimport { reduce } from './reducers/index.js';\nexport function createDragDropManager(backendFactory, globalContext = undefined, backendOptions = {}, debugMode = false) {\n    const store = makeStoreInstance(debugMode);\n    const monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n    const manager = new DragDropManagerImpl(store, monitor);\n    const backend = backendFactory(manager, globalContext, backendOptions);\n    manager.receiveBackend(backend);\n    return manager;\n}\nfunction makeStoreInstance(debugMode) {\n    // TODO: if we ever make a react-native version of this,\n    // we'll need to consider how to pull off dev-tooling\n    const reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n    return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n        name: 'dnd-core',\n        instanceId: 'dnd-core'\n    }));\n}\n\n//# sourceMappingURL=createDragDropManager.js.map","import { createContext } from 'react';\n/**\n * Create the React Context\n */ export const DndContext = createContext({\n    dragDropManager: undefined\n});\n\n//# sourceMappingURL=DndContext.js.map","function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n    var key, i;\n    if (Object.getOwnPropertySymbols) {\n        var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n        for(i = 0; i < sourceSymbolKeys.length; i++){\n            key = sourceSymbolKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n    for(i = 0; i < sourceKeys.length; i++){\n        key = sourceKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        target[key] = source[key];\n    }\n    return target;\n}\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createDragDropManager } from 'dnd-core';\nimport { memo, useEffect } from 'react';\nimport { DndContext } from './DndContext.js';\nlet refCount = 0;\nconst INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\nvar DndProvider = /*#__PURE__*/ memo(function DndProvider(_param) {\n    var { children  } = _param, props = _objectWithoutProperties(_param, [\n        \"children\"\n    ]);\n    const [manager, isGlobalInstance] = getDndContextValue(props) // memoized from props\n    ;\n    /**\n\t\t * If the global context was used to store the DND context\n\t\t * then where theres no more references to it we should\n\t\t * clean it up to avoid memory leaks\n\t\t */ useEffect(()=>{\n        if (isGlobalInstance) {\n            const context = getGlobalContext();\n            ++refCount;\n            return ()=>{\n                if (--refCount === 0) {\n                    context[INSTANCE_SYM] = null;\n                }\n            };\n        }\n        return;\n    }, []);\n    return /*#__PURE__*/ _jsx(DndContext.Provider, {\n        value: manager,\n        children: children\n    });\n});\n/**\n * A React component that provides the React-DnD context\n */ export { DndProvider,  };\nfunction getDndContextValue(props) {\n    if ('manager' in props) {\n        const manager = {\n            dragDropManager: props.manager\n        };\n        return [\n            manager,\n            false\n        ];\n    }\n    const manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n    const isGlobalInstance = !props.context;\n    return [\n        manager,\n        isGlobalInstance\n    ];\n}\nfunction createSingletonDndContext(backend, context = getGlobalContext(), options, debugMode) {\n    const ctx = context;\n    if (!ctx[INSTANCE_SYM]) {\n        ctx[INSTANCE_SYM] = {\n            dragDropManager: createDragDropManager(backend, context, options, debugMode)\n        };\n    }\n    return ctx[INSTANCE_SYM];\n}\nfunction getGlobalContext() {\n    return typeof global !== 'undefined' ? global : window;\n}\n\n//# sourceMappingURL=DndProvider.js.map","// cheap lodash replacements\nexport function memoize(fn) {\n    let result = null;\n    const memoized = ()=>{\n        if (result == null) {\n            result = fn();\n        }\n        return result;\n    };\n    return memoized;\n}\n/**\n * drop-in replacement for _.without\n */ export function without(items, item) {\n    return items.filter((i)=>i !== item\n    );\n}\nexport function union(itemsA, itemsB) {\n    const set = new Set();\n    const insertItem = (item)=>set.add(item)\n    ;\n    itemsA.forEach(insertItem);\n    itemsB.forEach(insertItem);\n    const result = [];\n    set.forEach((key)=>result.push(key)\n    );\n    return result;\n}\n\n//# sourceMappingURL=js_utils.js.map","import { union, without } from './utils/js_utils.js';\nexport class EnterLeaveCounter {\n    enter(enteringNode) {\n        const previousLength = this.entered.length;\n        const isNodeEntered = (node)=>this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode))\n        ;\n        this.entered = union(this.entered.filter(isNodeEntered), [\n            enteringNode\n        ]);\n        return previousLength === 0 && this.entered.length > 0;\n    }\n    leave(leavingNode) {\n        const previousLength = this.entered.length;\n        this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n        return previousLength > 0 && this.entered.length === 0;\n    }\n    reset() {\n        this.entered = [];\n    }\n    constructor(isNodeInDocument){\n        this.entered = [];\n        this.isNodeInDocument = isNodeInDocument;\n    }\n}\n\n//# sourceMappingURL=EnterLeaveCounter.js.map","export class NativeDragSource {\n    initializeExposedProperties() {\n        Object.keys(this.config.exposeProperties).forEach((property)=>{\n            Object.defineProperty(this.item, property, {\n                configurable: true,\n                enumerable: true,\n                get () {\n                    // eslint-disable-next-line no-console\n                    console.warn(`Browser doesn't allow reading \"${property}\" until the drop event.`);\n                    return null;\n                }\n            });\n        });\n    }\n    loadDataTransfer(dataTransfer) {\n        if (dataTransfer) {\n            const newProperties = {};\n            Object.keys(this.config.exposeProperties).forEach((property)=>{\n                const propertyFn = this.config.exposeProperties[property];\n                if (propertyFn != null) {\n                    newProperties[property] = {\n                        value: propertyFn(dataTransfer, this.config.matchesTypes),\n                        configurable: true,\n                        enumerable: true\n                    };\n                }\n            });\n            Object.defineProperties(this.item, newProperties);\n        }\n    }\n    canDrag() {\n        return true;\n    }\n    beginDrag() {\n        return this.item;\n    }\n    isDragging(monitor, handle) {\n        return handle === monitor.getSourceId();\n    }\n    endDrag() {\n    // empty\n    }\n    constructor(config){\n        this.config = config;\n        this.item = {};\n        this.initializeExposedProperties();\n    }\n}\n\n//# sourceMappingURL=NativeDragSource.js.map","export const FILE = '__NATIVE_FILE__';\nexport const URL = '__NATIVE_URL__';\nexport const TEXT = '__NATIVE_TEXT__';\nexport const HTML = '__NATIVE_HTML__';\n\n//# sourceMappingURL=NativeTypes.js.map","export function getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n    const result = typesToTry.reduce((resultSoFar, typeToTry)=>resultSoFar || dataTransfer.getData(typeToTry)\n    , '');\n    return result != null ? result : defaultValue;\n}\n\n//# sourceMappingURL=getDataFromDataTransfer.js.map","import * as NativeTypes from '../NativeTypes.js';\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer.js';\nexport const nativeTypesConfig = {\n    [NativeTypes.FILE]: {\n        exposeProperties: {\n            files: (dataTransfer)=>Array.prototype.slice.call(dataTransfer.files)\n            ,\n            items: (dataTransfer)=>dataTransfer.items\n            ,\n            dataTransfer: (dataTransfer)=>dataTransfer\n        },\n        matchesTypes: [\n            'Files'\n        ]\n    },\n    [NativeTypes.HTML]: {\n        exposeProperties: {\n            html: (dataTransfer, matchesTypes)=>getDataFromDataTransfer(dataTransfer, matchesTypes, '')\n            ,\n            dataTransfer: (dataTransfer)=>dataTransfer\n        },\n        matchesTypes: [\n            'Html',\n            'text/html'\n        ]\n    },\n    [NativeTypes.URL]: {\n        exposeProperties: {\n            urls: (dataTransfer, matchesTypes)=>getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n')\n            ,\n            dataTransfer: (dataTransfer)=>dataTransfer\n        },\n        matchesTypes: [\n            'Url',\n            'text/uri-list'\n        ]\n    },\n    [NativeTypes.TEXT]: {\n        exposeProperties: {\n            text: (dataTransfer, matchesTypes)=>getDataFromDataTransfer(dataTransfer, matchesTypes, '')\n            ,\n            dataTransfer: (dataTransfer)=>dataTransfer\n        },\n        matchesTypes: [\n            'Text',\n            'text/plain'\n        ]\n    }\n};\n\n//# sourceMappingURL=nativeTypesConfig.js.map","import { NativeDragSource } from './NativeDragSource.js';\nimport { nativeTypesConfig } from './nativeTypesConfig.js';\nexport function createNativeDragSource(type, dataTransfer) {\n    const config = nativeTypesConfig[type];\n    if (!config) {\n        throw new Error(`native type ${type} has no configuration`);\n    }\n    const result = new NativeDragSource(config);\n    result.loadDataTransfer(dataTransfer);\n    return result;\n}\nexport function matchNativeItemType(dataTransfer) {\n    if (!dataTransfer) {\n        return null;\n    }\n    const dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n    return Object.keys(nativeTypesConfig).filter((nativeItemType)=>{\n        const typeConfig = nativeTypesConfig[nativeItemType];\n        if (!(typeConfig === null || typeConfig === void 0 ? void 0 : typeConfig.matchesTypes)) {\n            return false;\n        }\n        return typeConfig.matchesTypes.some((t)=>dataTransferTypes.indexOf(t) > -1\n        );\n    })[0] || null;\n}\n\n//# sourceMappingURL=index.js.map","import { memoize } from './utils/js_utils.js';\nexport const isFirefox = memoize(()=>/firefox/i.test(navigator.userAgent)\n);\nexport const isSafari = memoize(()=>Boolean(window.safari)\n);\n\n//# sourceMappingURL=BrowserDetector.js.map","export class MonotonicInterpolant {\n    interpolate(x) {\n        const { xs , ys , c1s , c2s , c3s  } = this;\n        // The rightmost point in the dataset should give an exact result\n        let i = xs.length - 1;\n        if (x === xs[i]) {\n            return ys[i];\n        }\n        // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n        let low = 0;\n        let high = c3s.length - 1;\n        let mid;\n        while(low <= high){\n            mid = Math.floor(0.5 * (low + high));\n            const xHere = xs[mid];\n            if (xHere < x) {\n                low = mid + 1;\n            } else if (xHere > x) {\n                high = mid - 1;\n            } else {\n                return ys[mid];\n            }\n        }\n        i = Math.max(0, high);\n        // Interpolate\n        const diff = x - xs[i];\n        const diffSq = diff * diff;\n        return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n    constructor(xs, ys){\n        const { length  } = xs;\n        // Rearrange xs and ys so that xs is sorted\n        const indexes = [];\n        for(let i = 0; i < length; i++){\n            indexes.push(i);\n        }\n        indexes.sort((a, b)=>xs[a] < xs[b] ? -1 : 1\n        );\n        // Get consecutive differences and slopes\n        const dys = [];\n        const dxs = [];\n        const ms = [];\n        let dx;\n        let dy;\n        for(let i1 = 0; i1 < length - 1; i1++){\n            dx = xs[i1 + 1] - xs[i1];\n            dy = ys[i1 + 1] - ys[i1];\n            dxs.push(dx);\n            dys.push(dy);\n            ms.push(dy / dx);\n        }\n        // Get degree-1 coefficients\n        const c1s = [\n            ms[0]\n        ];\n        for(let i2 = 0; i2 < dxs.length - 1; i2++){\n            const m2 = ms[i2];\n            const mNext = ms[i2 + 1];\n            if (m2 * mNext <= 0) {\n                c1s.push(0);\n            } else {\n                dx = dxs[i2];\n                const dxNext = dxs[i2 + 1];\n                const common = dx + dxNext;\n                c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n            }\n        }\n        c1s.push(ms[ms.length - 1]);\n        // Get degree-2 and degree-3 coefficients\n        const c2s = [];\n        const c3s = [];\n        let m;\n        for(let i3 = 0; i3 < c1s.length - 1; i3++){\n            m = ms[i3];\n            const c1 = c1s[i3];\n            const invDx = 1 / dxs[i3];\n            const common = c1 + c1s[i3 + 1] - m - m;\n            c2s.push((m - c1 - common) * invDx);\n            c3s.push(common * invDx * invDx);\n        }\n        this.xs = xs;\n        this.ys = ys;\n        this.c1s = c1s;\n        this.c2s = c2s;\n        this.c3s = c3s;\n    }\n}\n\n//# sourceMappingURL=MonotonicInterpolant.js.map","import { isFirefox, isSafari } from './BrowserDetector.js';\nimport { MonotonicInterpolant } from './MonotonicInterpolant.js';\nconst ELEMENT_NODE = 1;\nexport function getNodeClientOffset(node) {\n    const el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n    if (!el) {\n        return null;\n    }\n    const { top , left  } = el.getBoundingClientRect();\n    return {\n        x: left,\n        y: top\n    };\n}\nexport function getEventClientOffset(e) {\n    return {\n        x: e.clientX,\n        y: e.clientY\n    };\n}\nfunction isImageNode(node) {\n    var ref;\n    return node.nodeName === 'IMG' && (isFirefox() || !((ref = document.documentElement) === null || ref === void 0 ? void 0 : ref.contains(node)));\n}\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n    let dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n    let dragPreviewHeight = isImage ? dragPreview.height : sourceHeight;\n    // Work around @2x coordinate discrepancies in browsers\n    if (isSafari() && isImage) {\n        dragPreviewHeight /= window.devicePixelRatio;\n        dragPreviewWidth /= window.devicePixelRatio;\n    }\n    return {\n        dragPreviewWidth,\n        dragPreviewHeight\n    };\n}\nexport function getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n    // The browsers will use the image intrinsic size under different conditions.\n    // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n    const isImage = isImageNode(dragPreview);\n    const dragPreviewNode = isImage ? sourceNode : dragPreview;\n    const dragPreviewNodeOffsetFromClient = getNodeClientOffset(dragPreviewNode);\n    const offsetFromDragPreview = {\n        x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n        y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n    };\n    const { offsetWidth: sourceWidth , offsetHeight: sourceHeight  } = sourceNode;\n    const { anchorX , anchorY  } = anchorPoint;\n    const { dragPreviewWidth , dragPreviewHeight  } = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight);\n    const calculateYOffset = ()=>{\n        const interpolantY = new MonotonicInterpolant([\n            0,\n            0.5,\n            1\n        ], [\n            // Dock to the top\n            offsetFromDragPreview.y,\n            // Align at the center\n            (offsetFromDragPreview.y / sourceHeight) * dragPreviewHeight,\n            // Dock to the bottom\n            offsetFromDragPreview.y + dragPreviewHeight - sourceHeight, \n        ]);\n        let y = interpolantY.interpolate(anchorY);\n        // Work around Safari 8 positioning bug\n        if (isSafari() && isImage) {\n            // We'll have to wait for @3x to see if this is entirely correct\n            y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n        }\n        return y;\n    };\n    const calculateXOffset = ()=>{\n        // Interpolate coordinates depending on anchor point\n        // If you know a simpler way to do this, let me know\n        const interpolantX = new MonotonicInterpolant([\n            0,\n            0.5,\n            1\n        ], [\n            // Dock to the left\n            offsetFromDragPreview.x,\n            // Align at the center\n            (offsetFromDragPreview.x / sourceWidth) * dragPreviewWidth,\n            // Dock to the right\n            offsetFromDragPreview.x + dragPreviewWidth - sourceWidth, \n        ]);\n        return interpolantX.interpolate(anchorX);\n    };\n    // Force offsets if specified in the options.\n    const { offsetX , offsetY  } = offsetPoint;\n    const isManualOffsetX = offsetX === 0 || offsetX;\n    const isManualOffsetY = offsetY === 0 || offsetY;\n    return {\n        x: isManualOffsetX ? offsetX : calculateXOffset(),\n        y: isManualOffsetY ? offsetY : calculateYOffset()\n    };\n}\n\n//# sourceMappingURL=OffsetUtils.js.map","export class OptionsReader {\n    get window() {\n        if (this.globalContext) {\n            return this.globalContext;\n        } else if (typeof window !== 'undefined') {\n            return window;\n        }\n        return undefined;\n    }\n    get document() {\n        var ref;\n        if ((ref = this.globalContext) === null || ref === void 0 ? void 0 : ref.document) {\n            return this.globalContext.document;\n        } else if (this.window) {\n            return this.window.document;\n        } else {\n            return undefined;\n        }\n    }\n    get rootElement() {\n        var ref;\n        return ((ref = this.optionsArgs) === null || ref === void 0 ? void 0 : ref.rootElement) || this.window;\n    }\n    constructor(globalContext, options){\n        this.ownerDocument = null;\n        this.globalContext = globalContext;\n        this.optionsArgs = options;\n    }\n}\n\n//# sourceMappingURL=OptionsReader.js.map","function _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            _defineProperty(target, key, source[key]);\n        });\n    }\n    return target;\n}\nimport { EnterLeaveCounter } from './EnterLeaveCounter.js';\nimport { createNativeDragSource, matchNativeItemType } from './NativeDragSources/index.js';\nimport * as NativeTypes from './NativeTypes.js';\nimport { getDragPreviewOffset, getEventClientOffset, getNodeClientOffset } from './OffsetUtils.js';\nimport { OptionsReader } from './OptionsReader.js';\nexport class HTML5BackendImpl {\n    /**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */ profile() {\n        var ref, ref1;\n        return {\n            sourcePreviewNodes: this.sourcePreviewNodes.size,\n            sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n            sourceNodeOptions: this.sourceNodeOptions.size,\n            sourceNodes: this.sourceNodes.size,\n            dragStartSourceIds: ((ref = this.dragStartSourceIds) === null || ref === void 0 ? void 0 : ref.length) || 0,\n            dropTargetIds: this.dropTargetIds.length,\n            dragEnterTargetIds: this.dragEnterTargetIds.length,\n            dragOverTargetIds: ((ref1 = this.dragOverTargetIds) === null || ref1 === void 0 ? void 0 : ref1.length) || 0\n        };\n    }\n    // public for test\n    get window() {\n        return this.options.window;\n    }\n    get document() {\n        return this.options.document;\n    }\n    /**\n\t * Get the root element to use for event subscriptions\n\t */ get rootElement() {\n        return this.options.rootElement;\n    }\n    setup() {\n        const root = this.rootElement;\n        if (root === undefined) {\n            return;\n        }\n        if (root.__isReactDndBackendSetUp) {\n            throw new Error('Cannot have two HTML5 backends at the same time.');\n        }\n        root.__isReactDndBackendSetUp = true;\n        this.addEventListeners(root);\n    }\n    teardown() {\n        const root = this.rootElement;\n        if (root === undefined) {\n            return;\n        }\n        root.__isReactDndBackendSetUp = false;\n        this.removeEventListeners(this.rootElement);\n        this.clearCurrentDragSourceNode();\n        if (this.asyncEndDragFrameId) {\n            var ref;\n            (ref = this.window) === null || ref === void 0 ? void 0 : ref.cancelAnimationFrame(this.asyncEndDragFrameId);\n        }\n    }\n    connectDragPreview(sourceId, node, options) {\n        this.sourcePreviewNodeOptions.set(sourceId, options);\n        this.sourcePreviewNodes.set(sourceId, node);\n        return ()=>{\n            this.sourcePreviewNodes.delete(sourceId);\n            this.sourcePreviewNodeOptions.delete(sourceId);\n        };\n    }\n    connectDragSource(sourceId, node, options) {\n        this.sourceNodes.set(sourceId, node);\n        this.sourceNodeOptions.set(sourceId, options);\n        const handleDragStart = (e)=>this.handleDragStart(e, sourceId)\n        ;\n        const handleSelectStart = (e)=>this.handleSelectStart(e)\n        ;\n        node.setAttribute('draggable', 'true');\n        node.addEventListener('dragstart', handleDragStart);\n        node.addEventListener('selectstart', handleSelectStart);\n        return ()=>{\n            this.sourceNodes.delete(sourceId);\n            this.sourceNodeOptions.delete(sourceId);\n            node.removeEventListener('dragstart', handleDragStart);\n            node.removeEventListener('selectstart', handleSelectStart);\n            node.setAttribute('draggable', 'false');\n        };\n    }\n    connectDropTarget(targetId, node) {\n        const handleDragEnter = (e)=>this.handleDragEnter(e, targetId)\n        ;\n        const handleDragOver = (e)=>this.handleDragOver(e, targetId)\n        ;\n        const handleDrop = (e)=>this.handleDrop(e, targetId)\n        ;\n        node.addEventListener('dragenter', handleDragEnter);\n        node.addEventListener('dragover', handleDragOver);\n        node.addEventListener('drop', handleDrop);\n        return ()=>{\n            node.removeEventListener('dragenter', handleDragEnter);\n            node.removeEventListener('dragover', handleDragOver);\n            node.removeEventListener('drop', handleDrop);\n        };\n    }\n    addEventListeners(target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.addEventListener) {\n            return;\n        }\n        target.addEventListener('dragstart', this.handleTopDragStart);\n        target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.addEventListener('dragenter', this.handleTopDragEnter);\n        target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.addEventListener('dragover', this.handleTopDragOver);\n        target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.addEventListener('drop', this.handleTopDrop);\n        target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n    removeEventListeners(target) {\n        // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n        if (!target.removeEventListener) {\n            return;\n        }\n        target.removeEventListener('dragstart', this.handleTopDragStart);\n        target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n        target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n        target.removeEventListener('dragenter', this.handleTopDragEnter);\n        target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n        target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n        target.removeEventListener('dragover', this.handleTopDragOver);\n        target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n        target.removeEventListener('drop', this.handleTopDrop);\n        target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n    getCurrentSourceNodeOptions() {\n        const sourceId = this.monitor.getSourceId();\n        const sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n        return _objectSpread({\n            dropEffect: this.altKeyPressed ? 'copy' : 'move'\n        }, sourceNodeOptions || {});\n    }\n    getCurrentDropEffect() {\n        if (this.isDraggingNativeItem()) {\n            // It makes more sense to default to 'copy' for native resources\n            return 'copy';\n        }\n        return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n    getCurrentSourcePreviewNodeOptions() {\n        const sourceId = this.monitor.getSourceId();\n        const sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n        return _objectSpread({\n            anchorX: 0.5,\n            anchorY: 0.5,\n            captureDraggingState: false\n        }, sourcePreviewNodeOptions || {});\n    }\n    isDraggingNativeItem() {\n        const itemType = this.monitor.getItemType();\n        return Object.keys(NativeTypes).some((key)=>NativeTypes[key] === itemType\n        );\n    }\n    beginDragNativeItem(type, dataTransfer) {\n        this.clearCurrentDragSourceNode();\n        this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n        this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n        this.actions.beginDrag([\n            this.currentNativeHandle\n        ]);\n    }\n    setCurrentDragSourceNode(node) {\n        this.clearCurrentDragSourceNode();\n        this.currentDragSourceNode = node;\n        // A timeout of > 0 is necessary to resolve Firefox issue referenced\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        const MOUSE_MOVE_TIMEOUT = 1000;\n        // Receiving a mouse event in the middle of a dragging operation\n        // means it has ended and the drag source node disappeared from DOM,\n        // so the browser didn't dispatch the dragend event.\n        //\n        // We need to wait before we start listening for mousemove events.\n        // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n        // immediately in some browsers.\n        //\n        // See:\n        //   * https://github.com/react-dnd/react-dnd/pull/928\n        //   * https://github.com/react-dnd/react-dnd/issues/869\n        //\n        this.mouseMoveTimeoutTimer = setTimeout(()=>{\n            var ref;\n            return (ref = this.rootElement) === null || ref === void 0 ? void 0 : ref.addEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }, MOUSE_MOVE_TIMEOUT);\n    }\n    clearCurrentDragSourceNode() {\n        if (this.currentDragSourceNode) {\n            this.currentDragSourceNode = null;\n            if (this.rootElement) {\n                var ref;\n                (ref = this.window) === null || ref === void 0 ? void 0 : ref.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n                this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n            }\n            this.mouseMoveTimeoutTimer = null;\n            return true;\n        }\n        return false;\n    }\n    handleDragStart(e, sourceId) {\n        if (e.defaultPrevented) {\n            return;\n        }\n        if (!this.dragStartSourceIds) {\n            this.dragStartSourceIds = [];\n        }\n        this.dragStartSourceIds.unshift(sourceId);\n    }\n    handleDragEnter(_e, targetId) {\n        this.dragEnterTargetIds.unshift(targetId);\n    }\n    handleDragOver(_e, targetId) {\n        if (this.dragOverTargetIds === null) {\n            this.dragOverTargetIds = [];\n        }\n        this.dragOverTargetIds.unshift(targetId);\n    }\n    handleDrop(_e, targetId) {\n        this.dropTargetIds.unshift(targetId);\n    }\n    constructor(manager, globalContext, options){\n        this.sourcePreviewNodes = new Map();\n        this.sourcePreviewNodeOptions = new Map();\n        this.sourceNodes = new Map();\n        this.sourceNodeOptions = new Map();\n        this.dragStartSourceIds = null;\n        this.dropTargetIds = [];\n        this.dragEnterTargetIds = [];\n        this.currentNativeSource = null;\n        this.currentNativeHandle = null;\n        this.currentDragSourceNode = null;\n        this.altKeyPressed = false;\n        this.mouseMoveTimeoutTimer = null;\n        this.asyncEndDragFrameId = null;\n        this.dragOverTargetIds = null;\n        this.lastClientOffset = null;\n        this.hoverRafId = null;\n        this.getSourceClientOffset = (sourceId)=>{\n            const source = this.sourceNodes.get(sourceId);\n            return source && getNodeClientOffset(source) || null;\n        };\n        this.endDragNativeItem = ()=>{\n            if (!this.isDraggingNativeItem()) {\n                return;\n            }\n            this.actions.endDrag();\n            if (this.currentNativeHandle) {\n                this.registry.removeSource(this.currentNativeHandle);\n            }\n            this.currentNativeHandle = null;\n            this.currentNativeSource = null;\n        };\n        this.isNodeInDocument = (node)=>{\n            // Check the node either in the main document or in the current context\n            return Boolean(node && this.document && this.document.body && this.document.body.contains(node));\n        };\n        this.endDragIfSourceWasRemovedFromDOM = ()=>{\n            const node = this.currentDragSourceNode;\n            if (node == null || this.isNodeInDocument(node)) {\n                return;\n            }\n            if (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n                this.actions.endDrag();\n            }\n            this.cancelHover();\n        };\n        this.scheduleHover = (dragOverTargetIds)=>{\n            if (this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n                this.hoverRafId = requestAnimationFrame(()=>{\n                    if (this.monitor.isDragging()) {\n                        this.actions.hover(dragOverTargetIds || [], {\n                            clientOffset: this.lastClientOffset\n                        });\n                    }\n                    this.hoverRafId = null;\n                });\n            }\n        };\n        this.cancelHover = ()=>{\n            if (this.hoverRafId !== null && typeof cancelAnimationFrame !== 'undefined') {\n                cancelAnimationFrame(this.hoverRafId);\n                this.hoverRafId = null;\n            }\n        };\n        this.handleTopDragStartCapture = ()=>{\n            this.clearCurrentDragSourceNode();\n            this.dragStartSourceIds = [];\n        };\n        this.handleTopDragStart = (e)=>{\n            if (e.defaultPrevented) {\n                return;\n            }\n            const { dragStartSourceIds  } = this;\n            this.dragStartSourceIds = null;\n            const clientOffset = getEventClientOffset(e);\n            // Avoid crashing if we missed a drop event or our previous drag died\n            if (this.monitor.isDragging()) {\n                this.actions.endDrag();\n                this.cancelHover();\n            }\n            // Don't publish the source just yet (see why below)\n            this.actions.beginDrag(dragStartSourceIds || [], {\n                publishSource: false,\n                getSourceClientOffset: this.getSourceClientOffset,\n                clientOffset\n            });\n            const { dataTransfer  } = e;\n            const nativeType = matchNativeItemType(dataTransfer);\n            if (this.monitor.isDragging()) {\n                if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n                    // Use custom drag image if user specifies it.\n                    // If child drag source refuses drag but parent agrees,\n                    // use parent's node as drag image. Neither works in IE though.\n                    const sourceId = this.monitor.getSourceId();\n                    const sourceNode = this.sourceNodes.get(sourceId);\n                    const dragPreview = this.sourcePreviewNodes.get(sourceId) || sourceNode;\n                    if (dragPreview) {\n                        const { anchorX , anchorY , offsetX , offsetY  } = this.getCurrentSourcePreviewNodeOptions();\n                        const anchorPoint = {\n                            anchorX,\n                            anchorY\n                        };\n                        const offsetPoint = {\n                            offsetX,\n                            offsetY\n                        };\n                        const dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n                        dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n                    }\n                }\n                try {\n                    // Firefox won't drag without setting data\n                    dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n                } catch (err) {\n                // IE doesn't support MIME types in setData\n                }\n                // Store drag source node so we can check whether\n                // it is removed from DOM and trigger endDrag manually.\n                this.setCurrentDragSourceNode(e.target);\n                // Now we are ready to publish the drag source.. or are we not?\n                const { captureDraggingState  } = this.getCurrentSourcePreviewNodeOptions();\n                if (!captureDraggingState) {\n                    // Usually we want to publish it in the next tick so that browser\n                    // is able to screenshot the current (not yet dragging) state.\n                    //\n                    // It also neatly avoids a situation where render() returns null\n                    // in the same tick for the source element, and browser freaks out.\n                    setTimeout(()=>this.actions.publishDragSource()\n                    , 0);\n                } else {\n                    // In some cases the user may want to override this behavior, e.g.\n                    // to work around IE not supporting custom drag previews.\n                    //\n                    // When using a custom drag layer, the only way to prevent\n                    // the default drag preview from drawing in IE is to screenshot\n                    // the dragging state in which the node itself has zero opacity\n                    // and height. In this case, though, returning null from render()\n                    // will abruptly end the dragging, which is not obvious.\n                    //\n                    // This is the reason such behavior is strictly opt-in.\n                    this.actions.publishDragSource();\n                }\n            } else if (nativeType) {\n                // A native item (such as URL) dragged from inside the document\n                this.beginDragNativeItem(nativeType);\n            } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n                // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n                // Just let it drag. It's a native type (URL or text) and will be picked up in\n                // dragenter handler.\n                return;\n            } else {\n                // If by this time no drag source reacted, tell browser not to drag.\n                e.preventDefault();\n            }\n        };\n        this.handleTopDragEndCapture = ()=>{\n            if (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n                // Firefox can dispatch this event in an infinite loop\n                // if dragend handler does something like showing an alert.\n                // Only proceed if we have not handled it already.\n                this.actions.endDrag();\n            }\n            this.cancelHover();\n        };\n        this.handleTopDragEnterCapture = (e)=>{\n            this.dragEnterTargetIds = [];\n            if (this.isDraggingNativeItem()) {\n                var ref;\n                (ref = this.currentNativeSource) === null || ref === void 0 ? void 0 : ref.loadDataTransfer(e.dataTransfer);\n            }\n            const isFirstEnter = this.enterLeaveCounter.enter(e.target);\n            if (!isFirstEnter || this.monitor.isDragging()) {\n                return;\n            }\n            const { dataTransfer  } = e;\n            const nativeType = matchNativeItemType(dataTransfer);\n            if (nativeType) {\n                // A native item (such as file or URL) dragged from outside the document\n                this.beginDragNativeItem(nativeType, dataTransfer);\n            }\n        };\n        this.handleTopDragEnter = (e)=>{\n            const { dragEnterTargetIds  } = this;\n            this.dragEnterTargetIds = [];\n            if (!this.monitor.isDragging()) {\n                // This is probably a native item type we don't understand.\n                return;\n            }\n            this.altKeyPressed = e.altKey;\n            // If the target changes position as the result of `dragenter`, `dragover` might still\n            // get dispatched despite target being no longer there. The easy solution is to check\n            // whether there actually is a target before firing `hover`.\n            if (dragEnterTargetIds.length > 0) {\n                this.actions.hover(dragEnterTargetIds, {\n                    clientOffset: getEventClientOffset(e)\n                });\n            }\n            const canDrop = dragEnterTargetIds.some((targetId)=>this.monitor.canDropOnTarget(targetId)\n            );\n            if (canDrop) {\n                // IE requires this to fire dragover events\n                e.preventDefault();\n                if (e.dataTransfer) {\n                    e.dataTransfer.dropEffect = this.getCurrentDropEffect();\n                }\n            }\n        };\n        this.handleTopDragOverCapture = (e)=>{\n            this.dragOverTargetIds = [];\n            if (this.isDraggingNativeItem()) {\n                var ref;\n                (ref = this.currentNativeSource) === null || ref === void 0 ? void 0 : ref.loadDataTransfer(e.dataTransfer);\n            }\n        };\n        this.handleTopDragOver = (e)=>{\n            const { dragOverTargetIds  } = this;\n            this.dragOverTargetIds = [];\n            if (!this.monitor.isDragging()) {\n                // This is probably a native item type we don't understand.\n                // Prevent default \"drop and blow away the whole document\" action.\n                e.preventDefault();\n                if (e.dataTransfer) {\n                    e.dataTransfer.dropEffect = 'none';\n                }\n                return;\n            }\n            this.altKeyPressed = e.altKey;\n            this.lastClientOffset = getEventClientOffset(e);\n            this.scheduleHover(dragOverTargetIds);\n            const canDrop = (dragOverTargetIds || []).some((targetId)=>this.monitor.canDropOnTarget(targetId)\n            );\n            if (canDrop) {\n                // Show user-specified drop effect.\n                e.preventDefault();\n                if (e.dataTransfer) {\n                    e.dataTransfer.dropEffect = this.getCurrentDropEffect();\n                }\n            } else if (this.isDraggingNativeItem()) {\n                // Don't show a nice cursor but still prevent default\n                // \"drop and blow away the whole document\" action.\n                e.preventDefault();\n            } else {\n                e.preventDefault();\n                if (e.dataTransfer) {\n                    e.dataTransfer.dropEffect = 'none';\n                }\n            }\n        };\n        this.handleTopDragLeaveCapture = (e)=>{\n            if (this.isDraggingNativeItem()) {\n                e.preventDefault();\n            }\n            const isLastLeave = this.enterLeaveCounter.leave(e.target);\n            if (!isLastLeave) {\n                return;\n            }\n            if (this.isDraggingNativeItem()) {\n                setTimeout(()=>this.endDragNativeItem()\n                , 0);\n            }\n            this.cancelHover();\n        };\n        this.handleTopDropCapture = (e)=>{\n            this.dropTargetIds = [];\n            if (this.isDraggingNativeItem()) {\n                var ref;\n                e.preventDefault();\n                (ref = this.currentNativeSource) === null || ref === void 0 ? void 0 : ref.loadDataTransfer(e.dataTransfer);\n            } else if (matchNativeItemType(e.dataTransfer)) {\n                // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n                // even if the current drag event matches a user-defined type.\n                // Stop the default behavior when we're not expecting a native item to be dropped.\n                e.preventDefault();\n            }\n            this.enterLeaveCounter.reset();\n        };\n        this.handleTopDrop = (e)=>{\n            const { dropTargetIds  } = this;\n            this.dropTargetIds = [];\n            this.actions.hover(dropTargetIds, {\n                clientOffset: getEventClientOffset(e)\n            });\n            this.actions.drop({\n                dropEffect: this.getCurrentDropEffect()\n            });\n            if (this.isDraggingNativeItem()) {\n                this.endDragNativeItem();\n            } else if (this.monitor.isDragging()) {\n                this.actions.endDrag();\n            }\n            this.cancelHover();\n        };\n        this.handleSelectStart = (e)=>{\n            const target = e.target;\n            // Only IE requires us to explicitly say\n            // we want drag drop operation to start\n            if (typeof target.dragDrop !== 'function') {\n                return;\n            }\n            // Inputs and textareas should be selectable\n            if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n                return;\n            }\n            // For other targets, ask IE\n            // to enable drag and drop\n            e.preventDefault();\n            target.dragDrop();\n        };\n        this.options = new OptionsReader(globalContext, options);\n        this.actions = manager.getActions();\n        this.monitor = manager.getMonitor();\n        this.registry = manager.getRegistry();\n        this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n    }\n}\n\n//# sourceMappingURL=HTML5BackendImpl.js.map","import { HTML5BackendImpl } from './HTML5BackendImpl.js';\nimport * as _NativeTypes from './NativeTypes.js';\nexport { getEmptyImage } from './getEmptyImage.js';\nexport { _NativeTypes as NativeTypes };\nexport const HTML5Backend = function createBackend(manager, context, options) {\n    return new HTML5BackendImpl(manager, context, options);\n};\n\n//# sourceMappingURL=index.js.map","import { useState, useCallback, useMemo, useEffect } from \"react\"\r\nimport { Chess } from 'chess.js'\r\n\r\nexport function useChessGame() {\r\n  const [chess] = useState(new Chess());\r\n  const [board, setBoard] = useState(chess.board());\r\n  const [turn, setTurn] = useState('w');\r\n  const [moveHistory, setMoveHistory] = useState([]);\r\n  \r\n  const moveSound = useMemo(() => \r\n    typeof window !== 'undefined' ? new Audio('/move.ogg') : null\r\n  , []);\r\n  \r\n  useEffect(() => {\r\n    if (moveSound) {\r\n      moveSound.preload = 'auto';\r\n    }\r\n  }, [moveSound]);\r\n  \r\n  const movePiece = useCallback((move) => {\r\n    try {\r\n      chess.move(move);\r\n      moveSound?.play();\r\n      setBoard(chess.board());\r\n      setMoveHistory(prevHistory => [...prevHistory, move]);\r\n      setTurn(chess.turn());\r\n      return true;\r\n    } catch (err) {\r\n      return false;\r\n    }\r\n  }, [chess, moveSound]);\r\n  \r\n  const undoMove = () => {\r\n    chess.undo();\r\n    setBoard(chess.board());\r\n    setMoveHistory(moveHistory.slice(0, -1));\r\n    setTurn(chess.turn());\r\n  };\r\n  \r\n  return {\r\n    chess,\r\n    board,\r\n    turn,\r\n    moveHistory,\r\n    movePiece,\r\n    undoMove\r\n  };\r\n} ","import { useEffect, useLayoutEffect } from 'react';\n// suppress the useLayoutEffect warning on server side.\nexport const useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\n//# sourceMappingURL=useIsomorphicLayoutEffect.js.map","import { useCollector } from './useCollector.js';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js';\nexport function useMonitorOutput(monitor, collect, onCollect) {\n    const [collected, updateCollected] = useCollector(monitor, collect, onCollect);\n    useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n        const handlerId = monitor.getHandlerId();\n        if (handlerId == null) {\n            return;\n        }\n        return monitor.subscribeToStateChange(updateCollected, {\n            handlerIds: [\n                handlerId\n            ]\n        });\n    }, [\n        monitor,\n        updateCollected\n    ]);\n    return collected;\n}\n\n//# sourceMappingURL=useMonitorOutput.js.map","import equal from 'fast-deep-equal';\nimport { useCallback, useState } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js';\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */ export function useCollector(monitor, collect, onUpdate) {\n    const [collected, setCollected] = useState(()=>collect(monitor)\n    );\n    const updateCollected = useCallback(()=>{\n        const nextValue = collect(monitor);\n        // This needs to be a deep-equality check because some monitor-collected values\n        // include XYCoord objects that may be equivalent, but do not have instance equality.\n        if (!equal(collected, nextValue)) {\n            setCollected(nextValue);\n            if (onUpdate) {\n                onUpdate();\n            }\n        }\n    }, [\n        collected,\n        monitor,\n        onUpdate\n    ]);\n    // update the collected properties after react renders.\n    // Note that the \"Dustbin Stress Test\" fails if this is not\n    // done when the component updates\n    useIsomorphicLayoutEffect(updateCollected);\n    return [\n        collected,\n        updateCollected\n    ];\n}\n\n//# sourceMappingURL=useCollector.js.map","import { useMonitorOutput } from './useMonitorOutput.js';\nexport function useCollectedProps(collector, monitor, connector) {\n    return useMonitorOutput(monitor, collector || (()=>({})\n    ), ()=>connector.reconnect()\n    );\n}\n\n//# sourceMappingURL=useCollectedProps.js.map","import { useMemo } from 'react';\nexport function useOptionalFactory(arg, deps) {\n    const memoDeps = [\n        ...deps || []\n    ];\n    if (deps == null && typeof arg !== 'function') {\n        memoDeps.push(arg);\n    }\n    return useMemo(()=>{\n        return typeof arg === 'function' ? arg() : arg;\n    }, memoDeps);\n}\n\n//# sourceMappingURL=useOptionalFactory.js.map","import { useMemo } from 'react';\nexport function useConnectDragSource(connector) {\n    return useMemo(()=>connector.hooks.dragSource()\n    , [\n        connector\n    ]);\n}\nexport function useConnectDragPreview(connector) {\n    return useMemo(()=>connector.hooks.dragPreview()\n    , [\n        connector\n    ]);\n}\n\n//# sourceMappingURL=connectors.js.map","export function shallowEqual(objA, objB, compare, compareContext) {\n    let compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n    if (compareResult !== void 0) {\n        return !!compareResult;\n    }\n    if (objA === objB) {\n        return true;\n    }\n    if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n        return false;\n    }\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n    if (keysA.length !== keysB.length) {\n        return false;\n    }\n    const bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n    // Test for A's keys different from B.\n    for(let idx = 0; idx < keysA.length; idx++){\n        const key = keysA[idx];\n        if (!bHasOwnProperty(key)) {\n            return false;\n        }\n        const valueA = objA[key];\n        const valueB = objB[key];\n        compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n        if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n            return false;\n        }\n    }\n    return true;\n}\n\n//# sourceMappingURL=index.js.map","export function isRef(obj) {\n    return(// eslint-disable-next-line no-prototype-builtins\n    obj !== null && typeof obj === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current'));\n}\n\n//# sourceMappingURL=isRef.js.map","import { invariant } from '@react-dnd/invariant';\nimport { cloneElement, isValidElement } from 'react';\nfunction throwIfCompositeComponentElement(element) {\n    // Custom components can no longer be wrapped directly in React DnD 2.0\n    // so that we don't need to depend on findDOMNode() from react-dom.\n    if (typeof element.type === 'string') {\n        return;\n    }\n    const displayName = element.type.displayName || element.type.name || 'the component';\n    throw new Error('Only native element nodes can now be passed to React DnD connectors.' + `You can either wrap ${displayName} into a <div>, or turn it into a ` + 'drag source or a drop target itself.');\n}\nfunction wrapHookToRecognizeElement(hook) {\n    return (elementOrNode = null, options = null)=>{\n        // When passed a node, call the hook straight away.\n        if (!isValidElement(elementOrNode)) {\n            const node = elementOrNode;\n            hook(node, options);\n            // return the node so it can be chained (e.g. when within callback refs\n            // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n            return node;\n        }\n        // If passed a ReactElement, clone it and attach this function as a ref.\n        // This helps us achieve a neat API where user doesn't even know that refs\n        // are being used under the hood.\n        const element = elementOrNode;\n        throwIfCompositeComponentElement(element);\n        // When no options are passed, use the hook directly\n        const ref = options ? (node)=>hook(node, options)\n         : hook;\n        return cloneWithRef(element, ref);\n    };\n}\nexport function wrapConnectorHooks(hooks) {\n    const wrappedHooks = {};\n    Object.keys(hooks).forEach((key)=>{\n        const hook = hooks[key];\n        // ref objects should be passed straight through without wrapping\n        if (key.endsWith('Ref')) {\n            wrappedHooks[key] = hooks[key];\n        } else {\n            const wrappedHook = wrapHookToRecognizeElement(hook);\n            wrappedHooks[key] = ()=>wrappedHook\n            ;\n        }\n    });\n    return wrappedHooks;\n}\nfunction setRef(ref, node) {\n    if (typeof ref === 'function') {\n        ref(node);\n    } else {\n        ref.current = node;\n    }\n}\nfunction cloneWithRef(element, newRef) {\n    const previousRef = element.ref;\n    invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n    if (!previousRef) {\n        // When there is no ref on the element, use the new ref directly\n        return cloneElement(element, {\n            ref: newRef\n        });\n    } else {\n        return cloneElement(element, {\n            ref: (node)=>{\n                setRef(previousRef, node);\n                setRef(newRef, node);\n            }\n        });\n    }\n}\n\n//# sourceMappingURL=wrapConnectorHooks.js.map","import { shallowEqual } from '@react-dnd/shallowequal';\nimport { isRef } from './isRef.js';\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js';\nexport class SourceConnector {\n    receiveHandlerId(newHandlerId) {\n        if (this.handlerId === newHandlerId) {\n            return;\n        }\n        this.handlerId = newHandlerId;\n        this.reconnect();\n    }\n    get connectTarget() {\n        return this.dragSource;\n    }\n    get dragSourceOptions() {\n        return this.dragSourceOptionsInternal;\n    }\n    set dragSourceOptions(options) {\n        this.dragSourceOptionsInternal = options;\n    }\n    get dragPreviewOptions() {\n        return this.dragPreviewOptionsInternal;\n    }\n    set dragPreviewOptions(options) {\n        this.dragPreviewOptionsInternal = options;\n    }\n    reconnect() {\n        const didChange = this.reconnectDragSource();\n        this.reconnectDragPreview(didChange);\n    }\n    reconnectDragSource() {\n        const dragSource = this.dragSource;\n        // if nothing has changed then don't resubscribe\n        const didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n        if (didChange) {\n            this.disconnectDragSource();\n        }\n        if (!this.handlerId) {\n            return didChange;\n        }\n        if (!dragSource) {\n            this.lastConnectedDragSource = dragSource;\n            return didChange;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDragSource = dragSource;\n            this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n            this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n        }\n        return didChange;\n    }\n    reconnectDragPreview(forceDidChange = false) {\n        const dragPreview = this.dragPreview;\n        // if nothing has changed then don't resubscribe\n        const didChange = forceDidChange || this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n        if (didChange) {\n            this.disconnectDragPreview();\n        }\n        if (!this.handlerId) {\n            return;\n        }\n        if (!dragPreview) {\n            this.lastConnectedDragPreview = dragPreview;\n            return;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDragPreview = dragPreview;\n            this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n            this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n        }\n    }\n    didHandlerIdChange() {\n        return this.lastConnectedHandlerId !== this.handlerId;\n    }\n    didConnectedDragSourceChange() {\n        return this.lastConnectedDragSource !== this.dragSource;\n    }\n    didConnectedDragPreviewChange() {\n        return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n    didDragSourceOptionsChange() {\n        return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n    didDragPreviewOptionsChange() {\n        return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n    disconnectDragSource() {\n        if (this.dragSourceUnsubscribe) {\n            this.dragSourceUnsubscribe();\n            this.dragSourceUnsubscribe = undefined;\n        }\n    }\n    disconnectDragPreview() {\n        if (this.dragPreviewUnsubscribe) {\n            this.dragPreviewUnsubscribe();\n            this.dragPreviewUnsubscribe = undefined;\n            this.dragPreviewNode = null;\n            this.dragPreviewRef = null;\n        }\n    }\n    get dragSource() {\n        return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n    get dragPreview() {\n        return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n    clearDragSource() {\n        this.dragSourceNode = null;\n        this.dragSourceRef = null;\n    }\n    clearDragPreview() {\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n    }\n    constructor(backend){\n        this.hooks = wrapConnectorHooks({\n            dragSource: (node, options)=>{\n                this.clearDragSource();\n                this.dragSourceOptions = options || null;\n                if (isRef(node)) {\n                    this.dragSourceRef = node;\n                } else {\n                    this.dragSourceNode = node;\n                }\n                this.reconnectDragSource();\n            },\n            dragPreview: (node, options)=>{\n                this.clearDragPreview();\n                this.dragPreviewOptions = options || null;\n                if (isRef(node)) {\n                    this.dragPreviewRef = node;\n                } else {\n                    this.dragPreviewNode = node;\n                }\n                this.reconnectDragPreview();\n            }\n        });\n        this.handlerId = null;\n        // The drop target may either be attached via ref or connect function\n        this.dragSourceRef = null;\n        this.dragSourceOptionsInternal = null;\n        // The drag preview may either be attached via ref or connect function\n        this.dragPreviewRef = null;\n        this.dragPreviewOptionsInternal = null;\n        this.lastConnectedHandlerId = null;\n        this.lastConnectedDragSource = null;\n        this.lastConnectedDragSourceOptions = null;\n        this.lastConnectedDragPreview = null;\n        this.lastConnectedDragPreviewOptions = null;\n        this.backend = backend;\n    }\n}\n\n//# sourceMappingURL=SourceConnector.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useContext } from 'react';\nimport { DndContext } from '../core/index.js';\n/**\n * A hook to retrieve the DragDropManager from Context\n */ export function useDragDropManager() {\n    const { dragDropManager  } = useContext(DndContext);\n    invariant(dragDropManager != null, 'Expected drag drop context');\n    return dragDropManager;\n}\n\n//# sourceMappingURL=useDragDropManager.js.map","import { invariant } from '@react-dnd/invariant';\nlet isCallingCanDrag = false;\nlet isCallingIsDragging = false;\nexport class DragSourceMonitorImpl {\n    receiveHandlerId(sourceId) {\n        this.sourceId = sourceId;\n    }\n    getHandlerId() {\n        return this.sourceId;\n    }\n    canDrag() {\n        invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n        try {\n            isCallingCanDrag = true;\n            return this.internalMonitor.canDragSource(this.sourceId);\n        } finally{\n            isCallingCanDrag = false;\n        }\n    }\n    isDragging() {\n        if (!this.sourceId) {\n            return false;\n        }\n        invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n        try {\n            isCallingIsDragging = true;\n            return this.internalMonitor.isDraggingSource(this.sourceId);\n        } finally{\n            isCallingIsDragging = false;\n        }\n    }\n    subscribeToStateChange(listener, options) {\n        return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n    isDraggingSource(sourceId) {\n        return this.internalMonitor.isDraggingSource(sourceId);\n    }\n    isOverTarget(targetId, options) {\n        return this.internalMonitor.isOverTarget(targetId, options);\n    }\n    getTargetIds() {\n        return this.internalMonitor.getTargetIds();\n    }\n    isSourcePublic() {\n        return this.internalMonitor.isSourcePublic();\n    }\n    getSourceId() {\n        return this.internalMonitor.getSourceId();\n    }\n    subscribeToOffsetChange(listener) {\n        return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n    canDragSource(sourceId) {\n        return this.internalMonitor.canDragSource(sourceId);\n    }\n    canDropOnTarget(targetId) {\n        return this.internalMonitor.canDropOnTarget(targetId);\n    }\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n    getItem() {\n        return this.internalMonitor.getItem();\n    }\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n    constructor(manager){\n        this.sourceId = null;\n        this.internalMonitor = manager.getMonitor();\n    }\n}\n\n//# sourceMappingURL=DragSourceMonitorImpl.js.map","export class DragSourceImpl {\n    beginDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        let result = null;\n        if (typeof spec.item === 'object') {\n            result = spec.item;\n        } else if (typeof spec.item === 'function') {\n            result = spec.item(monitor);\n        } else {\n            result = {};\n        }\n        return result !== null && result !== void 0 ? result : null;\n    }\n    canDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (typeof spec.canDrag === 'boolean') {\n            return spec.canDrag;\n        } else if (typeof spec.canDrag === 'function') {\n            return spec.canDrag(monitor);\n        } else {\n            return true;\n        }\n    }\n    isDragging(globalMonitor, target) {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        const { isDragging  } = spec;\n        return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n    endDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        const connector = this.connector;\n        const { end  } = spec;\n        if (end) {\n            end(monitor.getItem(), monitor);\n        }\n        connector.reconnect();\n    }\n    constructor(spec, monitor, connector){\n        this.spec = spec;\n        this.monitor = monitor;\n        this.connector = connector;\n    }\n}\n\n//# sourceMappingURL=DragSourceImpl.js.map","import { registerSource } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nimport { useDragSource } from './useDragSource.js';\nimport { useDragType } from './useDragType.js';\nexport function useRegisteredDragSource(spec, monitor, connector) {\n    const manager = useDragDropManager();\n    const handler = useDragSource(spec, monitor, connector);\n    const itemType = useDragType(spec);\n    useIsomorphicLayoutEffect(function registerDragSource() {\n        if (itemType != null) {\n            const [handlerId, unregister] = registerSource(itemType, handler, manager);\n            monitor.receiveHandlerId(handlerId);\n            connector.receiveHandlerId(handlerId);\n            return unregister;\n        }\n        return;\n    }, [\n        manager,\n        monitor,\n        connector,\n        handler,\n        itemType\n    ]);\n}\n\n//# sourceMappingURL=useRegisteredDragSource.js.map","import { useEffect, useMemo } from 'react';\nimport { DragSourceImpl } from './DragSourceImpl.js';\nexport function useDragSource(spec, monitor, connector) {\n    const handler = useMemo(()=>new DragSourceImpl(spec, monitor, connector)\n    , [\n        monitor,\n        connector\n    ]);\n    useEffect(()=>{\n        handler.spec = spec;\n    }, [\n        spec\n    ]);\n    return handler;\n}\n\n//# sourceMappingURL=useDragSource.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\nexport function useDragType(spec) {\n    return useMemo(()=>{\n        const result = spec.type;\n        invariant(result != null, 'spec.type must be defined');\n        return result;\n    }, [\n        spec\n    ]);\n}\n\n//# sourceMappingURL=useDragType.js.map","export function registerTarget(type, target, manager) {\n    const registry = manager.getRegistry();\n    const targetId = registry.addTarget(type, target);\n    return [\n        targetId,\n        ()=>registry.removeTarget(targetId)\n    ];\n}\nexport function registerSource(type, source, manager) {\n    const registry = manager.getRegistry();\n    const sourceId = registry.addSource(type, source);\n    return [\n        sourceId,\n        ()=>registry.removeSource(sourceId)\n    ];\n}\n\n//# sourceMappingURL=registration.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useCollectedProps } from '../useCollectedProps.js';\nimport { useOptionalFactory } from '../useOptionalFactory.js';\nimport { useConnectDragPreview, useConnectDragSource } from './connectors.js';\nimport { useDragSourceConnector } from './useDragSourceConnector.js';\nimport { useDragSourceMonitor } from './useDragSourceMonitor.js';\nimport { useRegisteredDragSource } from './useRegisteredDragSource.js';\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */ export function useDrag(specArg, deps) {\n    const spec = useOptionalFactory(specArg, deps);\n    invariant(!spec.begin, `useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`);\n    const monitor = useDragSourceMonitor();\n    const connector = useDragSourceConnector(spec.options, spec.previewOptions);\n    useRegisteredDragSource(spec, monitor, connector);\n    return [\n        useCollectedProps(spec.collect, monitor, connector),\n        useConnectDragSource(connector),\n        useConnectDragPreview(connector), \n    ];\n}\n\n//# sourceMappingURL=useDrag.js.map","import { useMemo } from 'react';\nimport { DragSourceMonitorImpl } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nexport function useDragSourceMonitor() {\n    const manager = useDragDropManager();\n    return useMemo(()=>new DragSourceMonitorImpl(manager)\n    , [\n        manager\n    ]);\n}\n\n//# sourceMappingURL=useDragSourceMonitor.js.map","import { useMemo } from 'react';\nimport { SourceConnector } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nexport function useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n    const manager = useDragDropManager();\n    const connector = useMemo(()=>new SourceConnector(manager.getBackend())\n    , [\n        manager\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dragSourceOptions = dragSourceOptions || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDragSource()\n        ;\n    }, [\n        connector,\n        dragSourceOptions\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dragPreviewOptions = dragPreviewOptions || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDragPreview()\n        ;\n    }, [\n        connector,\n        dragPreviewOptions\n    ]);\n    return connector;\n}\n\n//# sourceMappingURL=useDragSourceConnector.js.map","import * as React from \"react\"\r\nimport { graphql, useStaticQuery } from \"gatsby\";\r\nimport { GatsbyImage } from \"gatsby-plugin-image\";\r\n\r\nconst ChessPiece = ({ piece }) => {\r\n    const data = useStaticQuery(graphql`\r\n      query {\r\n        allFile {\r\n          nodes {\r\n            relativePath\r\n            publicURL\r\n            childImageSharp {\r\n              gatsbyImageData(\r\n                width: 50\r\n                height: 50\r\n                placeholder: NONE\r\n                formats: [AUTO, WEBP]\r\n              )\r\n            }\r\n          }\r\n        }\r\n      }\r\n    `);\r\n    \r\n    const key = `${piece.color}${piece.type}`;\r\n    const image = data?.allFile?.nodes.find(node => node.relativePath === `${key}.png`);\r\n\r\n  return <GatsbyImage image={image?.childImageSharp?.gatsbyImageData} alt={key} />;\r\n}\r\n\r\nexport default ChessPiece; ","import * as React from \"react\"\r\nimport { useDrag } from 'react-dnd'\r\nimport ChessPiece from './ChessPiece'\r\n\r\nconst DraggablePiece = ({ piece, square, addHighlights, removeHighlights }) => {\r\n  let highlight = false;\r\n  const [{ isDragging }, drag] = useDrag(() => ({\r\n    type: 'CHESS_PIECE',\r\n    item: () => {\r\n      if (!highlight) {\r\n        addHighlights(square);\r\n        highlight = true;\r\n      }\r\n      return { piece, square };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: !!monitor.isDragging(),\r\n    }),\r\n    end: (item, monitor) => {\r\n      removeHighlights();\r\n      highlight = false;\r\n    }\r\n  }));\r\n\r\n  return (\r\n    <div\r\n      ref={drag.bind(this)}\r\n      style={{\r\n        opacity: isDragging ? 0.2 : 1\r\n      }}\r\n    >\r\n      <ChessPiece piece={piece} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DraggablePiece ","import { useMemo } from 'react';\nexport function useConnectDropTarget(connector) {\n    return useMemo(()=>connector.hooks.dropTarget()\n    , [\n        connector\n    ]);\n}\n\n//# sourceMappingURL=connectors.js.map","import { shallowEqual } from '@react-dnd/shallowequal';\nimport { isRef } from './isRef.js';\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js';\nexport class TargetConnector {\n    get connectTarget() {\n        return this.dropTarget;\n    }\n    reconnect() {\n        // if nothing has changed then don't resubscribe\n        const didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n        if (didChange) {\n            this.disconnectDropTarget();\n        }\n        const dropTarget = this.dropTarget;\n        if (!this.handlerId) {\n            return;\n        }\n        if (!dropTarget) {\n            this.lastConnectedDropTarget = dropTarget;\n            return;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDropTarget = dropTarget;\n            this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n            this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n        }\n    }\n    receiveHandlerId(newHandlerId) {\n        if (newHandlerId === this.handlerId) {\n            return;\n        }\n        this.handlerId = newHandlerId;\n        this.reconnect();\n    }\n    get dropTargetOptions() {\n        return this.dropTargetOptionsInternal;\n    }\n    set dropTargetOptions(options) {\n        this.dropTargetOptionsInternal = options;\n    }\n    didHandlerIdChange() {\n        return this.lastConnectedHandlerId !== this.handlerId;\n    }\n    didDropTargetChange() {\n        return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n    didOptionsChange() {\n        return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n    disconnectDropTarget() {\n        if (this.unsubscribeDropTarget) {\n            this.unsubscribeDropTarget();\n            this.unsubscribeDropTarget = undefined;\n        }\n    }\n    get dropTarget() {\n        return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n    clearDropTarget() {\n        this.dropTargetRef = null;\n        this.dropTargetNode = null;\n    }\n    constructor(backend){\n        this.hooks = wrapConnectorHooks({\n            dropTarget: (node, options)=>{\n                this.clearDropTarget();\n                this.dropTargetOptions = options;\n                if (isRef(node)) {\n                    this.dropTargetRef = node;\n                } else {\n                    this.dropTargetNode = node;\n                }\n                this.reconnect();\n            }\n        });\n        this.handlerId = null;\n        // The drop target may either be attached via ref or connect function\n        this.dropTargetRef = null;\n        this.dropTargetOptionsInternal = null;\n        this.lastConnectedHandlerId = null;\n        this.lastConnectedDropTarget = null;\n        this.lastConnectedDropTargetOptions = null;\n        this.backend = backend;\n    }\n}\n\n//# sourceMappingURL=TargetConnector.js.map","import { invariant } from '@react-dnd/invariant';\nlet isCallingCanDrop = false;\nexport class DropTargetMonitorImpl {\n    receiveHandlerId(targetId) {\n        this.targetId = targetId;\n    }\n    getHandlerId() {\n        return this.targetId;\n    }\n    subscribeToStateChange(listener, options) {\n        return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n    canDrop() {\n        // Cut out early if the target id has not been set. This should prevent errors\n        // where the user has an older version of dnd-core like in\n        // https://github.com/react-dnd/react-dnd/issues/1310\n        if (!this.targetId) {\n            return false;\n        }\n        invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n        try {\n            isCallingCanDrop = true;\n            return this.internalMonitor.canDropOnTarget(this.targetId);\n        } finally{\n            isCallingCanDrop = false;\n        }\n    }\n    isOver(options) {\n        if (!this.targetId) {\n            return false;\n        }\n        return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n    getItem() {\n        return this.internalMonitor.getItem();\n    }\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n    constructor(manager){\n        this.targetId = null;\n        this.internalMonitor = manager.getMonitor();\n    }\n}\n\n//# sourceMappingURL=DropTargetMonitorImpl.js.map","export class DropTargetImpl {\n    canDrop() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n    hover() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (spec.hover) {\n            spec.hover(monitor.getItem(), monitor);\n        }\n    }\n    drop() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (spec.drop) {\n            return spec.drop(monitor.getItem(), monitor);\n        }\n        return;\n    }\n    constructor(spec, monitor){\n        this.spec = spec;\n        this.monitor = monitor;\n    }\n}\n\n//# sourceMappingURL=DropTargetImpl.js.map","import { registerTarget } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nimport { useAccept } from './useAccept.js';\nimport { useDropTarget } from './useDropTarget.js';\nexport function useRegisteredDropTarget(spec, monitor, connector) {\n    const manager = useDragDropManager();\n    const dropTarget = useDropTarget(spec, monitor);\n    const accept = useAccept(spec);\n    useIsomorphicLayoutEffect(function registerDropTarget() {\n        const [handlerId, unregister] = registerTarget(accept, dropTarget, manager);\n        monitor.receiveHandlerId(handlerId);\n        connector.receiveHandlerId(handlerId);\n        return unregister;\n    }, [\n        manager,\n        monitor,\n        dropTarget,\n        connector,\n        accept.map((a)=>a.toString()\n        ).join('|'), \n    ]);\n}\n\n//# sourceMappingURL=useRegisteredDropTarget.js.map","import { useEffect, useMemo } from 'react';\nimport { DropTargetImpl } from './DropTargetImpl.js';\nexport function useDropTarget(spec, monitor) {\n    const dropTarget = useMemo(()=>new DropTargetImpl(spec, monitor)\n    , [\n        monitor\n    ]);\n    useEffect(()=>{\n        dropTarget.spec = spec;\n    }, [\n        spec\n    ]);\n    return dropTarget;\n}\n\n//# sourceMappingURL=useDropTarget.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */ export function useAccept(spec) {\n    const { accept  } = spec;\n    return useMemo(()=>{\n        invariant(spec.accept != null, 'accept must be defined');\n        return Array.isArray(accept) ? accept : [\n            accept\n        ];\n    }, [\n        accept\n    ]);\n}\n\n//# sourceMappingURL=useAccept.js.map","import { useCollectedProps } from '../useCollectedProps.js';\nimport { useOptionalFactory } from '../useOptionalFactory.js';\nimport { useConnectDropTarget } from './connectors.js';\nimport { useDropTargetConnector } from './useDropTargetConnector.js';\nimport { useDropTargetMonitor } from './useDropTargetMonitor.js';\nimport { useRegisteredDropTarget } from './useRegisteredDropTarget.js';\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */ export function useDrop(specArg, deps) {\n    const spec = useOptionalFactory(specArg, deps);\n    const monitor = useDropTargetMonitor();\n    const connector = useDropTargetConnector(spec.options);\n    useRegisteredDropTarget(spec, monitor, connector);\n    return [\n        useCollectedProps(spec.collect, monitor, connector),\n        useConnectDropTarget(connector), \n    ];\n}\n\n//# sourceMappingURL=useDrop.js.map","import { useMemo } from 'react';\nimport { DropTargetMonitorImpl } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nexport function useDropTargetMonitor() {\n    const manager = useDragDropManager();\n    return useMemo(()=>new DropTargetMonitorImpl(manager)\n    , [\n        manager\n    ]);\n}\n\n//# sourceMappingURL=useDropTargetMonitor.js.map","import { useMemo } from 'react';\nimport { TargetConnector } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nexport function useDropTargetConnector(options) {\n    const manager = useDragDropManager();\n    const connector = useMemo(()=>new TargetConnector(manager.getBackend())\n    , [\n        manager\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dropTargetOptions = options || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDropTarget()\n        ;\n    }, [\n        options\n    ]);\n    return connector;\n}\n\n//# sourceMappingURL=useDropTargetConnector.js.map","import * as React from 'react';\r\nimport { useDrop } from 'react-dnd';\r\n\r\nconst DroppableSquare = ({ \r\n  square, \r\n  children, \r\n  onDrop, \r\n  onClick, \r\n  isHighlighted, \r\n  isSelected, \r\n  isPromotion }) => {\r\n  const [{ isOver }, drop] = useDrop(() => ({\r\n    accept: 'CHESS_PIECE',\r\n    drop: (item) => {\r\n      onDrop(item.square, square);\r\n    },\r\n    collect: (monitor) => ({\r\n      isOver: !!monitor.isOver(),\r\n    }),\r\n  }));\r\n\r\n  return (\r\n    <div \r\n      ref={drop}\r\n      data-square={square}\r\n      aria-label={square}\r\n      aria-roledescription=\"Square\"\r\n      role=\"button\"\r\n      tabIndex={0}\r\n      className={\r\n        `cellStyle\r\n        ${isOver ? 'drop-hover' : ''}\r\n        ${isHighlighted ? 'highlight' : ''}\r\n        ${isSelected ? 'selected' : ''}\r\n        ${isPromotion ? 'promotion' : ''}`}\r\n      onClick={() => onClick(square)}\r\n      onKeyDown={(e) => {\r\n        if (e.key === 'Enter' || e.key === ' ') {\r\n          onClick(square);\r\n        }\r\n      }}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DroppableSquare ","import * as React from \"react\";\r\nimport \"./chess-board.css\";\r\nimport { useState } from \"react\";\r\nimport { SQUARES } from 'chess.js';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { useChessGame } from '../hooks/useChessGame';\r\nimport DraggablePiece from './DraggablePiece';\r\nimport DroppableSquare from './DroppableSquare';\r\n\r\nconst Board = () => {\r\n  const { \r\n    board, \r\n    turn, \r\n    moveHistory, \r\n    movePiece, \r\n    undoMove,\r\n    chess \r\n  } = useChessGame();\r\n\r\n  const [legalMoves, setLegalMoves] = useState([]);\r\n  const [promotionMove, setPromotionMove] = useState(null);\r\n  const [highlightedSquares, setHighlightedSquares] = useState([]);\r\n  const [selectedSquare, setSelectedSquare] = useState(null);\r\n  const [promotionSquares, setPromotionSquares] = useState([]);\r\n\r\n  const checkGameOver = () => {\r\n    const gameOver = chess.isGameOver();\r\n    if (gameOver) {\r\n      const isCheckmate = chess.isCheckmate();\r\n      const isStalemate = chess.isStalemate();\r\n      const isDraw = chess.isDraw();\r\n      const isThreefoldRepetition = chess.isThreefoldRepetition();\r\n      const isFiftyMoves = chess.isDrawByFiftyMoves();\r\n      const isInsufficientMaterial = chess.isInsufficientMaterial();\r\n      if (isCheckmate) {\r\n        const winner = chess.turn() === 'w' ? 'Black' : 'White';\r\n        alert('Game over, ' + winner + ' wins');\r\n      } else if (isStalemate) {\r\n        alert('Game over, stalemate');\r\n      } else if (isDraw) {\r\n        alert('Game over, draw');\r\n      } else if (isThreefoldRepetition) {\r\n        alert('Game over, threefold repetition');\r\n      } else if (isFiftyMoves) {\r\n        alert('Game over, fifty moves');\r\n      } else if (isInsufficientMaterial) {\r\n        alert('Game over, insufficient material');\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleMovePiece = (move) => {\r\n    if (movePiece(move)) {\r\n      checkGameOver();\r\n    }\r\n  };\r\n\r\n  const removeHighlights = () => {\r\n    setHighlightedSquares([]);\r\n    setSelectedSquare(null);\r\n    setPromotionSquares([]);\r\n    setLegalMoves([]);\r\n  }\r\n\r\n  const getSquareFromMove = (move) => {\r\n    if (move.includes('O-O-O')) {\r\n      return chess.turn() === 'w' ? 'c1' : 'c8';\r\n    }\r\n    if (move.includes('O-O')) {\r\n      return chess.turn() === 'w' ? 'g1' : 'g8';\r\n    }\r\n\r\n    // Remove check/checkmate indicators\r\n    let cleanMove = move.replace(/[+#]/g, '');\r\n  \r\n    if (cleanMove.includes('=')) {\r\n      cleanMove = cleanMove.substring(0, cleanMove.indexOf('='));\r\n    }\r\n    \r\n    const square = cleanMove.slice(-2);\r\n    \r\n    // Validate that it's a proper square (a1-h8)\r\n    const validSquare = /^[a-h][1-8]$/.test(square);\r\n    return validSquare ? square : null;\r\n  }\r\n\r\n  const highlightMoves = (square) => {\r\n    // removeHighlights();\r\n    if(!square) return;\r\n\r\n    setSelectedSquare(square);\r\n\r\n    const moves = chess.moves({square});\r\n    setLegalMoves(moves);\r\n\r\n    moves.forEach(move => {\r\n      const isPromotion = move.includes('=');\r\n      const isCastle = move.includes('O-O');\r\n      if (isPromotion) {\r\n        const promotionSquare = getSquareFromMove(move);\r\n        setPromotionSquares([promotionSquare]);\r\n      } else if (isCastle) {\r\n        const isLongCastle = move.includes('O-O-O');\r\n        const turn = chess.turn();\r\n        let kingSquare = turn === 'w' ? 'g1' : 'g8';    \r\n        if (isLongCastle) {\r\n          kingSquare = turn === 'w' ? 'c1' : 'c8';\r\n        }\r\n        setHighlightedSquares(prevHighlights => [...prevHighlights, kingSquare]);\r\n      } else {\r\n        const justSquare = getSquareFromMove(move);\r\n        setHighlightedSquares(prevHighlights => [...prevHighlights, justSquare]);\r\n      }\r\n    });\r\n  };\r\n\r\n  const isMovePromotion = (move) => {\r\n    const piece = chess.get(selectedSquare);\r\n    if(!piece) return false;\r\n    const isPawn = piece && piece.type === 'p';\r\n    const isLastRank = (piece.color === 'w' && move[1] === '8') || \r\n                        (piece.color === 'b' && move[1] === '1');\r\n    return isPawn && isLastRank;\r\n  }\r\n\r\n  const handleCellClick = (square) => {\r\n    if(!square) return;\r\n    \r\n    // If we have a promotion in progress, ignore new clicks\r\n    if (promotionMove) return;\r\n    \r\n    setLegalMoves([]);\r\n    removeHighlights();\r\n    \r\n    if(selectedSquare) {\r\n      const targetSquare = chess.get(square);\r\n      \r\n      if (!targetSquare) {\r\n        if (isMovePromotion(square)) {\r\n          setPromotionMove({ from: selectedSquare, to: square });\r\n        } else {\r\n          setSelectedSquare(null);\r\n          handleMovePiece({ from: selectedSquare, to: square });\r\n        }\r\n      } else {\r\n        if (targetSquare.color === chess.turn()) {\r\n          return;\r\n        } else {\r\n          if (isMovePromotion(square)) {\r\n            setPromotionMove({ from: selectedSquare, to: square });\r\n          } else {\r\n            handleMovePiece({ from: selectedSquare, to: square });\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      highlightMoves(square);\r\n    }\r\n  };\r\n\r\n  const handlePromotion = (pieceType) => {\r\n    if (!pieceType || !promotionMove) {\r\n      setPromotionMove(null);\r\n      return;\r\n    }\r\n\r\n    handleMovePiece({\r\n      ...promotionMove,\r\n      promotion: pieceType\r\n    });\r\n\r\n    setPromotionMove(null);\r\n  };\r\n\r\n  const handleDrop = (fromSquare, toSquare) => {\r\n    if (fromSquare === toSquare) return;\r\n    \r\n    const piece = chess.get(fromSquare);\r\n    if (!piece) return;\r\n    \r\n    // Check for promotion\r\n    if (piece.type === 'p') {\r\n      const isLastRank = (piece.color === 'w' && toSquare[1] === '8') || \r\n                         (piece.color === 'b' && toSquare[1] === '1');\r\n      if (isLastRank) {\r\n        setPromotionMove({ from: fromSquare, to: toSquare });\r\n        return;\r\n      }\r\n    }\r\n    \r\n    handleMovePiece({ \r\n      from: fromSquare, \r\n      to: toSquare \r\n    });\r\n    \r\n    setSelectedSquare(null);\r\n    removeHighlights();\r\n  };\r\n\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <div className=\"boardComponent\">\r\n        <div className=\"boardContainer\">\r\n          <div className=\"boardStyle\">\r\n            {\r\n            board.map((row, rowIndex) => (\r\n              <div key={rowIndex} className=\"rowStyle\">\r\n                {row.map((cell, cellIndex) => {\r\n                  const index = rowIndex * 8 + cellIndex;\r\n                  const square = SQUARES[index];\r\n                  return (\r\n                    <DroppableSquare \r\n                      key={cellIndex}\r\n                      square={square}\r\n                      onDrop={handleDrop}\r\n                      onClick={handleCellClick}\r\n                      isSelected={selectedSquare === square}\r\n                      isHighlighted={highlightedSquares.includes(square)}\r\n                      isPromotion={promotionSquares.includes(square)}\r\n                    >\r\n                      {cell?.type && (\r\n                        <DraggablePiece \r\n                          piece={{type: cell.type, color: cell.color}} \r\n                          square={square}\r\n                          addHighlights={highlightMoves.bind(this, square)}\r\n                          removeHighlights={removeHighlights.bind(this, square)}\r\n                        />\r\n                      )}\r\n                    </DroppableSquare>\r\n                  );\r\n                })}\r\n                <div className=\"coordinateLabel rankLabel\">{8 - rowIndex}</div>\r\n              </div>\r\n            ))}\r\n            <div className=\"rowStyle fileLabels\">\r\n              {['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'].map((file, index) => (\r\n                <div key={index} className=\"coordinateLabel fileLabel\">{file}</div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"infoContainer\">\r\n          <p className=\"turn\">Turn: {turn}</p>\r\n          <p className=\"selectedCell\">Selected: {selectedSquare}</p>\r\n          <div className=\"legalMoves\">\r\n            <p>Legal Moves:</p>\r\n            {legalMoves.map((move, index) => (\r\n              <span key={index}>{move} </span>\r\n            ))}\r\n          </div>\r\n          <div className=\"moveHistory\">\r\n            <p>Move History:</p>\r\n            <div className=\"moveHistoryList\">\r\n              {moveHistory.map((move, index) => (\r\n                <span className=\"move\" key={index}>{move.from} {move.to} </span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <button onClick={() => {\r\n            undoMove();\r\n          }}>Undo</button>\r\n          \r\n          {promotionMove && (\r\n            <div className=\"promotionDialog\">\r\n              <p>Choose promotion piece:</p>\r\n              <select \r\n                onChange={(e) => handlePromotion(e.target.value)}\r\n                defaultValue=\"\"\r\n              >\r\n                <option value=\"\" disabled>Select a piece</option>\r\n                <option value=\"q\">Queen</option>\r\n                <option value=\"r\">Rook</option>\r\n                <option value=\"b\">Bishop</option>\r\n                <option value=\"n\">Knight</option>\r\n              </select>\r\n              <button onClick={() => handlePromotion(null)}>Cancel</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </DndProvider>\r\n  )\r\n}\r\n\r\nexport default Board;\r\n","import React, { createContext, useContext } from 'react';\r\nimport { useChessGame } from '../hooks/useChessGame';\r\n\r\nconst ChessContext = createContext();\r\n\r\nexport function ChessProvider({ children }) {\r\n  const chessGame = useChessGame();\r\n  \r\n  return (\r\n    <ChessContext.Provider value={chessGame}>\r\n      {children}\r\n    </ChessContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useChessContext() {\r\n  return useContext(ChessContext);\r\n} ","import * as React from \"react\"\r\nimport { Link } from \"gatsby\"\r\nimport Board from \"../components/chess-board\"\r\nimport { ChessProvider } from \"../context/ChessContext\"\r\n\r\nconst IndexPage = () => (\r\n  <ChessProvider>\r\n    <main style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", justifyContent: \"center\"}}>\r\n      <h1>Quick Chess</h1>\r\n      <Board />\r\n      <Link to=\"/about\" style={{ marginTop: \"20px\", color: \"white\" }}>About</Link>\r\n    </main>\r\n  </ChessProvider>\r\n)\r\n\r\nexport default IndexPage\r\n\r\nexport const Head = () => <title>quick-chess</title>"],"names":["UPPERCASE","LOWERCASE","LEADING_CAPITAL","IDENTIFIER","SEPARATORS","LEADING_SEPARATORS","RegExp","source","SEPARATORS_AND_IDENTIFIER","NUMBERS_AND_IDENTIFIER","camelCase","input","options","Array","isArray","TypeError","pascalCase","preserveConsecutiveUppercase","map","x","trim","filter","length","join","toLowerCase","locale","string","toLocaleLowerCase","toUpperCase","toLocaleUpperCase","isLastCharLower","isLastCharUpper","isLastLastCharUpper","i","character","test","slice","preserveCamelCase","replace","lastIndex","m1","charAt","_","identifier","m","postProcess","module","exports","equal","a","b","constructor","keys","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","hasNativeLazyLoadSupport","HTMLImageElement","srcSet","width","height","layout","wrapperStyle","className","style","getMainProps","isLoading","isLoaded","images","loading","shouldLoad","_extends","opacity","getPlaceholderProps","placeholder","backgroundColor","objectFit","objectPosition","position","top","left","bottom","right","result","transition","Sizer","React","createElement","paddingTop","maxWidth","display","alt","role","src","LayoutWrapper","_ref","children","props","_objectWithoutPropertiesLoose","Fragment","Image","decoding","Picture","_ref2","fallback","sources","sizes","media","type","fallbackImage","propTypes","PropTypes","isRequired","displayName","Placeholder","_Picture$propTypes","propName","componentName","Error","MainImage","removeNewLines","str","altValidator","rest","image","_excluded","Set","renderImageToStringPromise","renderImage","GatsbyImageHydrator","as","class","preactClass","onStartLoad","onLoad","onError","getWrapperProps","wStyle","wClass","wrapperProps","root","useRef","useMemo","JSON","stringify","sizer","useEffect","import","then","renderImageToString","swapPlaceholderImage","ssrImage","current","querySelector","complete","wasCached","setTimeout","removeAttribute","addEventListener","removeEventListener","onLoadListener","imageCache","add","cacheKey","has","animationFrame","cleanupCallback","innerHTML","requestAnimationFrame","cancelAnimationFrame","useLayoutEffect","ref","dangerouslySetInnerHTML","__html","suppressHydrationWarning","GatsbyImage","memo","_getStaticImage","StaticImage","__imageData","imageData","__error","console","warn","imgClassName","imgStyle","placeholderBackgroundColor","cleanedImages","checkDimensionProps","number","validLayouts","GatsbyImageBrowser","WHITE","BLACK","PAWN","BISHOP","ROOK","QUEEN","KING","DEFAULT_POSITION","Move","color","from","to","piece","captured","promotion","san","lan","before","after","chess","internal","fromAlgebraic","algebraic","toAlgebraic","this","legal","fen","flag","BITS","FLAGS","isCapture","indexOf","isPromotion","isEnPassant","isKingsideCastle","isQueensideCastle","isBigPawn","EMPTY","NORMAL","CAPTURE","BIG_PAWN","EP_CAPTURE","PROMOTION","KSIDE_CASTLE","QSIDE_CASTLE","SQUARES","Ox88","a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1","PAWN_OFFSETS","w","PIECE_OFFSETS","n","r","q","k","ATTACKS","RAYS","PIECE_MASKS","p","PROMOTIONS","SIDES","ROOKS","square","SECOND_RANK","TERMINATION_MARKERS","rank","file","isDigit","c","f","substring","swapColor","addMove","moves","undefined","push","inferPieceType","pieceType","match","strippedSan","move","trimFen","split","Chess","_board","_turn","_header","_kings","_epSquare","_halfMoves","_moveNumber","_history","_comments","_castling","_positionCount","skipValidation","load","clear","preserveHeaders","tokens","adjustments","concat","ok","error","moveNumber","parseInt","isNaN","halfMoves","rows","sumFields","previousWasNumber","kings","regex","some","char","validateFen","_put","_updateSetup","_incPositionCount","empty","castling","epSquare","bigPawnSquare","squares","_makeMove","isLegal","_isKingAttacked","_undoMove","reset","get","put","_updateCastlingRights","_updateEnPassantSquare","sq","currentPieceOnSquare","remove","whiteKingInPlace","blackKingInPlace","startSquare","currentSquare","attackers","_attacked","verbose","difference","index","offset","j","blocked","attackedBy","isAttacked","isCheck","inCheck","isCheckmate","_moves","isStalemate","isInsufficientMaterial","pieces","bishops","numPieces","squareColor","sum","len","isThreefoldRepetition","_getPositionCount","isDrawByFiftyMoves","isDraw","isGameOver","_moveToSan","forSquare","forPiece","us","them","firstSquare","lastSquare","singleSquare","castlingFrom","castlingTo","legalMoves","strict","moveObj","_moveFromSan","prettyMove","_push","turn","undo","_decPositionCount","old","pop","pgn","newline","headerExists","appendComment","moveString","comment","reversedHistory","prefix","Result","strip","wrapComment","token","currentWidth","includes","header","args","setHeader","value","removeHeader","getHeaders","loadPgn","newlineChar","mask","headerRegexResults","exec","headerString","headers","headerObj","parsePgnHeader","encodeComment","s","charCodeAt","encodeURIComponent","toHex","decodeComment","startsWith","endsWith","decodeURIComponent","fromHex","ms","_match","bracket","semicolon","ravRegex","halfMove","output","disambiguator","ambiguities","sameRank","sameFile","ambigFrom","ambigTo","getDisambiguator","cleanMove","matches","overlyDisambiguated","ascii","perft","depth","nodes","board","row","history","moveHistory","trimmedFen","_pruneComments","currentComments","copyComment","getComment","setComment","deleteComment","removeComment","getComments","deleteComments","removeComments","setCastlingRights","rights","side","getCastlingRights","formatProdErrorMessage","code","$$observable","Symbol","observable","randomString","Math","random","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","obj","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","arguments","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","splice","dispatch","action","listeners","replaceReducer","nextReducer","outerSubscribe","observer","observeState","next","unsubscribe","invariant","condition","format","process","argIndex","name","framesToPop","isObject","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","clientOffset","sourceClientOffset","payload","ResetCoordinatesAction","createBeginDrag","manager","sourceIds","publishSource","getSourceClientOffset","monitor","getMonitor","registry","getRegistry","isDragging","forEach","sourceId","getSource","verifyInvariants","canDragSource","getDraggableSource","verifyGetSourceClientOffsetIsFunction","item","beginDrag","verifyItemIsObject","pinSource","itemType","getSourceType","isSourcePublic","_defineProperty","defineProperty","enumerable","configurable","writable","target","ownKeys","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","createDrop","didDrop","targetIds","getTargetIds","canDropOnTarget","reverse","getDroppableTargets","targetId","dropResult","getTarget","drop","verifyDropResultType","getDropResult","determineDropResult","createEndDrag","verifyIsDragging","getSourceId","endDrag","unpinSource","matchesType","targetType","draggedItemType","t","createHover","targetIdsArg","verifyTargetIdsIsArray","getTargetType","removeNonMatchingTargetIds","getItemType","lastIndexOf","checkInvariants","hover","hoverAllTargets","createPublishDragSource","DragDropManagerImpl","receiveBackend","backend","getBackend","getActions","store","actions","publishDragSource","createDragDropActions","reduce","boundActions","actionCreator","apply","isSetUp","handleRefCountChange","shouldSetUp","refCount","setup","teardown","subtract","y","NONE","ALL","__IS_NONE__","__IS_ALL__","DragDropMonitorImpl","subscribeToStateChange","handlerIds","prevStateId","stateId","state","currentStateId","canSkipListener","dirtyIds","itemsB","areDirty","dirtyHandlerIds","subscribeToOffsetChange","previousState","dragOffset","nextState","canDrag","canDrop","Boolean","isDraggingSource","isOverTarget","shallow","dragOperation","getItem","getInitialClientOffset","initialClientOffset","getInitialSourceClientOffset","initialSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","scope","global","self","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromTimer","callback","timeoutHandle","handleTimer","intervalHandle","setInterval","clearTimeout","clearInterval","makeRequestCall","toggle","node","document","createTextNode","observe","characterData","data","RawTask","task","release","asapQueue","enqueueTask","queue","requestFlush","flushing","pendingErrors","capacity","flush","currentIndex","scan","newLength","registerPendingError","err","requestErrorThrow","shift","taskFactory","create","tasks","freeTasks","t1","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","validateType","allowArray","HandlerRole","nextUniqueId","getNextHandlerId","id","SOURCE","TARGET","parseRoleFromHandlerId","handlerId","mapContainsValue","searchValue","entries","isDone","done","HandlerRegistryImpl","addSource","validateSourceContract","addHandler","addTarget","validateTargetContract","containsHandler","handler","dragSources","dropTargets","includePinned","isSourceId","pinnedSourceId","pinnedSource","isTargetId","types","removeSource","delete","removeTarget","set","Map","strictEquality","_state","prevTargetIds","itemsA","insertItem","count","xor","isEqual","areArraysEqual","prevInnermostTargetId","innermostTargetId","initialState","offsetA","offsetB","items","path","defaultValue","createDragDropManager","backendFactory","globalContext","backendOptions","debugMode","reduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","instanceId","makeStoreInstance","DndContext","createContext","dragDropManager","_objectWithoutProperties","excluded","sourceKeys","sourceSymbolKeys","propertyIsEnumerable","INSTANCE_SYM","for","DndProvider","_param","isGlobalInstance","context","getGlobalContext","ctx","createSingletonDndContext","getDndContextValue","Provider","memoize","fn","EnterLeaveCounter","enter","enteringNode","previousLength","entered","union","isNodeInDocument","contains","leave","leavingNode","NativeDragSource","initializeExposedProperties","config","exposeProperties","property","loadDataTransfer","dataTransfer","newProperties","propertyFn","matchesTypes","defineProperties","handle","FILE","URL","TEXT","HTML","getDataFromDataTransfer","typesToTry","resultSoFar","typeToTry","getData","nativeTypesConfig","files","html","urls","text","matchNativeItemType","dataTransferTypes","nativeItemType","typeConfig","isFirefox","navigator","userAgent","isSafari","safari","MonotonicInterpolant","interpolate","xs","ys","c1s","c2s","c3s","mid","low","high","floor","xHere","max","diff","diffSq","indexes","sort","dys","dxs","dx","dy","i1","i2","m2","mNext","dxNext","common","i3","invDx","ELEMENT_NODE","getNodeClientOffset","el","nodeType","parentElement","getBoundingClientRect","getEventClientOffset","e","clientX","clientY","getDragPreviewOffset","sourceNode","dragPreview","anchorPoint","offsetPoint","isImage","nodeName","documentElement","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","offsetWidth","sourceWidth","offsetHeight","sourceHeight","anchorX","anchorY","dragPreviewWidth","dragPreviewHeight","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","calculateYOffset","OptionsReader","rootElement","optionsArgs","ownerDocument","HTML5BackendImpl","profile","ref1","sourcePreviewNodes","size","sourcePreviewNodeOptions","sourceNodeOptions","sourceNodes","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","dragOverTargetIds","__isReactDndBackendSetUp","addEventListeners","removeEventListeners","clearCurrentDragSourceNode","asyncEndDragFrameId","connectDragPreview","connectDragSource","handleDragStart","handleSelectStart","setAttribute","connectDropTarget","handleDragEnter","handleDragOver","handleDrop","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","dropEffect","altKeyPressed","getCurrentDropEffect","isDraggingNativeItem","getCurrentSourcePreviewNodeOptions","captureDraggingState","beginDragNativeItem","currentNativeSource","createNativeDragSource","currentNativeHandle","setCurrentDragSourceNode","currentDragSourceNode","mouseMoveTimeoutTimer","endDragIfSourceWasRemovedFromDOM","defaultPrevented","unshift","_e","lastClientOffset","hoverRafId","endDragNativeItem","body","cancelHover","scheduleHover","nativeType","setDragImage","dragPreviewOffset","setData","hasAttribute","preventDefault","enterLeaveCounter","altKey","dragDrop","tagName","isContentEditable","HTML5Backend","useChessGame","useState","setBoard","setTurn","setMoveHistory","moveSound","Audio","preload","movePiece","useCallback","play","prevHistory","undoMove","useIsomorphicLayoutEffect","useMonitorOutput","collect","onCollect","collected","updateCollected","onUpdate","setCollected","nextValue","useCollector","getHandlerId","useCollectedProps","collector","connector","reconnect","useOptionalFactory","arg","deps","memoDeps","useConnectDragSource","hooks","dragSource","useConnectDragPreview","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","bind","idx","valueA","valueB","isRef","wrapHookToRecognizeElement","hook","elementOrNode","isValidElement","element","throwIfCompositeComponentElement","newRef","previousRef","cloneElement","setRef","cloneWithRef","wrapConnectorHooks","wrappedHooks","wrappedHook","SourceConnector","receiveHandlerId","newHandlerId","connectTarget","dragSourceOptions","dragSourceOptionsInternal","dragPreviewOptions","dragPreviewOptionsInternal","didChange","reconnectDragSource","reconnectDragPreview","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","lastConnectedHandlerId","lastConnectedDragSource","lastConnectedDragSourceOptions","dragSourceUnsubscribe","forceDidChange","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","lastConnectedDragPreview","lastConnectedDragPreviewOptions","dragPreviewUnsubscribe","dragPreviewNode","dragPreviewRef","dragSourceNode","dragSourceRef","clearDragSource","clearDragPreview","useDragDropManager","useContext","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","internalMonitor","DragSourceImpl","spec","globalMonitor","end","useRegisteredDragSource","useDragSource","useDragType","unregister","registerSource","useDrag","specArg","begin","useDragSourceMonitor","useDragSourceConnector","previewOptions","useStaticQuery","allFile","find","relativePath","G","childImageSharp","gatsbyImageData","addHighlights","removeHighlights","highlight","drag","useConnectDropTarget","dropTarget","TargetConnector","didDropTargetChange","didOptionsChange","disconnectDropTarget","lastConnectedDropTarget","lastConnectedDropTargetOptions","dropTargetOptions","unsubscribeDropTarget","dropTargetOptionsInternal","dropTargetNode","dropTargetRef","clearDropTarget","isCallingCanDrop","DropTargetMonitorImpl","isOver","DropTargetImpl","useRegisteredDropTarget","useDropTarget","accept","useAccept","registerTarget","useDrop","useDropTargetMonitor","useDropTargetConnector","onDrop","onClick","isHighlighted","isSelected","tabIndex","onKeyDown","setLegalMoves","promotionMove","setPromotionMove","highlightedSquares","setHighlightedSquares","selectedSquare","setSelectedSquare","promotionSquares","setPromotionSquares","handleMovePiece","isFiftyMoves","winner","alert","checkGameOver","getSquareFromMove","highlightMoves","isCastle","promotionSquare","isLongCastle","kingSquare","prevHighlights","justSquare","isMovePromotion","isPawn","isLastRank","handleCellClick","targetSquare","handlePromotion","fromSquare","toSquare","rowIndex","cell","cellIndex","onChange","disabled","ChessContext","ChessProvider","chessGame","flexDirection","alignItems","justifyContent","marginTop","Head"],"sourceRoot":""}